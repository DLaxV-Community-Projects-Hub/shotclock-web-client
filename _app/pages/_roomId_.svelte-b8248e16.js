import{P as C,S as M,i as N,s as P,e as I,k as R,t as F,c as j,a as S,d as g,m as J,h as K,b as h,Q as A,g as O,J as k,N as $,o as V,p as Q,q as x,j as W,O as G,R as H,v as L,n as X,T as D,U as Y,w as E,x as T,y as U,K as q,B as z,V as Z}from"../chunks/vendor-eaf7e502.js";import{b as ee}from"../chunks/paths-4b3c6e7e.js";const te=()=>{const a=C("__svelte__");return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:a.navigating.subscribe}},session:a.session}},se={subscribe(a){return te().page.subscribe(a)}};function ae(a){let t,s;return t=new D({props:{icon:Y,size:"2x"}}),{c(){E(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,r){U(t,e,r),s=!0},p:q,i(e){s||(x(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){z(t,e)}}}function ne(a){let t,s;return t=new D({props:{icon:Z,size:"2x"}}),{c(){E(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,r){U(t,e,r),s=!0},p:q,i(e){s||(x(t.$$.fragment,e),s=!0)},o(e){V(t.$$.fragment,e),s=!1},d(e){z(t,e)}}}function re(a){let t,s,e,r,b,l,i,u,c,p,f;const v=[ne,ae],d=[];function w(n,o){return n[2]?0:1}return e=w(a),r=d[e]=v[e](a),{c(){t=I("div"),s=I("div"),r.c(),b=R(),l=I("div"),i=I("span"),u=F(a[0]),this.h()},l(n){t=j(n,"DIV",{id:!0,class:!0});var o=S(t);s=j(o,"DIV",{class:!0});var m=S(s);r.l(m),m.forEach(g),b=J(o),l=j(o,"DIV",{class:!0});var _=S(l);i=j(_,"SPAN",{class:!0});var y=S(i);u=K(y,a[0]),y.forEach(g),_.forEach(g),o.forEach(g),this.h()},h(){h(s,"class","absolute top-3 left-3"),h(i,"class","clock svelte-jj001p"),A(i,"text-red-600",a[1]),h(l,"class","h-full w-full flex flex-col justify-center items-center"),h(t,"id","main"),h(t,"class","w-screen h-screen overflow-hidden svelte-jj001p")},m(n,o){O(n,t,o),k(t,s),d[e].m(s,null),k(t,b),k(t,l),k(l,i),k(i,u),c=!0,p||(f=[$(s,"click",a[5]),$(t,"click",a[3],{once:!0})],p=!0)},p(n,[o]){let m=e;e=w(n),e===m?d[e].p(n,o):(X(),V(d[m],1,1,()=>{d[m]=null}),Q(),r=d[e],r?r.p(n,o):(r=d[e]=v[e](n),r.c()),x(r,1),r.m(s,null)),(!c||o&1)&&W(u,n[0]),o&2&&A(i,"text-red-600",n[1])},i(n){c||(x(r),c=!0)},o(n){V(r),c=!1},d(n){n&&g(t),d[e].d(),p=!1,G(f)}}}function oe(a,t,s){let e;H(a,se,n=>s(9,e=n));let r=e.params.roomId,b,l,i="",u=!1,c,p=!1,f;L(()=>{d(),f=new Audio(ee+"/audio/beep.mp3")});function v(){s(2,p=!0),f.play(),f.pause(),f.load()}function d(){b=new WebSocket("wss://tobias-reinke.de/shotclock/"+r),b.onerror=function(_){console.log(_)},b.onmessage=function(_){let y=_.data.substring(0,1),B=_.data.substring(2).includes(";")?_.data.substring(2).split(";"):[_.data.substring(2)];switch(y){case"t":s(4,l=parseInt(B[1])),l==0?n():o();break}};function n(){c===void 0&&(s(1,u=!0),m(),c=setInterval(function(){s(1,u=!u)},500))}function o(){c&&(clearInterval(c),c=void 0,s(1,u=!1))}function m(){p&&(f.play(),setTimeout(function(){f.pause(),f.load()},2e3))}}const w=()=>s(2,p=!p);return a.$$.update=()=>{a.$$.dirty&16&&l!==void 0&&s(0,i=l.toString().padStart(2,"0"))},[i,u,p,v,l,w]}class ce extends M{constructor(t){super();N(this,t,oe,re,P,{})}}export{ce as default};
