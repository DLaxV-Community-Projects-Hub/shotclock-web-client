import{S as Tl,i as Dl,s as Nl,e as n,c as i,a as c,d as r,b as f,g as A,R as O,o as D,p as Mt,q as N,G as Sl,I as yl,v as Bl,T as Vl,n as Wt,w as te,x as le,y as se,E as Ke,B as re,k as b,t as p,m as g,h,U,Q as e,j as _t}from"../../chunks/index-bcecc6c1.js";import{w as Pl,s as Ul,p as Al}from"../../chunks/config-3ef163f3.js";import{b as C}from"../../chunks/singletons-1b661bce.js";import{L as Rl,F as he,f as El,a as Il,b as Ol,c as xl,d as jl,e as Cl}from"../../chunks/LoadingInfo-15f4731b.js";import{g as Ft}from"../../chunks/navigation-d1154fc1.js";const{window:Ll}=Vl;function Hl(a){let s,t;return s=new Rl({}),{c(){te(s.$$.fragment)},l(l){le(s.$$.fragment,l)},m(l,d){se(s,l,d),t=!0},p:Ke,i(l){t||(N(s.$$.fragment,l),t=!0)},o(l){D(s.$$.fragment,l),t=!1},d(l){re(s,l)}}}function zl(a){let s,t,l,d,v,w,u,_,$,E,I,L,G,y,B,ae,He,oe,be,ge,R,x,H,Ne,ze,z,T,K,Fe,F,Me,We,j,Q,S,k,V,ye,M,P,we,vt,mt,ke,pt,ht,W,Ee,bt,Ie,gt,Se,wt,kt,$e,Et,It,ne,Be,Qe,St,ie,ce,fe,Ve,$t,Tt,J,Je,Dt,Nt,yt,Bt,Pe,Ue,X,Ae,Vt,Pt,Te,Ut,ue,de,Re,At,Rt,Y,Xe,Ot,xt,jt,Ct,Oe,xe,Z,je,Lt,Ht,De,_e,zt,qt;const Gt=[Ml,Fl],ve=[];function Kt(o,m){return o[7]?0:1}t=Kt(a),l=ve[t]=Gt[t](a);function Qt(o,m){return o[6]?ql:Wl}let Ye=Qt(a),ee=Ye(a);const Jt=[Kl,Gl],me=[];function Xt(o,m){return o[8]?0:1}return k=Xt(a),V=me[k]=Jt[k](a),Ee=new he({props:{class:"w-full lg:hidden",icon:El}}),Ie=new he({props:{class:"w-full hidden lg:block",icon:El,size:"2x"}}),Te=new he({props:{icon:Il,size:"lg"}}),De=new he({props:{icon:Il,size:"lg"}}),{c(){s=n("div"),l.c(),d=b(),v=n("div"),w=n("div"),u=n("div"),_=n("span"),$=p("Room"),E=b(),I=n("span"),L=p(a[9]),G=b(),y=n("div"),B=n("span"),ae=p("PIN"),He=b(),oe=n("span"),be=p(a[1]),ge=b(),R=n("div"),x=n("div"),H=n("span"),Ne=p(a[4]),ze=b(),z=n("div"),T=n("button"),K=n("span"),ee.c(),Fe=b(),F=n("button"),Me=p("RESET"),We=b(),j=n("div"),Q=n("button"),S=n("div"),V.c(),ye=b(),M=n("div"),P=n("div"),we=n("button"),vt=p("-5s"),mt=b(),ke=n("button"),pt=p("-1s"),ht=b(),W=n("button"),te(Ee.$$.fragment),bt=b(),te(Ie.$$.fragment),gt=b(),Se=n("button"),wt=p("+1s"),kt=b(),$e=n("button"),Et=p("+5s"),It=b(),ne=n("div"),Be=n("div"),Qe=n("div"),St=b(),ie=n("div"),ce=n("div"),fe=n("div"),Ve=n("span"),$t=p("Shot clock URL"),Tt=b(),J=n("a"),Je=p(a[2]),Dt=p(C),Nt=p("/room/"),yt=p(a[9]),Bt=b(),Pe=n("div"),Ue=n("button"),X=n("div"),Ae=n("span"),Vt=p("Share shot clock URL"),Pt=b(),te(Te.$$.fragment),Ut=b(),ue=n("div"),de=n("div"),Re=n("span"),At=p("Controller URL"),Rt=b(),Y=n("a"),Xe=p(a[2]),Ot=p(C),xt=p("/control/"),jt=p(a[9]),Ct=b(),Oe=n("div"),xe=n("button"),Z=n("div"),je=n("span"),Lt=p("Share Controller URL"),Ht=b(),te(De.$$.fragment),this.h()},l(o){s=i(o,"DIV",{class:!0});var m=c(s);l.l(m),m.forEach(r),d=g(o),v=i(o,"DIV",{class:!0});var Ce=c(v);w=i(Ce,"DIV",{class:!0});var pe=c(w);u=i(pe,"DIV",{class:!0});var Ze=c(u);_=i(Ze,"SPAN",{class:!0});var Yt=c(_);$=h(Yt,"Room"),Yt.forEach(r),E=g(Ze),I=i(Ze,"SPAN",{class:!0});var Zt=c(I);L=h(Zt,a[9]),Zt.forEach(r),Ze.forEach(r),G=g(pe),y=i(pe,"DIV",{class:!0});var et=c(y);B=i(et,"SPAN",{class:!0});var el=c(B);ae=h(el,"PIN"),el.forEach(r),He=g(et),oe=i(et,"SPAN",{class:!0});var tl=c(oe);be=h(tl,a[1]),tl.forEach(r),et.forEach(r),pe.forEach(r),Ce.forEach(r),ge=g(o),R=i(o,"DIV",{class:!0});var Le=c(R);x=i(Le,"DIV",{class:!0});var ll=c(x);H=i(ll,"SPAN",{class:!0});var sl=c(H);Ne=h(sl,a[4]),sl.forEach(r),ll.forEach(r),ze=g(Le),z=i(Le,"DIV",{class:!0});var tt=c(z);T=i(tt,"BUTTON",{class:!0});var rl=c(T);K=i(rl,"SPAN",{title:!0});var al=c(K);ee.l(al),al.forEach(r),rl.forEach(r),Fe=g(tt),F=i(tt,"BUTTON",{class:!0,title:!0});var ol=c(F);Me=h(ol,"RESET"),ol.forEach(r),tt.forEach(r),We=g(Le),j=i(Le,"DIV",{class:!0});var lt=c(j);Q=i(lt,"BUTTON",{class:!0});var nl=c(Q);S=i(nl,"DIV",{class:!0});var il=c(S);V.l(il),il.forEach(r),nl.forEach(r),ye=g(lt),M=i(lt,"DIV",{class:!0});var st=c(M);P=i(st,"DIV",{class:!0});var q=c(P);we=i(q,"BUTTON",{class:!0});var cl=c(we);vt=h(cl,"-5s"),cl.forEach(r),mt=g(q),ke=i(q,"BUTTON",{class:!0});var fl=c(ke);pt=h(fl,"-1s"),fl.forEach(r),ht=g(q),W=i(q,"BUTTON",{class:!0,title:!0});var rt=c(W);le(Ee.$$.fragment,rt),bt=g(rt),le(Ie.$$.fragment,rt),rt.forEach(r),gt=g(q),Se=i(q,"BUTTON",{class:!0});var ul=c(Se);wt=h(ul,"+1s"),ul.forEach(r),kt=g(q),$e=i(q,"BUTTON",{class:!0});var dl=c($e);Et=h(dl,"+5s"),dl.forEach(r),q.forEach(r),It=g(st),ne=i(st,"DIV",{class:!0});var at=c(ne);Be=i(at,"DIV",{class:!0});var _l=c(Be);Qe=i(_l,"DIV",{});var $l=c(Qe);$l.forEach(r),_l.forEach(r),St=g(at),ie=i(at,"DIV",{class:!0});var ot=c(ie);ce=i(ot,"DIV",{class:!0});var nt=c(ce);fe=i(nt,"DIV",{class:!0});var it=c(fe);Ve=i(it,"SPAN",{class:!0});var vl=c(Ve);$t=h(vl,"Shot clock URL"),vl.forEach(r),Tt=g(it),J=i(it,"A",{href:!0});var qe=c(J);Je=h(qe,a[2]),Dt=h(qe,C),Nt=h(qe,"/room/"),yt=h(qe,a[9]),qe.forEach(r),it.forEach(r),Bt=g(nt),Pe=i(nt,"DIV",{});var ml=c(Pe);Ue=i(ml,"BUTTON",{class:!0});var pl=c(Ue);X=i(pl,"DIV",{class:!0});var ct=c(X);Ae=i(ct,"SPAN",{class:!0});var hl=c(Ae);Vt=h(hl,"Share shot clock URL"),hl.forEach(r),Pt=g(ct),le(Te.$$.fragment,ct),ct.forEach(r),pl.forEach(r),ml.forEach(r),nt.forEach(r),Ut=g(ot),ue=i(ot,"DIV",{class:!0});var ft=c(ue);de=i(ft,"DIV",{class:!0});var ut=c(de);Re=i(ut,"SPAN",{class:!0});var bl=c(Re);At=h(bl,"Controller URL"),bl.forEach(r),Rt=g(ut),Y=i(ut,"A",{href:!0});var Ge=c(Y);Xe=h(Ge,a[2]),Ot=h(Ge,C),xt=h(Ge,"/control/"),jt=h(Ge,a[9]),Ge.forEach(r),ut.forEach(r),Ct=g(ft),Oe=i(ft,"DIV",{});var gl=c(Oe);xe=i(gl,"BUTTON",{class:!0});var wl=c(xe);Z=i(wl,"DIV",{class:!0});var dt=c(Z);je=i(dt,"SPAN",{class:!0});var kl=c(je);Lt=h(kl,"Share Controller URL"),kl.forEach(r),Ht=g(dt),le(De.$$.fragment,dt),dt.forEach(r),wl.forEach(r),gl.forEach(r),ft.forEach(r),ot.forEach(r),at.forEach(r),st.forEach(r),lt.forEach(r),Le.forEach(r),this.h()},h(){f(s,"class","absolute top-3 left-3"),f(_,"class","text-xs"),f(I,"class","text-xl"),f(u,"class","mr-5"),f(B,"class","text-xs"),f(oe,"class","text-xl"),f(y,"class",""),f(w,"class","flex flex-row"),f(v,"class","absolute top-3 right-3"),f(H,"class","clock svelte-1rwt891"),U(H,"text-red-600",a[5]),f(x,"class","flex flex-col justify-center items-center m-5 lg:m-0"),f(K,"title","Hotkeys: Spacebar, Enter"),f(T,"class","controlButton svelte-1rwt891"),U(T,"startButton",!a[6]&&a[0]>0),U(T,"stopButton",a[6]&&a[0]>0),U(T,"buttonDisabled",a[0]==0),f(F,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-1rwt891"),f(F,"title","Hotkeys: M, C, Backspace"),f(z,"class","flex flex-row lg:flex-col justify-evenly m-5 lg:m-0"),f(S,"class","flex flex-row justify-center"),f(Q,"class","lg:hidden"),f(we,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-1rwt891"),f(ke,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-1rwt891"),f(W,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-1rwt891"),f(W,"title","Rewind to last reset"),f(Se,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-1rwt891"),f($e,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-1rwt891"),f(P,"class","flex flex-row lg:flex-col justify-evenly mt-5 lg:mt-0 lg:ml-20"),f(Be,"class","lg:text-right flex flex-row lg:flex-col justify-evenly lg:justify-start m-3 mt-1"),f(Ve,"class","text-xs"),f(J,"href",C+"/room/"+a[9]),f(fe,"class","hidden lg:flex flex-col mb-3"),f(Ae,"class","mr-2"),f(X,"class","flex flex-row items-center"),f(Ue,"class","shareButton lg:text-lg svelte-1rwt891"),U(Pe,"hidden",!navigator.share),f(ce,"class","w-1/2 lg:w-full"),f(Re,"class","text-xs"),f(Y,"href",C+"/control/"+a[9]),f(de,"class","hidden lg:flex flex-col mb-3"),f(je,"class","mr-2"),f(Z,"class","flex flex-row items-center"),f(xe,"class","shareButton lg:text-lg svelte-1rwt891"),U(Oe,"hidden",!navigator.share),f(ue,"class","w-1/2 lg:w-full"),f(ie,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3 lg:mt-20"),f(ne,"class","flex flex-col lg:flex-col-reverse lg:justify-end"),f(M,"class","h-full flex flex-col lg:flex-row justify-between"),U(M,"hidden",!a[8]),f(j,"class","w--7/8 lg:w-full mx-2 lg:mx-0 p-1 lg:p-0 border lg:border-0 rounded"),U(j,"pb-3",a[8]),f(R,"class","h-full w-full flex flex-col lg:flex-row justify-start lg:justify-between")},m(o,m){A(o,s,m),ve[t].m(s,null),A(o,d,m),A(o,v,m),e(v,w),e(w,u),e(u,_),e(_,$),e(u,E),e(u,I),e(I,L),e(w,G),e(w,y),e(y,B),e(B,ae),e(y,He),e(y,oe),e(oe,be),A(o,ge,m),A(o,R,m),e(R,x),e(x,H),e(H,Ne),e(R,ze),e(R,z),e(z,T),e(T,K),ee.m(K,null),e(z,Fe),e(z,F),e(F,Me),e(R,We),e(R,j),e(j,Q),e(Q,S),me[k].m(S,null),e(j,ye),e(j,M),e(M,P),e(P,we),e(we,vt),e(P,mt),e(P,ke),e(ke,pt),e(P,ht),e(P,W),se(Ee,W,null),e(W,bt),se(Ie,W,null),e(P,gt),e(P,Se),e(Se,wt),e(P,kt),e(P,$e),e($e,Et),e(M,It),e(M,ne),e(ne,Be),e(Be,Qe),e(ne,St),e(ne,ie),e(ie,ce),e(ce,fe),e(fe,Ve),e(Ve,$t),e(fe,Tt),e(fe,J),e(J,Je),e(J,Dt),e(J,Nt),e(J,yt),e(ce,Bt),e(ce,Pe),e(Pe,Ue),e(Ue,X),e(X,Ae),e(Ae,Vt),e(X,Pt),se(Te,X,null),e(ie,Ut),e(ie,ue),e(ue,de),e(de,Re),e(Re,At),e(de,Rt),e(de,Y),e(Y,Xe),e(Y,Ot),e(Y,xt),e(Y,jt),e(ue,Ct),e(ue,Oe),e(Oe,xe),e(xe,Z),e(Z,je),e(je,Lt),e(Z,Ht),se(De,Z,null),_e=!0,zt||(qt=[O(s,"click",a[18]),O(T,"click",a[11]),O(F,"click",a[12]),O(Q,"click",a[19]),O(we,"click",a[20]),O(ke,"click",a[21]),O(W,"click",a[13]),O(Se,"click",a[22]),O($e,"click",a[23]),O(X,"click",a[15]),O(Z,"click",a[16])],zt=!0)},p(o,m){let Ce=t;t=Kt(o),t===Ce?ve[t].p(o,m):(Wt(),D(ve[Ce],1,1,()=>{ve[Ce]=null}),Mt(),l=ve[t],l?l.p(o,m):(l=ve[t]=Gt[t](o),l.c()),N(l,1),l.m(s,null)),(!_e||m[0]&2)&&_t(be,o[1]),(!_e||m[0]&16)&&_t(Ne,o[4]),m[0]&32&&U(H,"text-red-600",o[5]),Ye!==(Ye=Qt(o))&&(ee.d(1),ee=Ye(o),ee&&(ee.c(),ee.m(K,null))),m[0]&65&&U(T,"startButton",!o[6]&&o[0]>0),m[0]&65&&U(T,"stopButton",o[6]&&o[0]>0),m[0]&1&&U(T,"buttonDisabled",o[0]==0);let pe=k;k=Xt(o),k===pe?me[k].p(o,m):(Wt(),D(me[pe],1,1,()=>{me[pe]=null}),Mt(),V=me[k],V?V.p(o,m):(V=me[k]=Jt[k](o),V.c()),N(V,1),V.m(S,null)),(!_e||m[0]&4)&&_t(Je,o[2]),(!_e||m[0]&4)&&_t(Xe,o[2]),m[0]&256&&U(M,"hidden",!o[8]),m[0]&256&&U(j,"pb-3",o[8])},i(o){_e||(N(l),N(V),N(Ee.$$.fragment,o),N(Ie.$$.fragment,o),N(Te.$$.fragment,o),N(De.$$.fragment,o),_e=!0)},o(o){D(l),D(V),D(Ee.$$.fragment,o),D(Ie.$$.fragment,o),D(Te.$$.fragment,o),D(De.$$.fragment,o),_e=!1},d(o){o&&r(s),ve[t].d(),o&&r(d),o&&r(v),o&&r(ge),o&&r(R),ee.d(),me[k].d(),re(Ee),re(Ie),re(Te),re(De),zt=!1,Sl(qt)}}}function Fl(a){let s,t;return s=new he({props:{icon:Ol,size:"2x"}}),{c(){te(s.$$.fragment)},l(l){le(s.$$.fragment,l)},m(l,d){se(s,l,d),t=!0},p:Ke,i(l){t||(N(s.$$.fragment,l),t=!0)},o(l){D(s.$$.fragment,l),t=!1},d(l){re(s,l)}}}function Ml(a){let s,t;return s=new he({props:{icon:xl,size:"2x"}}),{c(){te(s.$$.fragment)},l(l){le(s.$$.fragment,l)},m(l,d){se(s,l,d),t=!0},p:Ke,i(l){t||(N(s.$$.fragment,l),t=!0)},o(l){D(s.$$.fragment,l),t=!1},d(l){re(s,l)}}}function Wl(a){let s;return{c(){s=p("START")},l(t){s=h(t,"START")},m(t,l){A(t,s,l)},d(t){t&&r(s)}}}function ql(a){let s;return{c(){s=p("STOP")},l(t){s=h(t,"STOP")},m(t,l){A(t,s,l)},d(t){t&&r(s)}}}function Gl(a){let s,t,l,d,v,w;return t=new he({props:{icon:jl}}),{c(){s=n("div"),te(t.$$.fragment),l=b(),d=n("span"),v=p("Show advanced options"),this.h()},l(u){s=i(u,"DIV",{class:!0});var _=c(s);le(t.$$.fragment,_),_.forEach(r),l=g(u),d=i(u,"SPAN",{class:!0});var $=c(d);v=h($,"Show advanced options"),$.forEach(r),this.h()},h(){f(s,"class","mt-1"),f(d,"class","ml-2")},m(u,_){A(u,s,_),se(t,s,null),A(u,l,_),A(u,d,_),e(d,v),w=!0},p:Ke,i(u){w||(N(t.$$.fragment,u),w=!0)},o(u){D(t.$$.fragment,u),w=!1},d(u){u&&r(s),re(t),u&&r(l),u&&r(d)}}}function Kl(a){let s,t,l,d,v,w;return t=new he({props:{icon:Cl}}),{c(){s=n("div"),te(t.$$.fragment),l=b(),d=n("span"),v=p("Hide advanced options"),this.h()},l(u){s=i(u,"DIV",{class:!0});var _=c(s);le(t.$$.fragment,_),_.forEach(r),l=g(u),d=i(u,"SPAN",{class:!0});var $=c(d);v=h($,"Hide advanced options"),$.forEach(r),this.h()},h(){f(s,"class","mt-1"),f(d,"class","ml-2")},m(u,_){A(u,s,_),se(t,s,null),A(u,l,_),A(u,d,_),e(d,v),w=!0},p:Ke,i(u){w||(N(t.$$.fragment,u),w=!0)},o(u){D(t.$$.fragment,u),w=!1},d(u){u&&r(s),re(t),u&&r(l),u&&r(d)}}}function Ql(a){let s,t,l,d,v,w;const u=[zl,Hl],_=[];function $(E,I){return E[3]?0:1}return t=$(a),l=_[t]=u[t](a),{c(){s=n("div"),l.c(),this.h()},l(E){s=i(E,"DIV",{id:!0,class:!0});var I=c(s);l.l(I),I.forEach(r),this.h()},h(){f(s,"id","main"),f(s,"class","w-full h-full svelte-1rwt891")},m(E,I){A(E,s,I),_[t].m(s,null),d=!0,v||(w=[O(Ll,"keydown",a[17]),O(s,"click",a[10],{once:!0})],v=!0)},p(E,I){let L=t;t=$(E),t===L?_[t].p(E,I):(Wt(),D(_[L],1,1,()=>{_[L]=null}),Mt(),l=_[t],l?l.p(E,I):(l=_[t]=u[t](E),l.c()),N(l,1),l.m(s,null))},i(E){d||(N(l),d=!0)},o(E){D(l),d=!1},d(E){E&&r(s),_[t].d(),v=!1,Sl(w)}}}function Jl(a,s,t){let l;yl(a,Al,S=>t(27,l=S));let d=l.params.roomId,v,w,u=!1,_,$,E="",I=!1,L,G,y=!1,B,ae=!0;Bl(()=>{t(2,w=window.location.host),l.url.searchParams.has("pin")?t(1,v=l.url.searchParams.get("pin")):(t(1,v=sessionStorage.getItem("PIN-"+d)),v||t(1,v=prompt("Please enter the control PIN for room "+d))),v?(sessionStorage.setItem("PIN-"+d,v),oe(v),B=new Audio(C+"/audio/beep.mp3")):Ft(C+"/"),navigator.share&&t(8,ae=!1)});function He(){t(7,y=!0),B.play(),B.pause(),B.load()}function oe(S){_=new WebSocket(Pl+"://"+Ul+"/"+d+"?pin="+S),_.onerror=function(k){console.log(k)},_.onmessage=function(k){if(k.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),Ft(C+"/");else if(k.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),Ft(C+"/");else if(k.data==="AUTHENTICATED")t(3,u=!0);else{let V=k.data.substring(0,1),ye=k.data.substring(2).includes(";")?k.data.substring(2).split(";"):[k.data.substring(2)];switch(V){case"t":t(0,$=parseInt(ye[1])),$==0?H():Ne();break;case"r":t(6,L=ye[0]==="1");break}}}}function be(){L?_.send("pause"):_.send("start")}function ge(){_.send("reset")}function R(){_.send("rewind")}function x(S){_.send("updateTime;"+S)}function H(){G===void 0&&(t(5,I=!0),ze(),G=setInterval(function(){t(5,I=!I)},500))}function Ne(){G&&(clearInterval(G),G=void 0,t(5,I=!1))}function ze(){y&&(B.play(),setTimeout(function(){B.pause(),B.load()},2e3))}function z(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:C+"/room/"+d})}function T(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:C+"/control/"+d})}function K(S){S.key===" "||S.key==="Enter"?(be(),S.preventDefault()):(S.key.toLowerCase()==="m"||S.key.toLowerCase()==="c"||S.key==="Backspace")&&(ge(),S.preventDefault())}const Fe=()=>t(7,y=!y),F=()=>t(8,ae=!ae),Me=()=>x(-5),We=()=>x(-1),j=()=>x(1),Q=()=>x(5);return a.$$.update=()=>{a.$$.dirty[0]&1&&$!==void 0&&t(4,E=$.toString().padStart(2,"0"))},[$,v,w,u,E,I,L,y,ae,d,He,be,ge,R,x,z,T,K,Fe,F,Me,We,j,Q]}class ls extends Tl{constructor(s){super(),Dl(this,s,Jl,Ql,Nl,{},null,[-1,-1])}}export{ls as default};
