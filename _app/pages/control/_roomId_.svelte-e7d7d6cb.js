import{S as qt,i as Lt,s as Ct,e as n,c,a as i,d as a,b as f,g as ve,X as se,o as F,p as $t,q as W,Y as jt,F as Ut,v as Rt,a1 as Mt,n as zt,_ as Ft,Z as Wt,w as Pe,x as Ae,y as Ve,L as ft,B as Be,P as Ge,a2 as Ot,k as N,t as h,m as S,h as g,a3 as Z,R as l,j as B,a4 as Ht,a5 as Xt}from"../../chunks/vendor-6d995ebd.js";import{p as Gt,w as Kt,s as Yt}from"../../chunks/config-49fddc90.js";import{b as y}from"../../chunks/paths-b0acc198.js";import{L as Zt}from"../../chunks/LoadingInfo-636a75e3.js";import{g as ut}from"../../chunks/navigation-ecedacd4.js";const{window:Jt}=Mt;function Qt(o){let s,t;return s=new Zt({}),{c(){Pe(s.$$.fragment)},l(e){Ae(s.$$.fragment,e)},m(e,_){Ve(s,e,_),t=!0},p:ft,i(e){t||(W(s.$$.fragment,e),t=!0)},o(e){F(s.$$.fragment,e),t=!1},d(e){Be(s,e)}}}function xt(o){let s,t,e,_,d,b,D,k,P,u,m,w,J,A,$=o[7]("control.reset")+"",T,he,z,V,j,H,Q=o[7]("control.room")+"",oe,ge,X,be,ke,v,E,x=o[7]("control.room_url")+"",ee,Ke,L,Te,Ye,Ze,Je,Qe,re,ae,C,ne,we=o[7]("control.share_room_url")+"",ye,xe,te,et,O,G,ce,Ee=o[7]("control.pin")+"",$e,tt,ie,je,lt,K,fe,Ie=o[7]("control.controller_url")+"",Ue,st,R,ze,ot,rt,at,nt,ue,de,M,_e,Ne=o[7]("control.share_controller_url")+"",Oe,ct,le,I,it,dt;const _t=[tl,el],Y=[];function pt(r,p){return r[6]?0:1}t=pt(o),e=Y[t]=_t[t](o);function mt(r,p){return r[5]?sl:ll}let qe=mt(o),U=qe(o);return te=new Ge({props:{icon:Ot,size:"lg"}}),le=new Ge({props:{icon:Ot,size:"lg"}}),{c(){s=n("div"),e.c(),_=N(),d=n("div"),b=n("div"),D=n("span"),k=h(o[3]),P=N(),u=n("div"),m=n("button"),w=n("span"),U.c(),J=N(),A=n("button"),T=h($),he=N(),z=n("div"),V=n("div"),j=n("div"),H=n("span"),oe=h(Q),ge=N(),X=n("span"),be=h(o[8]),ke=N(),v=n("div"),E=n("span"),ee=h(x),Ke=N(),L=n("a"),Te=h(o[1]),Ye=h(y),Ze=h("/room/"),Je=h(o[8]),Qe=N(),re=n("div"),ae=n("button"),C=n("div"),ne=n("span"),ye=h(we),xe=N(),Pe(te.$$.fragment),et=N(),O=n("div"),G=n("div"),ce=n("span"),$e=h(Ee),tt=N(),ie=n("span"),je=h(o[0]),lt=N(),K=n("div"),fe=n("span"),Ue=h(Ie),st=N(),R=n("a"),ze=h(o[1]),ot=h(y),rt=h("/control/"),at=h(o[8]),nt=N(),ue=n("div"),de=n("button"),M=n("div"),_e=n("span"),Oe=h(Ne),ct=N(),Pe(le.$$.fragment),this.h()},l(r){s=c(r,"DIV",{class:!0});var p=i(s);e.l(p),p.forEach(a),_=S(r),d=c(r,"DIV",{class:!0});var q=i(d);b=c(q,"DIV",{class:!0});var vt=i(b);D=c(vt,"SPAN",{class:!0});var ht=i(D);k=g(ht,o[3]),ht.forEach(a),vt.forEach(a),P=S(q),u=c(q,"DIV",{class:!0});var Le=i(u);m=c(Le,"BUTTON",{class:!0});var gt=i(m);w=c(gt,"SPAN",{});var bt=i(w);U.l(bt),bt.forEach(a),gt.forEach(a),J=S(Le),A=c(Le,"BUTTON",{class:!0});var kt=i(A);T=g(kt,$),kt.forEach(a),Le.forEach(a),he=S(q),z=c(q,"DIV",{class:!0});var Ce=i(z);V=c(Ce,"DIV",{class:!0});var pe=i(V);j=c(pe,"DIV",{class:!0});var Re=i(j);H=c(Re,"SPAN",{class:!0});var wt=i(H);oe=g(wt,Q),wt.forEach(a),ge=S(Re),X=c(Re,"SPAN",{class:!0});var Et=i(X);be=g(Et,o[8]),Et.forEach(a),Re.forEach(a),ke=S(pe),v=c(pe,"DIV",{class:!0});var Me=i(v);E=c(Me,"SPAN",{class:!0});var It=i(E);ee=g(It,x),It.forEach(a),Ke=S(Me),L=c(Me,"A",{href:!0});var Se=i(L);Te=g(Se,o[1]),Ye=g(Se,y),Ze=g(Se,"/room/"),Je=g(Se,o[8]),Se.forEach(a),Me.forEach(a),Qe=S(pe),re=c(pe,"DIV",{});var Nt=i(re);ae=c(Nt,"BUTTON",{class:!0});var St=i(ae);C=c(St,"DIV",{class:!0});var Fe=i(C);ne=c(Fe,"SPAN",{class:!0});var Dt=i(ne);ye=g(Dt,we),Dt.forEach(a),xe=S(Fe),Ae(te.$$.fragment,Fe),Fe.forEach(a),St.forEach(a),Nt.forEach(a),pe.forEach(a),et=S(Ce),O=c(Ce,"DIV",{class:!0});var me=i(O);G=c(me,"DIV",{class:!0});var We=i(G);ce=c(We,"SPAN",{class:!0});var Pt=i(ce);$e=g(Pt,Ee),Pt.forEach(a),tt=S(We),ie=c(We,"SPAN",{class:!0});var At=i(ie);je=g(At,o[0]),At.forEach(a),We.forEach(a),lt=S(me),K=c(me,"DIV",{class:!0});var He=i(K);fe=c(He,"SPAN",{class:!0});var Vt=i(fe);Ue=g(Vt,Ie),Vt.forEach(a),st=S(He),R=c(He,"A",{href:!0});var De=i(R);ze=g(De,o[1]),ot=g(De,y),rt=g(De,"/control/"),at=g(De,o[8]),De.forEach(a),He.forEach(a),nt=S(me),ue=c(me,"DIV",{});var Bt=i(ue);de=c(Bt,"BUTTON",{class:!0});var Tt=i(de);M=c(Tt,"DIV",{class:!0});var Xe=i(M);_e=c(Xe,"SPAN",{class:!0});var yt=i(_e);Oe=g(yt,Ne),yt.forEach(a),ct=S(Xe),Ae(le.$$.fragment,Xe),Xe.forEach(a),Tt.forEach(a),Bt.forEach(a),me.forEach(a),Ce.forEach(a),q.forEach(a),this.h()},h(){f(s,"class","absolute top-3 left-3"),f(D,"class","clock svelte-qg5rdz"),Z(D,"text-red-600",o[4]),f(b,"class","flex flex-col justify-center items-center"),f(m,"class","controlButton svelte-qg5rdz"),Z(m,"startButton",!o[5]),Z(m,"stopButton",o[5]),f(A,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-qg5rdz"),f(u,"class","flex flex-row lg:flex-col justify-evenly"),f(H,"class","text-xs"),f(X,"class","text-xl"),f(j,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(E,"class","text-xs"),f(L,"href",""+(y+"/room/"+o[8])),f(v,"class","hidden lg:flex flex-col mb-3"),f(ne,"class","mr-2"),f(C,"class","flex flex-row items-center"),f(ae,"class","shareButton lg:text-lg svelte-qg5rdz"),Z(re,"hidden",!navigator.share),f(V,"class","lg:mb-10 w-1/2 lg:w-full"),f(ce,"class","text-xs"),f(ie,"class","text-xl"),f(G,"class","flex flex-col mb-3"),f(fe,"class","text-xs"),f(R,"href",""+(y+"/control/"+o[8])),f(K,"class","hidden lg:flex flex-col mb-3"),f(_e,"class","mr-2"),f(M,"class","flex flex-row items-center"),f(de,"class","shareButton lg:text-lg svelte-qg5rdz"),Z(ue,"hidden",!navigator.share),f(O,"class","w-1/2 lg:w-full"),f(z,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(d,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,p){ve(r,s,p),Y[t].m(s,null),ve(r,_,p),ve(r,d,p),l(d,b),l(b,D),l(D,k),l(d,P),l(d,u),l(u,m),l(m,w),U.m(w,null),l(u,J),l(u,A),l(A,T),l(d,he),l(d,z),l(z,V),l(V,j),l(j,H),l(H,oe),l(j,ge),l(j,X),l(X,be),l(V,ke),l(V,v),l(v,E),l(E,ee),l(v,Ke),l(v,L),l(L,Te),l(L,Ye),l(L,Ze),l(L,Je),l(V,Qe),l(V,re),l(re,ae),l(ae,C),l(C,ne),l(ne,ye),l(C,xe),Ve(te,C,null),l(z,et),l(z,O),l(O,G),l(G,ce),l(ce,$e),l(G,tt),l(G,ie),l(ie,je),l(O,lt),l(O,K),l(K,fe),l(fe,Ue),l(K,st),l(K,R),l(R,ze),l(R,ot),l(R,rt),l(R,at),l(O,nt),l(O,ue),l(ue,de),l(de,M),l(M,_e),l(_e,Oe),l(M,ct),Ve(le,M,null),I=!0,it||(dt=[se(s,"click",o[16]),se(m,"click",o[10]),se(A,"click",o[11]),se(C,"click",o[12]),se(M,"click",o[13])],it=!0)},p(r,p){let q=t;t=pt(r),t===q?Y[t].p(r,p):(zt(),F(Y[q],1,1,()=>{Y[q]=null}),$t(),e=Y[t],e?e.p(r,p):(e=Y[t]=_t[t](r),e.c()),W(e,1),e.m(s,null)),(!I||p&8)&&B(k,r[3]),p&16&&Z(D,"text-red-600",r[4]),qe===(qe=mt(r))&&U?U.p(r,p):(U.d(1),U=qe(r),U&&(U.c(),U.m(w,null))),p&32&&Z(m,"startButton",!r[5]),p&32&&Z(m,"stopButton",r[5]),(!I||p&128)&&$!==($=r[7]("control.reset")+"")&&B(T,$),(!I||p&128)&&Q!==(Q=r[7]("control.room")+"")&&B(oe,Q),(!I||p&128)&&x!==(x=r[7]("control.room_url")+"")&&B(ee,x),(!I||p&2)&&B(Te,r[1]),(!I||p&128)&&we!==(we=r[7]("control.share_room_url")+"")&&B(ye,we),(!I||p&128)&&Ee!==(Ee=r[7]("control.pin")+"")&&B($e,Ee),(!I||p&1)&&B(je,r[0]),(!I||p&128)&&Ie!==(Ie=r[7]("control.controller_url")+"")&&B(Ue,Ie),(!I||p&2)&&B(ze,r[1]),(!I||p&128)&&Ne!==(Ne=r[7]("control.share_controller_url")+"")&&B(Oe,Ne)},i(r){I||(W(e),W(te.$$.fragment,r),W(le.$$.fragment,r),I=!0)},o(r){F(e),F(te.$$.fragment,r),F(le.$$.fragment,r),I=!1},d(r){r&&a(s),Y[t].d(),r&&a(_),r&&a(d),U.d(),Be(te),Be(le),it=!1,jt(dt)}}}function el(o){let s,t;return s=new Ge({props:{icon:Ht,size:"2x"}}),{c(){Pe(s.$$.fragment)},l(e){Ae(s.$$.fragment,e)},m(e,_){Ve(s,e,_),t=!0},p:ft,i(e){t||(W(s.$$.fragment,e),t=!0)},o(e){F(s.$$.fragment,e),t=!1},d(e){Be(s,e)}}}function tl(o){let s,t;return s=new Ge({props:{icon:Xt,size:"2x"}}),{c(){Pe(s.$$.fragment)},l(e){Ae(s.$$.fragment,e)},m(e,_){Ve(s,e,_),t=!0},p:ft,i(e){t||(W(s.$$.fragment,e),t=!0)},o(e){F(s.$$.fragment,e),t=!1},d(e){Be(s,e)}}}function ll(o){let s=o[7]("control.start")+"",t;return{c(){t=h(s)},l(e){t=g(e,s)},m(e,_){ve(e,t,_)},p(e,_){_&128&&s!==(s=e[7]("control.start")+"")&&B(t,s)},d(e){e&&a(t)}}}function sl(o){let s=o[7]("control.stop")+"",t;return{c(){t=h(s)},l(e){t=g(e,s)},m(e,_){ve(e,t,_)},p(e,_){_&128&&s!==(s=e[7]("control.stop")+"")&&B(t,s)},d(e){e&&a(t)}}}function ol(o){let s,t,e,_,d,b;const D=[xt,Qt],k=[];function P(u,m){return u[2]?0:1}return t=P(o),e=k[t]=D[t](o),{c(){s=n("div"),e.c(),this.h()},l(u){s=c(u,"DIV",{id:!0,class:!0});var m=i(s);e.l(m),m.forEach(a),this.h()},h(){f(s,"id","main"),f(s,"class","w-full h-full overflow-hidden svelte-qg5rdz")},m(u,m){ve(u,s,m),k[t].m(s,null),_=!0,d||(b=[se(Jt,"keydown",o[14]),se(s,"click",o[9],{once:!0})],d=!0)},p(u,[m]){let w=t;t=P(u),t===w?k[t].p(u,m):(zt(),F(k[w],1,1,()=>{k[w]=null}),$t(),e=k[t],e?e.p(u,m):(e=k[t]=D[t](u),e.c()),W(e,1),e.m(s,null))},i(u){_||(W(e),_=!0)},o(u){F(e),_=!1},d(u){u&&a(s),k[t].d(),d=!1,jt(b)}}}function rl(o,s,t){let e,_;Ut(o,Gt,v=>t(20,e=v)),Ut(o,Ft,v=>t(7,_=v));let d=e.params.roomId,b,D,k=!1,P,u,m="",w=!1,J,A,$=!1,T;Rt(()=>{Wt.set("en"),t(1,D=window.location.host),e.url.searchParams.has("pin")?t(0,b=e.url.searchParams.get("pin")):(t(0,b=sessionStorage.getItem("PIN-"+d)),b||t(0,b=prompt("Please enter the control PIN for room "+d))),b?(sessionStorage.setItem("PIN-"+d,b),z(b),T=new Audio(y+"/audio/beep.mp3")):ut(y+"/")});function he(){t(6,$=!0),T.play(),T.pause(),T.load()}function z(v){P=new WebSocket(Kt+"://"+Yt+"/"+d+"?pin="+v),P.onerror=function(E){console.log(E)},P.onmessage=function(E){if(E.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),ut(y+"/");else if(E.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),ut(y+"/");else if(E.data==="AUTHENTICATED")t(2,k=!0);else{let x=E.data.substring(0,1),ee=E.data.substring(2).includes(";")?E.data.substring(2).split(";"):[E.data.substring(2)];switch(x){case"t":t(15,u=parseInt(ee[1])),u==0?H():Q();break;case"r":t(5,J=ee[0]==="1");break}}}}function V(){J?P.send("pause"):P.send("start")}function j(){P.send("reset")}function H(){A===void 0&&(t(4,w=!0),oe(),A=setInterval(function(){t(4,w=!w)},500))}function Q(){A&&(clearInterval(A),A=void 0,t(4,w=!1))}function oe(){$&&(T.play(),setTimeout(function(){T.pause(),T.load()},2e3))}function ge(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:y+"/room/"+d})}function X(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:y+"/control/"+d})}function be(v){v.key===" "||v.key==="Enter"?(V(),v.preventDefault()):(v.key.toLowerCase()==="m"||v.key.toLowerCase()==="c"||v.key==="Backspace")&&(j(),v.preventDefault())}const ke=()=>t(6,$=!$);return o.$$.update=()=>{o.$$.dirty&32768&&u!==void 0&&t(3,m=u.toString().padStart(2,"0"))},[b,D,k,m,w,J,$,_,d,he,V,j,ge,X,be,u,ke]}class ul extends qt{constructor(s){super();Lt(this,s,rl,ol,Ct,{})}}export{ul as default};
