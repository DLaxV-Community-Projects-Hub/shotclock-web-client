import{S as et,i as tt,s as st,e as u,c as d,a as p,d as n,b as _,g as H,N as _e,o as G,p as Ye,q as J,P as lt,v as rt,n as Ze,Q as ye,R as ot,w as De,x as Ve,J as l,y as xe,K as Ue,B as je,k as T,t as b,m as A,h as g,T as Y,j as me,O as at,U as nt,V as ct}from"../../chunks/vendor-3260a9a7.js";import{w as it,s as ft,p as ut}from"../../chunks/config-bd607895.js";import{b as D}from"../../chunks/paths-b0acc198.js";import{g as Be}from"../../chunks/navigation-ecedacd4.js";function dt(r){let s,e,t,c;return t=new ye({props:{icon:ot,size:"5x",spin:!0}}),{c(){s=u("div"),e=u("div"),De(t.$$.fragment),this.h()},l(o){s=d(o,"DIV",{class:!0});var k=p(s);e=d(k,"DIV",{class:!0});var I=p(e);Ve(t.$$.fragment,I),I.forEach(n),k.forEach(n),this.h()},h(){_(e,"class","flex flex-col justify-center"),_(s,"class","h-full flex justify-center")},m(o,k){H(o,s,k),l(s,e),xe(t,e,null),c=!0},p:Ue,i(o){c||(J(t.$$.fragment,o),c=!0)},o(o){G(t.$$.fragment,o),c=!1},d(o){o&&n(s),je(t)}}}function pt(r){let s,e,t,c,o,k,I,m,P,i,f,E,V,N,w,Z,S,R,B,ee,te,O,se,F,h,C,K,he,x,oe,ve,be,ge,ke,L,Q,Ie,Ee,$,ae,Se,z,X,Ne,Pe,U,ne,we,Te,Ae,M,Re,Oe;const Ce=[mt,_t],W=[];function Le(a,v){return a[6]?0:1}e=Le(r),t=W[e]=Ce[e](r);function ze(a,v){return a[5]?vt:ht}let ce=ze(r),j=ce(r);return{c(){s=u("div"),t.c(),c=T(),o=u("div"),k=u("div"),I=u("span"),m=b(r[3]),P=T(),i=u("div"),f=u("button"),E=u("span"),j.c(),V=T(),N=u("button"),w=b("RESET"),Z=T(),S=u("div"),R=u("div"),B=u("span"),ee=b("Room"),te=T(),O=u("span"),se=b(r[7]),F=T(),h=u("div"),C=u("span"),K=b("Room URL"),he=T(),x=u("a"),oe=b(r[1]),ve=b(D),be=b("/room/"),ge=b(r[7]),ke=T(),L=u("div"),Q=u("span"),Ie=b("PIN"),Ee=T(),$=u("span"),ae=b(r[0]),Se=T(),z=u("div"),X=u("span"),Ne=b("Controller URL"),Pe=T(),U=u("a"),ne=b(r[1]),we=b(D),Te=b("/control/"),Ae=b(r[7]),this.h()},l(a){s=d(a,"DIV",{class:!0});var v=p(s);t.l(v),v.forEach(n),c=A(a),o=d(a,"DIV",{class:!0});var y=p(o);k=d(y,"DIV",{class:!0});var Me=p(k);I=d(Me,"SPAN",{class:!0});var We=p(I);m=g(We,r[3]),We.forEach(n),Me.forEach(n),P=A(y),i=d(y,"DIV",{class:!0});var ie=p(i);f=d(ie,"BUTTON",{class:!0});var qe=p(f);E=d(qe,"SPAN",{});var Fe=p(E);j.l(Fe),Fe.forEach(n),qe.forEach(n),V=A(ie),N=d(ie,"BUTTON",{class:!0});var He=p(N);w=g(He,"RESET"),He.forEach(n),ie.forEach(n),Z=A(y),S=d(y,"DIV",{class:!0});var q=p(S);R=d(q,"DIV",{class:!0});var fe=p(R);B=d(fe,"SPAN",{class:!0});var Ge=p(B);ee=g(Ge,"Room"),Ge.forEach(n),te=A(fe),O=d(fe,"SPAN",{class:!0});var Je=p(O);se=g(Je,r[7]),Je.forEach(n),fe.forEach(n),F=A(q),h=d(q,"DIV",{class:!0});var ue=p(h);C=d(ue,"SPAN",{class:!0});var Ke=p(C);K=g(Ke,"Room URL"),Ke.forEach(n),he=A(ue),x=d(ue,"A",{href:!0});var le=p(x);oe=g(le,r[1]),ve=g(le,D),be=g(le,"/room/"),ge=g(le,r[7]),le.forEach(n),ue.forEach(n),ke=A(q),L=d(q,"DIV",{class:!0});var de=p(L);Q=d(de,"SPAN",{class:!0});var Qe=p(Q);Ie=g(Qe,"PIN"),Qe.forEach(n),Ee=A(de),$=d(de,"SPAN",{class:!0});var $e=p($);ae=g($e,r[0]),$e.forEach(n),de.forEach(n),Se=A(q),z=d(q,"DIV",{class:!0});var pe=p(z);X=d(pe,"SPAN",{class:!0});var Xe=p(X);Ne=g(Xe,"Controller URL"),Xe.forEach(n),Pe=A(pe),U=d(pe,"A",{href:!0});var re=p(U);ne=g(re,r[1]),we=g(re,D),Te=g(re,"/control/"),Ae=g(re,r[7]),re.forEach(n),pe.forEach(n),q.forEach(n),y.forEach(n),this.h()},h(){_(s,"class","absolute top-3 left-3"),_(I,"class","clock svelte-1crpd5m"),Y(I,"text-red-600",r[4]),_(k,"class","flex flex-col justify-center items-center"),_(f,"class","controlButton svelte-1crpd5m"),Y(f,"startButton",!r[5]),Y(f,"stopButton",r[5]),_(N,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-1crpd5m"),_(i,"class","flex flex-row lg:flex-col justify-evenly"),_(B,"class","text-xs"),_(O,"class","text-xl"),_(R,"class","flex flex-col mb-3 mr-5"),_(C,"class","text-xs"),_(x,"href",""+(D+"/room/"+r[7])),_(h,"class","hidden lg:flex flex-col mb-3 "),_(Q,"class","text-xs"),_($,"class","text-xl"),_(L,"class","flex flex-col mb-3"),_(X,"class","text-xs"),_(U,"href",""+(D+"/control/"+r[7])),_(z,"class","hidden lg:flex flex-col mb-3"),_(S,"class","lg:text-right flex flex-row lg:flex-col m-3"),_(o,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(a,v){H(a,s,v),W[e].m(s,null),H(a,c,v),H(a,o,v),l(o,k),l(k,I),l(I,m),l(o,P),l(o,i),l(i,f),l(f,E),j.m(E,null),l(i,V),l(i,N),l(N,w),l(o,Z),l(o,S),l(S,R),l(R,B),l(B,ee),l(R,te),l(R,O),l(O,se),l(S,F),l(S,h),l(h,C),l(C,K),l(h,he),l(h,x),l(x,oe),l(x,ve),l(x,be),l(x,ge),l(S,ke),l(S,L),l(L,Q),l(Q,Ie),l(L,Ee),l(L,$),l($,ae),l(S,Se),l(S,z),l(z,X),l(X,Ne),l(z,Pe),l(z,U),l(U,ne),l(U,we),l(U,Te),l(U,Ae),M=!0,Re||(Oe=[_e(s,"click",r[12]),_e(f,"click",r[9]),_e(N,"click",r[10])],Re=!0)},p(a,v){let y=e;e=Le(a),e===y?W[e].p(a,v):(Ze(),G(W[y],1,1,()=>{W[y]=null}),Ye(),t=W[e],t?t.p(a,v):(t=W[e]=Ce[e](a),t.c()),J(t,1),t.m(s,null)),(!M||v&8)&&me(m,a[3]),v&16&&Y(I,"text-red-600",a[4]),ce!==(ce=ze(a))&&(j.d(1),j=ce(a),j&&(j.c(),j.m(E,null))),v&32&&Y(f,"startButton",!a[5]),v&32&&Y(f,"stopButton",a[5]),(!M||v&2)&&me(oe,a[1]),(!M||v&1)&&me(ae,a[0]),(!M||v&2)&&me(ne,a[1])},i(a){M||(J(t),M=!0)},o(a){G(t),M=!1},d(a){a&&n(s),W[e].d(),a&&n(c),a&&n(o),j.d(),Re=!1,at(Oe)}}}function _t(r){let s,e;return s=new ye({props:{icon:nt,size:"2x"}}),{c(){De(s.$$.fragment)},l(t){Ve(s.$$.fragment,t)},m(t,c){xe(s,t,c),e=!0},p:Ue,i(t){e||(J(s.$$.fragment,t),e=!0)},o(t){G(s.$$.fragment,t),e=!1},d(t){je(s,t)}}}function mt(r){let s,e;return s=new ye({props:{icon:ct,size:"2x"}}),{c(){De(s.$$.fragment)},l(t){Ve(s.$$.fragment,t)},m(t,c){xe(s,t,c),e=!0},p:Ue,i(t){e||(J(s.$$.fragment,t),e=!0)},o(t){G(s.$$.fragment,t),e=!1},d(t){je(s,t)}}}function ht(r){let s;return{c(){s=b("START")},l(e){s=g(e,"START")},m(e,t){H(e,s,t)},d(e){e&&n(s)}}}function vt(r){let s;return{c(){s=b("STOP")},l(e){s=g(e,"STOP")},m(e,t){H(e,s,t)},d(e){e&&n(s)}}}function bt(r){let s,e,t,c,o,k;const I=[pt,dt],m=[];function P(i,f){return i[2]?0:1}return e=P(r),t=m[e]=I[e](r),{c(){s=u("div"),t.c(),this.h()},l(i){s=d(i,"DIV",{id:!0,class:!0});var f=p(s);t.l(f),f.forEach(n),this.h()},h(){_(s,"id","main"),_(s,"class","w-screen h-screen overflow-hidden svelte-1crpd5m")},m(i,f){H(i,s,f),m[e].m(s,null),c=!0,o||(k=_e(s,"click",r[8],{once:!0}),o=!0)},p(i,[f]){let E=e;e=P(i),e===E?m[e].p(i,f):(Ze(),G(m[E],1,1,()=>{m[E]=null}),Ye(),t=m[e],t?t.p(i,f):(t=m[e]=I[e](i),t.c()),J(t,1),t.m(s,null))},i(i){c||(J(t),c=!0)},o(i){G(t),c=!1},d(i){i&&n(s),m[e].d(),o=!1,k()}}}function gt(r,s,e){let t;lt(r,ut,F=>e(16,t=F));let c=t.params.roomId,o,k,I=!1,m,P,i="",f=!1,E,V,N=!1,w;rt(()=>{e(1,k=window.location.host),t.url.searchParams.has("pin")?e(0,o=t.url.searchParams.get("pin")):(e(0,o=sessionStorage.getItem("PIN-"+c)),o||e(0,o=prompt("Please enter the control PIN for room "+c))),o?(sessionStorage.setItem("PIN-"+c,o),S(o),w=new Audio(D+"/audio/beep.mp3")):Be(D+"/")});function Z(){e(6,N=!0),w.play(),w.pause(),w.load()}function S(F){m=new WebSocket(it+"://"+ft+"/"+c+"?pin="+F),m.onerror=function(h){console.log(h)},m.onmessage=function(h){if(h.data==="ROOM_NOT_FOUND")alert("The room "+c+" does not exist"),Be(D+"/");else if(h.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+c),Be(D+"/");else if(h.data==="AUTHENTICATED")e(2,I=!0);else{let C=h.data.substring(0,1),K=h.data.substring(2).includes(";")?h.data.substring(2).split(";"):[h.data.substring(2)];switch(C){case"t":e(11,P=parseInt(K[1])),P==0?ee():te();break;case"r":e(5,E=K[0]==="1");break}}}}function R(){E?m.send("pause"):m.send("start")}function B(){m.send("reset")}function ee(){V===void 0&&(e(4,f=!0),O(),V=setInterval(function(){e(4,f=!f)},500))}function te(){V&&(clearInterval(V),V=void 0,e(4,f=!1))}function O(){N&&(w.play(),setTimeout(function(){w.pause(),w.load()},2e3))}const se=()=>e(6,N=!N);return r.$$.update=()=>{r.$$.dirty&2048&&P!==void 0&&e(3,i=P.toString().padStart(2,"0"))},[o,k,I,i,f,E,N,c,Z,R,B,P,se]}class Nt extends et{constructor(s){super();tt(this,s,gt,bt,st,{})}}export{Nt as default};
