import{S as ts,i as ss,s as ls,e as c,c as i,a as f,d as a,b as n,g as Ne,R,o as O,p as Yt,q as L,G as Zt,I as os,v as as,T as rs,n as es,w as ne,x as ce,y as ie,E as It,B as fe,k as b,t as m,m as g,h,U as F,Q as e,j as Xe}from"../../chunks/index-bcecc6c1.js";import{w as ns,s as cs,p as is}from"../../chunks/config-3ef163f3.js";import{b as A}from"../../chunks/singletons-1b661bce.js";import{L as fs,F as $e,f as Jt,a as Xt,b as us,c as ds}from"../../chunks/LoadingInfo-8a9dc84f.js";import{g as St}from"../../chunks/navigation-d1154fc1.js";const{window:ps}=rs;function _s(o){let l,t;return l=new fs({}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){O(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function ms(o){let l,t,s,d,p,y,I,v,U,_,u,S,H,T,V,Be,E,C,ue,ye,$,Ue,De,D,M,Pe,W,Re,q,Ae,Ve,G,w,N,x,B,Z,de,Ye,Ze,pe,et,tt,ee,_e,st,lt,K,Ce,ot,at,rt,nt,me,he,Q,ve,ct,it,ae,ft,j,te,be,ut,dt,ge,xe,pt,se,ke,_t,mt,J,je,ht,vt,bt,gt,we,Ee,X,Se,kt,wt,re,le,Et,Tt;const $t=[vs,hs],oe=[];function Nt(r,k){return r[7]?0:1}t=Nt(o),s=oe[t]=$t[t](o);function Bt(r,k){return r[6]?gs:bs}let ze=Bt(o),Y=ze(o);return M=new $e({props:{class:"w-full lg:hidden",icon:Jt}}),W=new $e({props:{class:"w-full hidden lg:block",icon:Jt,size:"2x"}}),ae=new $e({props:{icon:Xt,size:"lg"}}),re=new $e({props:{icon:Xt,size:"lg"}}),{c(){l=c("div"),s.c(),d=b(),p=c("div"),y=c("div"),I=c("span"),v=m(o[4]),U=b(),_=c("div"),u=c("button"),S=c("span"),Y.c(),H=b(),T=c("button"),V=m("RESET"),Be=b(),E=c("div"),C=c("button"),ue=m("-5s"),ye=b(),$=c("button"),Ue=m("-1s"),De=b(),D=c("button"),ne(M.$$.fragment),Pe=b(),ne(W.$$.fragment),Re=b(),q=c("button"),Ae=m("+1s"),Ve=b(),G=c("button"),w=m("+5s"),N=b(),x=c("div"),B=c("div"),Z=c("div"),de=c("span"),Ye=m("Room"),Ze=b(),pe=c("span"),et=m(o[8]),tt=b(),ee=c("div"),_e=c("span"),st=m("Shot clock URL"),lt=b(),K=c("a"),Ce=m(o[2]),ot=m(A),at=m("/room/"),rt=m(o[8]),nt=b(),me=c("div"),he=c("button"),Q=c("div"),ve=c("span"),ct=m("Share shot clock URL"),it=b(),ne(ae.$$.fragment),ft=b(),j=c("div"),te=c("div"),be=c("span"),ut=m("PIN"),dt=b(),ge=c("span"),xe=m(o[1]),pt=b(),se=c("div"),ke=c("span"),_t=m("Controller URL"),mt=b(),J=c("a"),je=m(o[2]),ht=m(A),vt=m("/control/"),bt=m(o[8]),gt=b(),we=c("div"),Ee=c("button"),X=c("div"),Se=c("span"),kt=m("Share Controller URL"),wt=b(),ne(re.$$.fragment),this.h()},l(r){l=i(r,"DIV",{class:!0});var k=f(l);s.l(k),k.forEach(a),d=g(r),p=i(r,"DIV",{class:!0});var P=f(p);y=i(P,"DIV",{class:!0});var yt=f(y);I=i(yt,"SPAN",{class:!0});var Ut=f(I);v=h(Ut,o[4]),Ut.forEach(a),yt.forEach(a),U=g(P),_=i(P,"DIV",{class:!0});var Fe=f(_);u=i(Fe,"BUTTON",{class:!0});var Dt=f(u);S=i(Dt,"SPAN",{title:!0});var Pt=f(S);Y.l(Pt),Pt.forEach(a),Dt.forEach(a),H=g(Fe),T=i(Fe,"BUTTON",{class:!0,title:!0});var Rt=f(T);V=h(Rt,"RESET"),Rt.forEach(a),Fe.forEach(a),Be=g(P),E=i(P,"DIV",{class:!0});var z=f(E);C=i(z,"BUTTON",{class:!0});var At=f(C);ue=h(At,"-5s"),At.forEach(a),ye=g(z),$=i(z,"BUTTON",{class:!0});var Vt=f($);Ue=h(Vt,"-1s"),Vt.forEach(a),De=g(z),D=i(z,"BUTTON",{class:!0,title:!0});var He=f(D);ce(M.$$.fragment,He),Pe=g(He),ce(W.$$.fragment,He),He.forEach(a),Re=g(z),q=i(z,"BUTTON",{class:!0});var Ot=f(q);Ae=h(Ot,"+1s"),Ot.forEach(a),Ve=g(z),G=i(z,"BUTTON",{class:!0});var Lt=f(G);w=h(Lt,"+5s"),Lt.forEach(a),z.forEach(a),N=g(P),x=i(P,"DIV",{class:!0});var Me=f(x);B=i(Me,"DIV",{class:!0});var Ie=f(B);Z=i(Ie,"DIV",{class:!0});var We=f(Z);de=i(We,"SPAN",{class:!0});var Ct=f(de);Ye=h(Ct,"Room"),Ct.forEach(a),Ze=g(We),pe=i(We,"SPAN",{class:!0});var xt=f(pe);et=h(xt,o[8]),xt.forEach(a),We.forEach(a),tt=g(Ie),ee=i(Ie,"DIV",{class:!0});var qe=f(ee);_e=i(qe,"SPAN",{class:!0});var jt=f(_e);st=h(jt,"Shot clock URL"),jt.forEach(a),lt=g(qe),K=i(qe,"A",{href:!0});var Oe=f(K);Ce=h(Oe,o[2]),ot=h(Oe,A),at=h(Oe,"/room/"),rt=h(Oe,o[8]),Oe.forEach(a),qe.forEach(a),nt=g(Ie),me=i(Ie,"DIV",{});var zt=f(me);he=i(zt,"BUTTON",{class:!0});var Ft=f(he);Q=i(Ft,"DIV",{class:!0});var Ge=f(Q);ve=i(Ge,"SPAN",{class:!0});var Ht=f(ve);ct=h(Ht,"Share shot clock URL"),Ht.forEach(a),it=g(Ge),ce(ae.$$.fragment,Ge),Ge.forEach(a),Ft.forEach(a),zt.forEach(a),Ie.forEach(a),ft=g(Me),j=i(Me,"DIV",{class:!0});var Te=f(j);te=i(Te,"DIV",{class:!0});var Ke=f(te);be=i(Ke,"SPAN",{class:!0});var Mt=f(be);ut=h(Mt,"PIN"),Mt.forEach(a),dt=g(Ke),ge=i(Ke,"SPAN",{class:!0});var Wt=f(ge);xe=h(Wt,o[1]),Wt.forEach(a),Ke.forEach(a),pt=g(Te),se=i(Te,"DIV",{class:!0});var Qe=f(se);ke=i(Qe,"SPAN",{class:!0});var qt=f(ke);_t=h(qt,"Controller URL"),qt.forEach(a),mt=g(Qe),J=i(Qe,"A",{href:!0});var Le=f(J);je=h(Le,o[2]),ht=h(Le,A),vt=h(Le,"/control/"),bt=h(Le,o[8]),Le.forEach(a),Qe.forEach(a),gt=g(Te),we=i(Te,"DIV",{});var Gt=f(we);Ee=i(Gt,"BUTTON",{class:!0});var Kt=f(Ee);X=i(Kt,"DIV",{class:!0});var Je=f(X);Se=i(Je,"SPAN",{class:!0});var Qt=f(Se);kt=h(Qt,"Share Controller URL"),Qt.forEach(a),wt=g(Je),ce(re.$$.fragment,Je),Je.forEach(a),Kt.forEach(a),Gt.forEach(a),Te.forEach(a),Me.forEach(a),P.forEach(a),this.h()},h(){n(l,"class","absolute top-3 left-3"),n(I,"class","clock svelte-d2epfp"),F(I,"text-red-600",o[5]),n(y,"class","flex flex-col justify-center items-center"),n(S,"title","Hotkeys: Spacebar, Enter"),n(u,"class","controlButton svelte-d2epfp"),F(u,"startButton",!o[6]&&o[0]>0),F(u,"stopButton",o[6]&&o[0]>0),F(u,"buttonDisabled",o[0]==0),n(T,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),n(T,"title","Hotkeys: M, C, Backspace"),n(_,"class","flex flex-row lg:flex-col justify-evenly"),n(C,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),n($,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),n(D,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),n(D,"title","Rewind to last reset"),n(q,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),n(G,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),n(E,"class","flex flex-row lg:flex-col justify-evenly"),n(de,"class","text-xs"),n(pe,"class","text-xl"),n(Z,"class","flex flex-col mb-3 mr-5 lg:mr-0"),n(_e,"class","text-xs"),n(K,"href",A+"/room/"+o[8]),n(ee,"class","hidden lg:flex flex-col mb-3"),n(ve,"class","mr-2"),n(Q,"class","flex flex-row items-center"),n(he,"class","shareButton lg:text-lg svelte-d2epfp"),F(me,"hidden",!navigator.share),n(B,"class","lg:mb-10 w-1/2 lg:w-full"),n(be,"class","text-xs"),n(ge,"class","text-xl"),n(te,"class","flex flex-col mb-3"),n(ke,"class","text-xs"),n(J,"href",A+"/control/"+o[8]),n(se,"class","hidden lg:flex flex-col mb-3"),n(Se,"class","mr-2"),n(X,"class","flex flex-row items-center"),n(Ee,"class","shareButton lg:text-lg svelte-d2epfp"),F(we,"hidden",!navigator.share),n(j,"class","w-1/2 lg:w-full"),n(x,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),n(p,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,k){Ne(r,l,k),oe[t].m(l,null),Ne(r,d,k),Ne(r,p,k),e(p,y),e(y,I),e(I,v),e(p,U),e(p,_),e(_,u),e(u,S),Y.m(S,null),e(_,H),e(_,T),e(T,V),e(p,Be),e(p,E),e(E,C),e(C,ue),e(E,ye),e(E,$),e($,Ue),e(E,De),e(E,D),ie(M,D,null),e(D,Pe),ie(W,D,null),e(E,Re),e(E,q),e(q,Ae),e(E,Ve),e(E,G),e(G,w),e(p,N),e(p,x),e(x,B),e(B,Z),e(Z,de),e(de,Ye),e(Z,Ze),e(Z,pe),e(pe,et),e(B,tt),e(B,ee),e(ee,_e),e(_e,st),e(ee,lt),e(ee,K),e(K,Ce),e(K,ot),e(K,at),e(K,rt),e(B,nt),e(B,me),e(me,he),e(he,Q),e(Q,ve),e(ve,ct),e(Q,it),ie(ae,Q,null),e(x,ft),e(x,j),e(j,te),e(te,be),e(be,ut),e(te,dt),e(te,ge),e(ge,xe),e(j,pt),e(j,se),e(se,ke),e(ke,_t),e(se,mt),e(se,J),e(J,je),e(J,ht),e(J,vt),e(J,bt),e(j,gt),e(j,we),e(we,Ee),e(Ee,X),e(X,Se),e(Se,kt),e(X,wt),ie(re,X,null),le=!0,Et||(Tt=[R(l,"click",o[17]),R(u,"click",o[10]),R(T,"click",o[11]),R(C,"click",o[18]),R($,"click",o[19]),R(D,"click",o[12]),R(q,"click",o[20]),R(G,"click",o[21]),R(Q,"click",o[14]),R(X,"click",o[15])],Et=!0)},p(r,k){let P=t;t=Nt(r),t===P?oe[t].p(r,k):(es(),O(oe[P],1,1,()=>{oe[P]=null}),Yt(),s=oe[t],s?s.p(r,k):(s=oe[t]=$t[t](r),s.c()),L(s,1),s.m(l,null)),(!le||k&16)&&Xe(v,r[4]),k&32&&F(I,"text-red-600",r[5]),ze!==(ze=Bt(r))&&(Y.d(1),Y=ze(r),Y&&(Y.c(),Y.m(S,null))),k&65&&F(u,"startButton",!r[6]&&r[0]>0),k&65&&F(u,"stopButton",r[6]&&r[0]>0),k&1&&F(u,"buttonDisabled",r[0]==0),(!le||k&4)&&Xe(Ce,r[2]),(!le||k&2)&&Xe(xe,r[1]),(!le||k&4)&&Xe(je,r[2])},i(r){le||(L(s),L(M.$$.fragment,r),L(W.$$.fragment,r),L(ae.$$.fragment,r),L(re.$$.fragment,r),le=!0)},o(r){O(s),O(M.$$.fragment,r),O(W.$$.fragment,r),O(ae.$$.fragment,r),O(re.$$.fragment,r),le=!1},d(r){r&&a(l),oe[t].d(),r&&a(d),r&&a(p),Y.d(),fe(M),fe(W),fe(ae),fe(re),Et=!1,Zt(Tt)}}}function hs(o){let l,t;return l=new $e({props:{icon:us,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){O(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function vs(o){let l,t;return l=new $e({props:{icon:ds,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){O(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function bs(o){let l;return{c(){l=m("START")},l(t){l=h(t,"START")},m(t,s){Ne(t,l,s)},d(t){t&&a(l)}}}function gs(o){let l;return{c(){l=m("STOP")},l(t){l=h(t,"STOP")},m(t,s){Ne(t,l,s)},d(t){t&&a(l)}}}function ks(o){let l,t,s,d,p,y;const I=[ms,_s],v=[];function U(_,u){return _[3]?0:1}return t=U(o),s=v[t]=I[t](o),{c(){l=c("div"),s.c(),this.h()},l(_){l=i(_,"DIV",{id:!0,class:!0});var u=f(l);s.l(u),u.forEach(a),this.h()},h(){n(l,"id","main"),n(l,"class","w-full h-full overflow-hidden svelte-d2epfp")},m(_,u){Ne(_,l,u),v[t].m(l,null),d=!0,p||(y=[R(ps,"keydown",o[16]),R(l,"click",o[9],{once:!0})],p=!0)},p(_,[u]){let S=t;t=U(_),t===S?v[t].p(_,u):(es(),O(v[S],1,1,()=>{v[S]=null}),Yt(),s=v[t],s?s.p(_,u):(s=v[t]=I[t](_),s.c()),L(s,1),s.m(l,null))},i(_){d||(L(s),d=!0)},o(_){O(s),d=!1},d(_){_&&a(l),v[t].d(),p=!1,Zt(y)}}}function ws(o,l,t){let s;os(o,is,w=>t(25,s=w));let d=s.params.roomId,p,y,I=!1,v,U,_="",u=!1,S,H,T=!1,V;as(()=>{t(2,y=window.location.host),s.url.searchParams.has("pin")?t(1,p=s.url.searchParams.get("pin")):(t(1,p=sessionStorage.getItem("PIN-"+d)),p||t(1,p=prompt("Please enter the control PIN for room "+d))),p?(sessionStorage.setItem("PIN-"+d,p),E(p),V=new Audio(A+"/audio/beep.mp3")):St(A+"/")});function Be(){t(7,T=!0),V.play(),V.pause(),V.load()}function E(w){v=new WebSocket(ns+"://"+cs+"/"+d+"?pin="+w),v.onerror=function(N){console.log(N)},v.onmessage=function(N){if(N.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),St(A+"/");else if(N.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),St(A+"/");else if(N.data==="AUTHENTICATED")t(3,I=!0);else{let x=N.data.substring(0,1),B=N.data.substring(2).includes(";")?N.data.substring(2).split(";"):[N.data.substring(2)];switch(x){case"t":t(0,U=parseInt(B[1])),U==0?Ue():De();break;case"r":t(6,S=B[0]==="1");break}}}}function C(){S?v.send("pause"):v.send("start")}function ue(){v.send("reset")}function ye(){v.send("rewind")}function $(w){v.send("updateTime;"+w)}function Ue(){H===void 0&&(t(5,u=!0),D(),H=setInterval(function(){t(5,u=!u)},500))}function De(){H&&(clearInterval(H),H=void 0,t(5,u=!1))}function D(){T&&(V.play(),setTimeout(function(){V.pause(),V.load()},2e3))}function M(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:A+"/room/"+d})}function Pe(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:A+"/control/"+d})}function W(w){w.key===" "||w.key==="Enter"?(C(),w.preventDefault()):(w.key.toLowerCase()==="m"||w.key.toLowerCase()==="c"||w.key==="Backspace")&&(ue(),w.preventDefault())}const Re=()=>t(7,T=!T),q=()=>$(-5),Ae=()=>$(-1),Ve=()=>$(1),G=()=>$(5);return o.$$.update=()=>{o.$$.dirty&1&&U!==void 0&&t(4,_=U.toString().padStart(2,"0"))},[U,p,y,I,_,u,S,T,d,Be,C,ue,ye,$,M,Pe,W,Re,q,Ae,Ve,G]}class Ns extends ts{constructor(l){super(),ss(this,l,ws,ks,ls,{})}}export{Ns as default};
