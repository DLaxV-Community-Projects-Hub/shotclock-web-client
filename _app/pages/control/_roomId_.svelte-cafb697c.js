import{S as At,i as Dt,s as Vt,e as c,c as i,a as f,d as a,b as u,g as Y,N as ue,o as C,p as Pt,q as W,P as Ut,v as xt,n as Rt,Q as ke,R as yt,w as Ee,x as Ie,J as s,y as we,K as lt,B as Se,T as Tt,k as I,t as v,m as w,h as g,U as K,j as je,O as $t,V as Bt,W as jt}from"../../chunks/vendor-98d87553.js";import{w as Ot,s as zt,p as Lt}from"../../chunks/config-b3049a44.js";import{b as P}from"../../chunks/paths-b0acc198.js";import{g as rt}from"../../chunks/navigation-ecedacd4.js";function Ct(r){let l,e,t,d;return t=new ke({props:{icon:yt,size:"5x",spin:!0}}),{c(){l=c("div"),e=c("div"),Ee(t.$$.fragment),this.h()},l(n){l=i(n,"DIV",{class:!0});var m=f(l);e=i(m,"DIV",{class:!0});var k=f(e);Ie(t.$$.fragment,k),k.forEach(a),m.forEach(a),this.h()},h(){u(e,"class","flex flex-col justify-center"),u(l,"class","h-full flex justify-center")},m(n,m){Y(n,l,m),s(l,e),we(t,e,null),d=!0},p:lt,i(n){d||(W(t.$$.fragment,n),d=!0)},o(n){C(t.$$.fragment,n),d=!1},d(n){n&&a(l),Se(t)}}}function Wt(r){let l,e,t,d,n,m,k,h,R,p,_,S,$,N,D,de,V,T,U,M,pe,_e,q,me,he,A,E,ve,Z,B,Ne,Oe,ze,Le,Ce,ee,te,j,se,We,Me,Q,qe,x,F,le,Fe,He,re,Pe,Ge,H,ae,Je,Ke,O,Re,Qe,Xe,Ye,Ze,oe,ne,z,ce,et,tt,X,G,st,at;const ot=[qt,Mt],J=[];function nt(o,b){return o[6]?0:1}e=nt(r),t=J[e]=ot[e](r);function ct(o,b){return o[5]?Ht:Ft}let Te=ct(r),L=Te(r);return Q=new ke({props:{icon:Tt,size:"lg"}}),X=new ke({props:{icon:Tt,size:"lg"}}),{c(){l=c("div"),t.c(),d=I(),n=c("div"),m=c("div"),k=c("span"),h=v(r[3]),R=I(),p=c("div"),_=c("button"),S=c("span"),L.c(),$=I(),N=c("button"),D=v("RESET"),de=I(),V=c("div"),T=c("div"),U=c("div"),M=c("span"),pe=v("Room"),_e=I(),q=c("span"),me=v(r[7]),he=I(),A=c("div"),E=c("span"),ve=v("Room URL"),Z=I(),B=c("a"),Ne=v(r[1]),Oe=v(P),ze=v("/room/"),Le=v(r[7]),Ce=I(),ee=c("div"),te=c("button"),j=c("div"),se=c("span"),We=v("Share Room URL"),Me=I(),Ee(Q.$$.fragment),qe=I(),x=c("div"),F=c("div"),le=c("span"),Fe=v("PIN"),He=I(),re=c("span"),Pe=v(r[0]),Ge=I(),H=c("div"),ae=c("span"),Je=v("Controller URL"),Ke=I(),O=c("a"),Re=v(r[1]),Qe=v(P),Xe=v("/control/"),Ye=v(r[7]),Ze=I(),oe=c("div"),ne=c("button"),z=c("div"),ce=c("span"),et=v("Share Control URL"),tt=I(),Ee(X.$$.fragment),this.h()},l(o){l=i(o,"DIV",{class:!0});var b=f(l);t.l(b),b.forEach(a),d=w(o),n=i(o,"DIV",{class:!0});var y=f(n);m=i(y,"DIV",{class:!0});var it=f(m);k=i(it,"SPAN",{class:!0});var ft=f(k);h=g(ft,r[3]),ft.forEach(a),it.forEach(a),R=w(y),p=i(y,"DIV",{class:!0});var Ae=f(p);_=i(Ae,"BUTTON",{class:!0});var ut=f(_);S=i(ut,"SPAN",{});var dt=f(S);L.l(dt),dt.forEach(a),ut.forEach(a),$=w(Ae),N=i(Ae,"BUTTON",{class:!0});var pt=f(N);D=g(pt,"RESET"),pt.forEach(a),Ae.forEach(a),de=w(y),V=i(y,"DIV",{class:!0});var De=f(V);T=i(De,"DIV",{class:!0});var ie=f(T);U=i(ie,"DIV",{class:!0});var Ve=f(U);M=i(Ve,"SPAN",{class:!0});var _t=f(M);pe=g(_t,"Room"),_t.forEach(a),_e=w(Ve),q=i(Ve,"SPAN",{class:!0});var mt=f(q);me=g(mt,r[7]),mt.forEach(a),Ve.forEach(a),he=w(ie),A=i(ie,"DIV",{class:!0});var Ue=f(A);E=i(Ue,"SPAN",{class:!0});var ht=f(E);ve=g(ht,"Room URL"),ht.forEach(a),Z=w(Ue),B=i(Ue,"A",{href:!0});var ge=f(B);Ne=g(ge,r[1]),Oe=g(ge,P),ze=g(ge,"/room/"),Le=g(ge,r[7]),ge.forEach(a),Ue.forEach(a),Ce=w(ie),ee=i(ie,"DIV",{});var vt=f(ee);te=i(vt,"BUTTON",{class:!0});var gt=f(te);j=i(gt,"DIV",{class:!0});var xe=f(j);se=i(xe,"SPAN",{class:!0});var bt=f(se);We=g(bt,"Share Room URL"),bt.forEach(a),Me=w(xe),Ie(Q.$$.fragment,xe),xe.forEach(a),gt.forEach(a),vt.forEach(a),ie.forEach(a),qe=w(De),x=i(De,"DIV",{class:!0});var fe=f(x);F=i(fe,"DIV",{class:!0});var ye=f(F);le=i(ye,"SPAN",{class:!0});var kt=f(le);Fe=g(kt,"PIN"),kt.forEach(a),He=w(ye),re=i(ye,"SPAN",{class:!0});var Et=f(re);Pe=g(Et,r[0]),Et.forEach(a),ye.forEach(a),Ge=w(fe),H=i(fe,"DIV",{class:!0});var $e=f(H);ae=i($e,"SPAN",{class:!0});var It=f(ae);Je=g(It,"Controller URL"),It.forEach(a),Ke=w($e),O=i($e,"A",{href:!0});var be=f(O);Re=g(be,r[1]),Qe=g(be,P),Xe=g(be,"/control/"),Ye=g(be,r[7]),be.forEach(a),$e.forEach(a),Ze=w(fe),oe=i(fe,"DIV",{});var wt=f(oe);ne=i(wt,"BUTTON",{class:!0});var St=f(ne);z=i(St,"DIV",{class:!0});var Be=f(z);ce=i(Be,"SPAN",{class:!0});var Nt=f(ce);et=g(Nt,"Share Control URL"),Nt.forEach(a),tt=w(Be),Ie(X.$$.fragment,Be),Be.forEach(a),St.forEach(a),wt.forEach(a),fe.forEach(a),De.forEach(a),y.forEach(a),this.h()},h(){u(l,"class","absolute top-3 left-3"),u(k,"class","clock svelte-dw7uz6"),K(k,"text-red-600",r[4]),u(m,"class","flex flex-col justify-center items-center"),u(_,"class","controlButton svelte-dw7uz6"),K(_,"startButton",!r[5]),K(_,"stopButton",r[5]),u(N,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-dw7uz6"),u(p,"class","flex flex-row lg:flex-col justify-evenly"),u(M,"class","text-xs"),u(q,"class","text-xl"),u(U,"class","flex flex-col mb-3 mr-5 lg:mr-0"),u(E,"class","text-xs"),u(B,"href",""+(P+"/room/"+r[7])),u(A,"class","hidden lg:flex flex-col mb-3"),u(se,"class","mr-2"),u(j,"class","flex flex-row items-center"),u(te,"class","shareButton lg:text-lg svelte-dw7uz6"),K(ee,"hidden",navigator.share),u(T,"class","lg:mb-10 w-1/2 lg:w-full"),u(le,"class","text-xs"),u(re,"class","text-xl"),u(F,"class","flex flex-col mb-3"),u(ae,"class","text-xs"),u(O,"href",""+(P+"/control/"+r[7])),u(H,"class","hidden lg:flex flex-col mb-3"),u(ce,"class","mr-2"),u(z,"class","flex flex-row items-center"),u(ne,"class","shareButton lg:text-lg svelte-dw7uz6"),K(oe,"hidden",!navigator.share),u(x,"class","w-1/2 lg:w-full"),u(V,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),u(n,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(o,b){Y(o,l,b),J[e].m(l,null),Y(o,d,b),Y(o,n,b),s(n,m),s(m,k),s(k,h),s(n,R),s(n,p),s(p,_),s(_,S),L.m(S,null),s(p,$),s(p,N),s(N,D),s(n,de),s(n,V),s(V,T),s(T,U),s(U,M),s(M,pe),s(U,_e),s(U,q),s(q,me),s(T,he),s(T,A),s(A,E),s(E,ve),s(A,Z),s(A,B),s(B,Ne),s(B,Oe),s(B,ze),s(B,Le),s(T,Ce),s(T,ee),s(ee,te),s(te,j),s(j,se),s(se,We),s(j,Me),we(Q,j,null),s(V,qe),s(V,x),s(x,F),s(F,le),s(le,Fe),s(F,He),s(F,re),s(re,Pe),s(x,Ge),s(x,H),s(H,ae),s(ae,Je),s(H,Ke),s(H,O),s(O,Re),s(O,Qe),s(O,Xe),s(O,Ye),s(x,Ze),s(x,oe),s(oe,ne),s(ne,z),s(z,ce),s(ce,et),s(z,tt),we(X,z,null),G=!0,st||(at=[ue(l,"click",r[14]),ue(_,"click",r[9]),ue(N,"click",r[10]),ue(j,"click",r[11]),ue(z,"click",r[12])],st=!0)},p(o,b){let y=e;e=nt(o),e===y?J[e].p(o,b):(Rt(),C(J[y],1,1,()=>{J[y]=null}),Pt(),t=J[e],t?t.p(o,b):(t=J[e]=ot[e](o),t.c()),W(t,1),t.m(l,null)),(!G||b&8)&&je(h,o[3]),b&16&&K(k,"text-red-600",o[4]),Te!==(Te=ct(o))&&(L.d(1),L=Te(o),L&&(L.c(),L.m(S,null))),b&32&&K(_,"startButton",!o[5]),b&32&&K(_,"stopButton",o[5]),(!G||b&2)&&je(Ne,o[1]),(!G||b&1)&&je(Pe,o[0]),(!G||b&2)&&je(Re,o[1])},i(o){G||(W(t),W(Q.$$.fragment,o),W(X.$$.fragment,o),G=!0)},o(o){C(t),C(Q.$$.fragment,o),C(X.$$.fragment,o),G=!1},d(o){o&&a(l),J[e].d(),o&&a(d),o&&a(n),L.d(),Se(Q),Se(X),st=!1,$t(at)}}}function Mt(r){let l,e;return l=new ke({props:{icon:Bt,size:"2x"}}),{c(){Ee(l.$$.fragment)},l(t){Ie(l.$$.fragment,t)},m(t,d){we(l,t,d),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){C(l.$$.fragment,t),e=!1},d(t){Se(l,t)}}}function qt(r){let l,e;return l=new ke({props:{icon:jt,size:"2x"}}),{c(){Ee(l.$$.fragment)},l(t){Ie(l.$$.fragment,t)},m(t,d){we(l,t,d),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){C(l.$$.fragment,t),e=!1},d(t){Se(l,t)}}}function Ft(r){let l;return{c(){l=v("START")},l(e){l=g(e,"START")},m(e,t){Y(e,l,t)},d(e){e&&a(l)}}}function Ht(r){let l;return{c(){l=v("STOP")},l(e){l=g(e,"STOP")},m(e,t){Y(e,l,t)},d(e){e&&a(l)}}}function Gt(r){let l,e,t,d,n,m;const k=[Wt,Ct],h=[];function R(p,_){return p[2]?0:1}return e=R(r),t=h[e]=k[e](r),{c(){l=c("div"),t.c(),this.h()},l(p){l=i(p,"DIV",{id:!0,class:!0});var _=f(l);t.l(_),_.forEach(a),this.h()},h(){u(l,"id","main"),u(l,"class","w-full h-full overflow-hidden svelte-dw7uz6")},m(p,_){Y(p,l,_),h[e].m(l,null),d=!0,n||(m=ue(l,"click",r[8],{once:!0}),n=!0)},p(p,[_]){let S=e;e=R(p),e===S?h[e].p(p,_):(Rt(),C(h[S],1,1,()=>{h[S]=null}),Pt(),t=h[e],t?t.p(p,_):(t=h[e]=k[e](p),t.c()),W(t,1),t.m(l,null))},i(p){d||(W(t),d=!0)},o(p){C(t),d=!1},d(p){p&&a(l),h[e].d(),n=!1,m()}}}function Jt(r,l,e){let t;Ut(r,Lt,A=>e(18,t=A));let d=t.params.roomId,n,m,k=!1,h,R,p="",_=!1,S,$,N=!1,D;xt(()=>{e(1,m=window.location.host),t.url.searchParams.has("pin")?e(0,n=t.url.searchParams.get("pin")):(e(0,n=sessionStorage.getItem("PIN-"+d)),n||e(0,n=prompt("Please enter the control PIN for room "+d))),n?(sessionStorage.setItem("PIN-"+d,n),V(n),D=new Audio(P+"/audio/beep.mp3")):rt(P+"/")});function de(){e(6,N=!0),D.play(),D.pause(),D.load()}function V(A){h=new WebSocket(Ot+"://"+zt+"/"+d+"?pin="+A),h.onerror=function(E){console.log(E)},h.onmessage=function(E){if(E.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),rt(P+"/");else if(E.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),rt(P+"/");else if(E.data==="AUTHENTICATED")e(2,k=!0);else{let ve=E.data.substring(0,1),Z=E.data.substring(2).includes(";")?E.data.substring(2).split(";"):[E.data.substring(2)];switch(ve){case"t":e(13,R=parseInt(Z[1])),R==0?M():pe();break;case"r":e(5,S=Z[0]==="1");break}}}}function T(){S?h.send("pause"):h.send("start")}function U(){h.send("reset")}function M(){$===void 0&&(e(4,_=!0),_e(),$=setInterval(function(){e(4,_=!_)},500))}function pe(){$&&(clearInterval($),$=void 0,e(4,_=!1))}function _e(){N&&(D.play(),setTimeout(function(){D.pause(),D.load()},2e3))}function q(){console.log(m+P+"/room/"+d),navigator.share&&navigator.share({title:"Shot Clock room "+d,url:m+P+"/room/"+d})}function me(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:m+P+"/control/"+d})}const he=()=>e(6,N=!N);return r.$$.update=()=>{r.$$.dirty&8192&&R!==void 0&&e(3,p=R.toString().padStart(2,"0"))},[n,m,k,p,_,S,N,d,de,T,U,q,me,R,he]}class Zt extends At{constructor(l){super();Dt(this,l,Jt,Gt,Vt,{})}}export{Zt as default};
