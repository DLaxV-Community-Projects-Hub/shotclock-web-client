import{S as ts,i as ss,s as ls,e as n,c,a as i,d as a,b as f,g as $e,X as R,o as L,p as Yt,q as O,Y as Jt,F as os,v as as,a1 as rs,n as Qt,w as ne,x as ce,y as ie,L as St,B as fe,P as Ne,a2 as Zt,a3 as es,k as b,t as h,m as g,h as m,a4 as F,R as e,j as Je,a5 as ns,a6 as cs}from"../../chunks/vendor-9018bcf9.js";import{p as is,w as fs,s as us}from"../../chunks/config-e6462f7e.js";import{b as A}from"../../chunks/paths-b0acc198.js";import{L as ds}from"../../chunks/LoadingInfo-4a044bd9.js";import{g as It}from"../../chunks/navigation-ecedacd4.js";const{window:ps}=rs;function _s(o){let l,t;return l=new ds({}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:St,i(s){t||(O(l.$$.fragment,s),t=!0)},o(s){L(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function hs(o){let l,t,s,d,p,P,S,v,D,_,u,I,M,T,V,Be,E,j,ue,Pe,$,De,Ue,U,W,ye,q,Re,H,Ae,Ve,G,w,N,x,B,Z,de,Qe,Ze,pe,et,tt,ee,_e,st,lt,K,je,ot,at,rt,nt,he,me,X,ve,ct,it,ae,ft,C,te,be,ut,dt,ge,xe,pt,se,ke,_t,ht,Y,Ce,mt,vt,bt,gt,we,Ee,J,Se,kt,wt,re,le,Et,Tt;const $t=[vs,ms],oe=[];function Nt(r,k){return r[7]?0:1}t=Nt(o),s=oe[t]=$t[t](o);function Bt(r,k){return r[6]?gs:bs}let ze=Bt(o),Q=ze(o);return W=new Ne({props:{class:"w-full lg:hidden",icon:Zt}}),q=new Ne({props:{class:"w-full hidden lg:block",icon:Zt,size:"2x"}}),ae=new Ne({props:{icon:es,size:"lg"}}),re=new Ne({props:{icon:es,size:"lg"}}),{c(){l=n("div"),s.c(),d=b(),p=n("div"),P=n("div"),S=n("span"),v=h(o[4]),D=b(),_=n("div"),u=n("button"),I=n("span"),Q.c(),M=b(),T=n("button"),V=h("RESET"),Be=b(),E=n("div"),j=n("button"),ue=h("-5s"),Pe=b(),$=n("button"),De=h("-1s"),Ue=b(),U=n("button"),ne(W.$$.fragment),ye=b(),ne(q.$$.fragment),Re=b(),H=n("button"),Ae=h("+1s"),Ve=b(),G=n("button"),w=h("+5s"),N=b(),x=n("div"),B=n("div"),Z=n("div"),de=n("span"),Qe=h("Room"),Ze=b(),pe=n("span"),et=h(o[8]),tt=b(),ee=n("div"),_e=n("span"),st=h("Shot clock URL"),lt=b(),K=n("a"),je=h(o[2]),ot=h(A),at=h("/room/"),rt=h(o[8]),nt=b(),he=n("div"),me=n("button"),X=n("div"),ve=n("span"),ct=h("Share shot clock URL"),it=b(),ne(ae.$$.fragment),ft=b(),C=n("div"),te=n("div"),be=n("span"),ut=h("PIN"),dt=b(),ge=n("span"),xe=h(o[1]),pt=b(),se=n("div"),ke=n("span"),_t=h("Controller URL"),ht=b(),Y=n("a"),Ce=h(o[2]),mt=h(A),vt=h("/control/"),bt=h(o[8]),gt=b(),we=n("div"),Ee=n("button"),J=n("div"),Se=n("span"),kt=h("Share Controller URL"),wt=b(),ne(re.$$.fragment),this.h()},l(r){l=c(r,"DIV",{class:!0});var k=i(l);s.l(k),k.forEach(a),d=g(r),p=c(r,"DIV",{class:!0});var y=i(p);P=c(y,"DIV",{class:!0});var Pt=i(P);S=c(Pt,"SPAN",{class:!0});var Dt=i(S);v=m(Dt,o[4]),Dt.forEach(a),Pt.forEach(a),D=g(y),_=c(y,"DIV",{class:!0});var Fe=i(_);u=c(Fe,"BUTTON",{class:!0});var Ut=i(u);I=c(Ut,"SPAN",{});var yt=i(I);Q.l(yt),yt.forEach(a),Ut.forEach(a),M=g(Fe),T=c(Fe,"BUTTON",{class:!0});var Rt=i(T);V=m(Rt,"RESET"),Rt.forEach(a),Fe.forEach(a),Be=g(y),E=c(y,"DIV",{class:!0});var z=i(E);j=c(z,"BUTTON",{class:!0});var At=i(j);ue=m(At,"-5s"),At.forEach(a),Pe=g(z),$=c(z,"BUTTON",{class:!0});var Vt=i($);De=m(Vt,"-1s"),Vt.forEach(a),Ue=g(z),U=c(z,"BUTTON",{class:!0,title:!0});var Me=i(U);ce(W.$$.fragment,Me),ye=g(Me),ce(q.$$.fragment,Me),Me.forEach(a),Re=g(z),H=c(z,"BUTTON",{class:!0});var Lt=i(H);Ae=m(Lt,"+1s"),Lt.forEach(a),Ve=g(z),G=c(z,"BUTTON",{class:!0});var Ot=i(G);w=m(Ot,"+5s"),Ot.forEach(a),z.forEach(a),N=g(y),x=c(y,"DIV",{class:!0});var We=i(x);B=c(We,"DIV",{class:!0});var Ie=i(B);Z=c(Ie,"DIV",{class:!0});var qe=i(Z);de=c(qe,"SPAN",{class:!0});var jt=i(de);Qe=m(jt,"Room"),jt.forEach(a),Ze=g(qe),pe=c(qe,"SPAN",{class:!0});var xt=i(pe);et=m(xt,o[8]),xt.forEach(a),qe.forEach(a),tt=g(Ie),ee=c(Ie,"DIV",{class:!0});var He=i(ee);_e=c(He,"SPAN",{class:!0});var Ct=i(_e);st=m(Ct,"Shot clock URL"),Ct.forEach(a),lt=g(He),K=c(He,"A",{href:!0});var Le=i(K);je=m(Le,o[2]),ot=m(Le,A),at=m(Le,"/room/"),rt=m(Le,o[8]),Le.forEach(a),He.forEach(a),nt=g(Ie),he=c(Ie,"DIV",{});var zt=i(he);me=c(zt,"BUTTON",{class:!0});var Ft=i(me);X=c(Ft,"DIV",{class:!0});var Ge=i(X);ve=c(Ge,"SPAN",{class:!0});var Mt=i(ve);ct=m(Mt,"Share shot clock URL"),Mt.forEach(a),it=g(Ge),ce(ae.$$.fragment,Ge),Ge.forEach(a),Ft.forEach(a),zt.forEach(a),Ie.forEach(a),ft=g(We),C=c(We,"DIV",{class:!0});var Te=i(C);te=c(Te,"DIV",{class:!0});var Ke=i(te);be=c(Ke,"SPAN",{class:!0});var Wt=i(be);ut=m(Wt,"PIN"),Wt.forEach(a),dt=g(Ke),ge=c(Ke,"SPAN",{class:!0});var qt=i(ge);xe=m(qt,o[1]),qt.forEach(a),Ke.forEach(a),pt=g(Te),se=c(Te,"DIV",{class:!0});var Xe=i(se);ke=c(Xe,"SPAN",{class:!0});var Ht=i(ke);_t=m(Ht,"Controller URL"),Ht.forEach(a),ht=g(Xe),Y=c(Xe,"A",{href:!0});var Oe=i(Y);Ce=m(Oe,o[2]),mt=m(Oe,A),vt=m(Oe,"/control/"),bt=m(Oe,o[8]),Oe.forEach(a),Xe.forEach(a),gt=g(Te),we=c(Te,"DIV",{});var Gt=i(we);Ee=c(Gt,"BUTTON",{class:!0});var Kt=i(Ee);J=c(Kt,"DIV",{class:!0});var Ye=i(J);Se=c(Ye,"SPAN",{class:!0});var Xt=i(Se);kt=m(Xt,"Share Controller URL"),Xt.forEach(a),wt=g(Ye),ce(re.$$.fragment,Ye),Ye.forEach(a),Kt.forEach(a),Gt.forEach(a),Te.forEach(a),We.forEach(a),y.forEach(a),this.h()},h(){f(l,"class","absolute top-3 left-3"),f(S,"class","clock svelte-d2epfp"),F(S,"text-red-600",o[5]),f(P,"class","flex flex-col justify-center items-center"),f(u,"class","controlButton svelte-d2epfp"),F(u,"startButton",!o[6]&&o[0]>0),F(u,"stopButton",o[6]&&o[0]>0),F(u,"buttonDisabled",o[0]==0),f(T,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(_,"class","flex flex-row lg:flex-col justify-evenly"),f(j,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f($,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(U,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(U,"title","Rewind to last reset"),f(H,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(G,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(E,"class","flex flex-row lg:flex-col justify-evenly"),f(de,"class","text-xs"),f(pe,"class","text-xl"),f(Z,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(_e,"class","text-xs"),f(K,"href",""+(A+"/room/"+o[8])),f(ee,"class","hidden lg:flex flex-col mb-3"),f(ve,"class","mr-2"),f(X,"class","flex flex-row items-center"),f(me,"class","shareButton lg:text-lg svelte-d2epfp"),F(he,"hidden",!navigator.share),f(B,"class","lg:mb-10 w-1/2 lg:w-full"),f(be,"class","text-xs"),f(ge,"class","text-xl"),f(te,"class","flex flex-col mb-3"),f(ke,"class","text-xs"),f(Y,"href",""+(A+"/control/"+o[8])),f(se,"class","hidden lg:flex flex-col mb-3"),f(Se,"class","mr-2"),f(J,"class","flex flex-row items-center"),f(Ee,"class","shareButton lg:text-lg svelte-d2epfp"),F(we,"hidden",!navigator.share),f(C,"class","w-1/2 lg:w-full"),f(x,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(p,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,k){$e(r,l,k),oe[t].m(l,null),$e(r,d,k),$e(r,p,k),e(p,P),e(P,S),e(S,v),e(p,D),e(p,_),e(_,u),e(u,I),Q.m(I,null),e(_,M),e(_,T),e(T,V),e(p,Be),e(p,E),e(E,j),e(j,ue),e(E,Pe),e(E,$),e($,De),e(E,Ue),e(E,U),ie(W,U,null),e(U,ye),ie(q,U,null),e(E,Re),e(E,H),e(H,Ae),e(E,Ve),e(E,G),e(G,w),e(p,N),e(p,x),e(x,B),e(B,Z),e(Z,de),e(de,Qe),e(Z,Ze),e(Z,pe),e(pe,et),e(B,tt),e(B,ee),e(ee,_e),e(_e,st),e(ee,lt),e(ee,K),e(K,je),e(K,ot),e(K,at),e(K,rt),e(B,nt),e(B,he),e(he,me),e(me,X),e(X,ve),e(ve,ct),e(X,it),ie(ae,X,null),e(x,ft),e(x,C),e(C,te),e(te,be),e(be,ut),e(te,dt),e(te,ge),e(ge,xe),e(C,pt),e(C,se),e(se,ke),e(ke,_t),e(se,ht),e(se,Y),e(Y,Ce),e(Y,mt),e(Y,vt),e(Y,bt),e(C,gt),e(C,we),e(we,Ee),e(Ee,J),e(J,Se),e(Se,kt),e(J,wt),ie(re,J,null),le=!0,Et||(Tt=[R(l,"click",o[17]),R(u,"click",o[10]),R(T,"click",o[11]),R(j,"click",o[18]),R($,"click",o[19]),R(U,"click",o[12]),R(H,"click",o[20]),R(G,"click",o[21]),R(X,"click",o[14]),R(J,"click",o[15])],Et=!0)},p(r,k){let y=t;t=Nt(r),t===y?oe[t].p(r,k):(Qt(),L(oe[y],1,1,()=>{oe[y]=null}),Yt(),s=oe[t],s?s.p(r,k):(s=oe[t]=$t[t](r),s.c()),O(s,1),s.m(l,null)),(!le||k&16)&&Je(v,r[4]),k&32&&F(S,"text-red-600",r[5]),ze!==(ze=Bt(r))&&(Q.d(1),Q=ze(r),Q&&(Q.c(),Q.m(I,null))),k&65&&F(u,"startButton",!r[6]&&r[0]>0),k&65&&F(u,"stopButton",r[6]&&r[0]>0),k&1&&F(u,"buttonDisabled",r[0]==0),(!le||k&4)&&Je(je,r[2]),(!le||k&2)&&Je(xe,r[1]),(!le||k&4)&&Je(Ce,r[2])},i(r){le||(O(s),O(W.$$.fragment,r),O(q.$$.fragment,r),O(ae.$$.fragment,r),O(re.$$.fragment,r),le=!0)},o(r){L(s),L(W.$$.fragment,r),L(q.$$.fragment,r),L(ae.$$.fragment,r),L(re.$$.fragment,r),le=!1},d(r){r&&a(l),oe[t].d(),r&&a(d),r&&a(p),Q.d(),fe(W),fe(q),fe(ae),fe(re),Et=!1,Jt(Tt)}}}function ms(o){let l,t;return l=new Ne({props:{icon:ns,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:St,i(s){t||(O(l.$$.fragment,s),t=!0)},o(s){L(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function vs(o){let l,t;return l=new Ne({props:{icon:cs,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:St,i(s){t||(O(l.$$.fragment,s),t=!0)},o(s){L(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function bs(o){let l;return{c(){l=h("START")},l(t){l=m(t,"START")},m(t,s){$e(t,l,s)},d(t){t&&a(l)}}}function gs(o){let l;return{c(){l=h("STOP")},l(t){l=m(t,"STOP")},m(t,s){$e(t,l,s)},d(t){t&&a(l)}}}function ks(o){let l,t,s,d,p,P;const S=[hs,_s],v=[];function D(_,u){return _[3]?0:1}return t=D(o),s=v[t]=S[t](o),{c(){l=n("div"),s.c(),this.h()},l(_){l=c(_,"DIV",{id:!0,class:!0});var u=i(l);s.l(u),u.forEach(a),this.h()},h(){f(l,"id","main"),f(l,"class","w-full h-full overflow-hidden svelte-d2epfp")},m(_,u){$e(_,l,u),v[t].m(l,null),d=!0,p||(P=[R(ps,"keydown",o[16]),R(l,"click",o[9],{once:!0})],p=!0)},p(_,[u]){let I=t;t=D(_),t===I?v[t].p(_,u):(Qt(),L(v[I],1,1,()=>{v[I]=null}),Yt(),s=v[t],s?s.p(_,u):(s=v[t]=S[t](_),s.c()),O(s,1),s.m(l,null))},i(_){d||(O(s),d=!0)},o(_){L(s),d=!1},d(_){_&&a(l),v[t].d(),p=!1,Jt(P)}}}function ws(o,l,t){let s;os(o,is,w=>t(25,s=w));let d=s.params.roomId,p,P,S=!1,v,D,_="",u=!1,I,M,T=!1,V;as(()=>{t(2,P=window.location.host),s.url.searchParams.has("pin")?t(1,p=s.url.searchParams.get("pin")):(t(1,p=sessionStorage.getItem("PIN-"+d)),p||t(1,p=prompt("Please enter the control PIN for room "+d))),p?(sessionStorage.setItem("PIN-"+d,p),E(p),V=new Audio(A+"/audio/beep.mp3")):It(A+"/")});function Be(){t(7,T=!0),V.play(),V.pause(),V.load()}function E(w){v=new WebSocket(fs+"://"+us+"/"+d+"?pin="+w),v.onerror=function(N){console.log(N)},v.onmessage=function(N){if(N.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),It(A+"/");else if(N.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),It(A+"/");else if(N.data==="AUTHENTICATED")t(3,S=!0);else{let x=N.data.substring(0,1),B=N.data.substring(2).includes(";")?N.data.substring(2).split(";"):[N.data.substring(2)];switch(x){case"t":t(0,D=parseInt(B[1])),D==0?De():Ue();break;case"r":t(6,I=B[0]==="1");break}}}}function j(){I?v.send("pause"):v.send("start")}function ue(){v.send("reset")}function Pe(){v.send("rewind")}function $(w){v.send("updateTime;"+w)}function De(){M===void 0&&(t(5,u=!0),U(),M=setInterval(function(){t(5,u=!u)},500))}function Ue(){M&&(clearInterval(M),M=void 0,t(5,u=!1))}function U(){T&&(V.play(),setTimeout(function(){V.pause(),V.load()},2e3))}function W(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:A+"/room/"+d})}function ye(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:A+"/control/"+d})}function q(w){w.key===" "||w.key==="Enter"?(j(),w.preventDefault()):(w.key.toLowerCase()==="m"||w.key.toLowerCase()==="c"||w.key==="Backspace")&&(ue(),w.preventDefault())}const Re=()=>t(7,T=!T),H=()=>$(-5),Ae=()=>$(-1),Ve=()=>$(1),G=()=>$(5);return o.$$.update=()=>{o.$$.dirty&1&&D!==void 0&&t(4,_=D.toString().padStart(2,"0"))},[D,p,P,S,_,u,I,T,d,Be,j,ue,Pe,$,W,ye,q,Re,H,Ae,Ve,G]}class Ns extends ts{constructor(l){super();ss(this,l,ws,ks,ls,{})}}export{Ns as default};
