import{S as yt,i as At,s as Ut,e as n,c as i,a as c,d as r,b as f,g as ue,X as Z,o as M,p as Pt,q as W,Y as Rt,F as Vt,v as $t,a1 as Bt,n as Dt,w as ke,x as we,y as Ee,L as lt,B as Ie,P as Le,a2 as Tt,k,t as h,m as w,h as v,a3 as j,R as s,j as je,a4 as Lt,a5 as jt}from"../../chunks/vendor-6d995ebd.js";import{p as Ct,w as Ot,s as xt}from"../../chunks/config-49fddc90.js";import{b as y}from"../../chunks/paths-b0acc198.js";import{L as zt}from"../../chunks/LoadingInfo-636a75e3.js";import{g as ot}from"../../chunks/navigation-ecedacd4.js";const{window:Ft}=Bt;function Mt(o){let l,e;return l=new zt({}),{c(){ke(l.$$.fragment)},l(t){we(l.$$.fragment,t)},m(t,d){Ee(l,t,d),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){M(l.$$.fragment,t),e=!1},d(t){Ie(l,t)}}}function Wt(o){let l,e,t,d,m,R,E,_,D,p,u,I,C,S,A,de,V,N,U,q,pe,me,H,_e,he,$,b,P,ve,T,Se,Ce,Oe,xe,ze,ee,te,O,se,Fe,Me,J,We,B,G,le,qe,He,oe,Ne,Ge,K,ae,Ke,Xe,x,Pe,Ye,Je,Qe,Ze,re,ne,z,ie,et,tt,Q,X,st,at;const rt=[Ht,qt],Y=[];function nt(a,g){return a[7]?0:1}e=nt(o),t=Y[e]=rt[e](o);function it(a,g){return a[6]?Kt:Gt}let Re=it(o),F=Re(o);return J=new Le({props:{icon:Tt,size:"lg"}}),Q=new Le({props:{icon:Tt,size:"lg"}}),{c(){l=n("div"),t.c(),d=k(),m=n("div"),R=n("div"),E=n("span"),_=h(o[4]),D=k(),p=n("div"),u=n("button"),I=n("span"),F.c(),C=k(),S=n("button"),A=h("RESET"),de=k(),V=n("div"),N=n("div"),U=n("div"),q=n("span"),pe=h("Room"),me=k(),H=n("span"),_e=h(o[8]),he=k(),$=n("div"),b=n("span"),P=h("Room URL"),ve=k(),T=n("a"),Se=h(o[2]),Ce=h(y),Oe=h("/room/"),xe=h(o[8]),ze=k(),ee=n("div"),te=n("button"),O=n("div"),se=n("span"),Fe=h("Share Room URL"),Me=k(),ke(J.$$.fragment),We=k(),B=n("div"),G=n("div"),le=n("span"),qe=h("PIN"),He=k(),oe=n("span"),Ne=h(o[1]),Ge=k(),K=n("div"),ae=n("span"),Ke=h("Controller URL"),Xe=k(),x=n("a"),Pe=h(o[2]),Ye=h(y),Je=h("/control/"),Qe=h(o[8]),Ze=k(),re=n("div"),ne=n("button"),z=n("div"),ie=n("span"),et=h("Share Controller URL"),tt=k(),ke(Q.$$.fragment),this.h()},l(a){l=i(a,"DIV",{class:!0});var g=c(l);t.l(g),g.forEach(r),d=w(a),m=i(a,"DIV",{class:!0});var L=c(m);R=i(L,"DIV",{class:!0});var ct=c(R);E=i(ct,"SPAN",{class:!0});var ft=c(E);_=v(ft,o[4]),ft.forEach(r),ct.forEach(r),D=w(L),p=i(L,"DIV",{class:!0});var De=c(p);u=i(De,"BUTTON",{class:!0});var ut=c(u);I=i(ut,"SPAN",{});var dt=c(I);F.l(dt),dt.forEach(r),ut.forEach(r),C=w(De),S=i(De,"BUTTON",{class:!0});var pt=c(S);A=v(pt,"RESET"),pt.forEach(r),De.forEach(r),de=w(L),V=i(L,"DIV",{class:!0});var Te=c(V);N=i(Te,"DIV",{class:!0});var ce=c(N);U=i(ce,"DIV",{class:!0});var ye=c(U);q=i(ye,"SPAN",{class:!0});var mt=c(q);pe=v(mt,"Room"),mt.forEach(r),me=w(ye),H=i(ye,"SPAN",{class:!0});var _t=c(H);_e=v(_t,o[8]),_t.forEach(r),ye.forEach(r),he=w(ce),$=i(ce,"DIV",{class:!0});var Ae=c($);b=i(Ae,"SPAN",{class:!0});var ht=c(b);P=v(ht,"Room URL"),ht.forEach(r),ve=w(Ae),T=i(Ae,"A",{href:!0});var ge=c(T);Se=v(ge,o[2]),Ce=v(ge,y),Oe=v(ge,"/room/"),xe=v(ge,o[8]),ge.forEach(r),Ae.forEach(r),ze=w(ce),ee=i(ce,"DIV",{});var vt=c(ee);te=i(vt,"BUTTON",{class:!0});var gt=c(te);O=i(gt,"DIV",{class:!0});var Ue=c(O);se=i(Ue,"SPAN",{class:!0});var bt=c(se);Fe=v(bt,"Share Room URL"),bt.forEach(r),Me=w(Ue),we(J.$$.fragment,Ue),Ue.forEach(r),gt.forEach(r),vt.forEach(r),ce.forEach(r),We=w(Te),B=i(Te,"DIV",{class:!0});var fe=c(B);G=i(fe,"DIV",{class:!0});var Ve=c(G);le=i(Ve,"SPAN",{class:!0});var kt=c(le);qe=v(kt,"PIN"),kt.forEach(r),He=w(Ve),oe=i(Ve,"SPAN",{class:!0});var wt=c(oe);Ne=v(wt,o[1]),wt.forEach(r),Ve.forEach(r),Ge=w(fe),K=i(fe,"DIV",{class:!0});var $e=c(K);ae=i($e,"SPAN",{class:!0});var Et=c(ae);Ke=v(Et,"Controller URL"),Et.forEach(r),Xe=w($e),x=i($e,"A",{href:!0});var be=c(x);Pe=v(be,o[2]),Ye=v(be,y),Je=v(be,"/control/"),Qe=v(be,o[8]),be.forEach(r),$e.forEach(r),Ze=w(fe),re=i(fe,"DIV",{});var It=c(re);ne=i(It,"BUTTON",{class:!0});var St=c(ne);z=i(St,"DIV",{class:!0});var Be=c(z);ie=i(Be,"SPAN",{class:!0});var Nt=c(ie);et=v(Nt,"Share Controller URL"),Nt.forEach(r),tt=w(Be),we(Q.$$.fragment,Be),Be.forEach(r),St.forEach(r),It.forEach(r),fe.forEach(r),Te.forEach(r),L.forEach(r),this.h()},h(){f(l,"class","absolute top-3 left-3"),f(E,"class","clock svelte-5w9otn"),j(E,"text-red-600",o[5]),f(R,"class","flex flex-col justify-center items-center"),f(u,"class","controlButton svelte-5w9otn"),j(u,"startButton",!o[6]&&o[0]>0),j(u,"stopButton",o[6]&&o[0]>0),j(u,"buttonDisabled",o[0]==0),f(S,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-5w9otn"),f(p,"class","flex flex-row lg:flex-col justify-evenly"),f(q,"class","text-xs"),f(H,"class","text-xl"),f(U,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(b,"class","text-xs"),f(T,"href",""+(y+"/room/"+o[8])),f($,"class","hidden lg:flex flex-col mb-3"),f(se,"class","mr-2"),f(O,"class","flex flex-row items-center"),f(te,"class","shareButton lg:text-lg svelte-5w9otn"),j(ee,"hidden",!navigator.share),f(N,"class","lg:mb-10 w-1/2 lg:w-full"),f(le,"class","text-xs"),f(oe,"class","text-xl"),f(G,"class","flex flex-col mb-3"),f(ae,"class","text-xs"),f(x,"href",""+(y+"/control/"+o[8])),f(K,"class","hidden lg:flex flex-col mb-3"),f(ie,"class","mr-2"),f(z,"class","flex flex-row items-center"),f(ne,"class","shareButton lg:text-lg svelte-5w9otn"),j(re,"hidden",!navigator.share),f(B,"class","w-1/2 lg:w-full"),f(V,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(m,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(a,g){ue(a,l,g),Y[e].m(l,null),ue(a,d,g),ue(a,m,g),s(m,R),s(R,E),s(E,_),s(m,D),s(m,p),s(p,u),s(u,I),F.m(I,null),s(p,C),s(p,S),s(S,A),s(m,de),s(m,V),s(V,N),s(N,U),s(U,q),s(q,pe),s(U,me),s(U,H),s(H,_e),s(N,he),s(N,$),s($,b),s(b,P),s($,ve),s($,T),s(T,Se),s(T,Ce),s(T,Oe),s(T,xe),s(N,ze),s(N,ee),s(ee,te),s(te,O),s(O,se),s(se,Fe),s(O,Me),Ee(J,O,null),s(V,We),s(V,B),s(B,G),s(G,le),s(le,qe),s(G,He),s(G,oe),s(oe,Ne),s(B,Ge),s(B,K),s(K,ae),s(ae,Ke),s(K,Xe),s(K,x),s(x,Pe),s(x,Ye),s(x,Je),s(x,Qe),s(B,Ze),s(B,re),s(re,ne),s(ne,z),s(z,ie),s(ie,et),s(z,tt),Ee(Q,z,null),X=!0,st||(at=[Z(l,"click",o[15]),Z(u,"click",o[10]),Z(S,"click",o[11]),Z(O,"click",o[12]),Z(z,"click",o[13])],st=!0)},p(a,g){let L=e;e=nt(a),e===L?Y[e].p(a,g):(Dt(),M(Y[L],1,1,()=>{Y[L]=null}),Pt(),t=Y[e],t?t.p(a,g):(t=Y[e]=rt[e](a),t.c()),W(t,1),t.m(l,null)),(!X||g&16)&&je(_,a[4]),g&32&&j(E,"text-red-600",a[5]),Re!==(Re=it(a))&&(F.d(1),F=Re(a),F&&(F.c(),F.m(I,null))),g&65&&j(u,"startButton",!a[6]&&a[0]>0),g&65&&j(u,"stopButton",a[6]&&a[0]>0),g&1&&j(u,"buttonDisabled",a[0]==0),(!X||g&4)&&je(Se,a[2]),(!X||g&2)&&je(Ne,a[1]),(!X||g&4)&&je(Pe,a[2])},i(a){X||(W(t),W(J.$$.fragment,a),W(Q.$$.fragment,a),X=!0)},o(a){M(t),M(J.$$.fragment,a),M(Q.$$.fragment,a),X=!1},d(a){a&&r(l),Y[e].d(),a&&r(d),a&&r(m),F.d(),Ie(J),Ie(Q),st=!1,Rt(at)}}}function qt(o){let l,e;return l=new Le({props:{icon:Lt,size:"2x"}}),{c(){ke(l.$$.fragment)},l(t){we(l.$$.fragment,t)},m(t,d){Ee(l,t,d),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){M(l.$$.fragment,t),e=!1},d(t){Ie(l,t)}}}function Ht(o){let l,e;return l=new Le({props:{icon:jt,size:"2x"}}),{c(){ke(l.$$.fragment)},l(t){we(l.$$.fragment,t)},m(t,d){Ee(l,t,d),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){M(l.$$.fragment,t),e=!1},d(t){Ie(l,t)}}}function Gt(o){let l;return{c(){l=h("START")},l(e){l=v(e,"START")},m(e,t){ue(e,l,t)},d(e){e&&r(l)}}}function Kt(o){let l;return{c(){l=h("STOP")},l(e){l=v(e,"STOP")},m(e,t){ue(e,l,t)},d(e){e&&r(l)}}}function Xt(o){let l,e,t,d,m,R;const E=[Wt,Mt],_=[];function D(p,u){return p[3]?0:1}return e=D(o),t=_[e]=E[e](o),{c(){l=n("div"),t.c(),this.h()},l(p){l=i(p,"DIV",{id:!0,class:!0});var u=c(l);t.l(u),u.forEach(r),this.h()},h(){f(l,"id","main"),f(l,"class","w-full h-full overflow-hidden svelte-5w9otn")},m(p,u){ue(p,l,u),_[e].m(l,null),d=!0,m||(R=[Z(Ft,"keydown",o[14]),Z(l,"click",o[9],{once:!0})],m=!0)},p(p,[u]){let I=e;e=D(p),e===I?_[e].p(p,u):(Dt(),M(_[I],1,1,()=>{_[I]=null}),Pt(),t=_[e],t?t.p(p,u):(t=_[e]=E[e](p),t.c()),W(t,1),t.m(l,null))},i(p){d||(W(t),d=!0)},o(p){M(t),d=!1},d(p){p&&r(l),_[e].d(),m=!1,Rt(R)}}}function Yt(o,l,e){let t;Vt(o,Ct,b=>e(19,t=b));let d=t.params.roomId,m,R,E=!1,_,D,p="",u=!1,I,C,S=!1,A;$t(()=>{e(2,R=window.location.host),t.url.searchParams.has("pin")?e(1,m=t.url.searchParams.get("pin")):(e(1,m=sessionStorage.getItem("PIN-"+d)),m||e(1,m=prompt("Please enter the control PIN for room "+d))),m?(sessionStorage.setItem("PIN-"+d,m),V(m),A=new Audio(y+"/audio/beep.mp3")):ot(y+"/")});function de(){e(7,S=!0),A.play(),A.pause(),A.load()}function V(b){_=new WebSocket(Ot+"://"+xt+"/"+d+"?pin="+b),_.onerror=function(P){console.log(P)},_.onmessage=function(P){if(P.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),ot(y+"/");else if(P.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),ot(y+"/");else if(P.data==="AUTHENTICATED")e(3,E=!0);else{let ve=P.data.substring(0,1),T=P.data.substring(2).includes(";")?P.data.substring(2).split(";"):[P.data.substring(2)];switch(ve){case"t":e(0,D=parseInt(T[1])),D==0?q():pe();break;case"r":e(6,I=T[0]==="1");break}}}}function N(){I?_.send("pause"):_.send("start")}function U(){_.send("reset")}function q(){C===void 0&&(e(5,u=!0),me(),C=setInterval(function(){e(5,u=!u)},500))}function pe(){C&&(clearInterval(C),C=void 0,e(5,u=!1))}function me(){S&&(A.play(),setTimeout(function(){A.pause(),A.load()},2e3))}function H(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:y+"/room/"+d})}function _e(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:y+"/control/"+d})}function he(b){b.key===" "||b.key==="Enter"?(N(),b.preventDefault()):(b.key.toLowerCase()==="m"||b.key.toLowerCase()==="c"||b.key==="Backspace")&&(U(),b.preventDefault())}const $=()=>e(7,S=!S);return o.$$.update=()=>{o.$$.dirty&1&&D!==void 0&&e(4,p=D.toString().padStart(2,"0"))},[D,m,R,E,p,u,I,S,d,de,N,U,H,_e,he,$]}class ss extends yt{constructor(l){super();At(this,l,Yt,Xt,Ut,{})}}export{ss as default};
