import{S as ts,i as ss,s as ls,e as n,c,a as i,d as a,b as f,g as $e,X as y,o as L,p as Yt,q as O,Y as Jt,F as os,v as as,a1 as rs,n as Qt,w as ne,x as ce,y as ie,L as It,B as fe,P as Ne,a2 as Zt,a3 as es,k as b,t as _,m as g,h,a4 as F,R as e,j as Je,a5 as ns,a6 as cs}from"../../chunks/vendor-9018bcf9.js";import{p as is,w as fs,s as us}from"../../chunks/config-e6462f7e.js";import{b as A}from"../../chunks/paths-b0acc198.js";import{L as ds}from"../../chunks/LoadingInfo-4a044bd9.js";import{g as St}from"../../chunks/navigation-ecedacd4.js";const{window:ps}=rs;function ms(o){let l,t;return l=new ds({}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(O(l.$$.fragment,s),t=!0)},o(s){L(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function _s(o){let l,t,s,d,p,R,I,v,P,m,u,S,M,T,V,Be,E,j,ue,Re,$,Pe,De,D,W,Ue,q,ye,H,Ae,Ve,G,w,N,x,B,Z,de,Qe,Ze,pe,et,tt,ee,me,st,lt,K,je,ot,at,rt,nt,_e,he,X,ve,ct,it,ae,ft,C,te,be,ut,dt,ge,xe,pt,se,ke,mt,_t,Y,Ce,ht,vt,bt,gt,we,Ee,J,Ie,kt,wt,re,le,Et,Tt;const $t=[vs,hs],oe=[];function Nt(r,k){return r[7]?0:1}t=Nt(o),s=oe[t]=$t[t](o);function Bt(r,k){return r[6]?gs:bs}let ze=Bt(o),Q=ze(o);return W=new Ne({props:{class:"w-full lg:hidden",icon:Zt}}),q=new Ne({props:{class:"w-full hidden lg:block",icon:Zt,size:"2x"}}),ae=new Ne({props:{icon:es,size:"lg"}}),re=new Ne({props:{icon:es,size:"lg"}}),{c(){l=n("div"),s.c(),d=b(),p=n("div"),R=n("div"),I=n("span"),v=_(o[4]),P=b(),m=n("div"),u=n("button"),S=n("span"),Q.c(),M=b(),T=n("button"),V=_("RESET"),Be=b(),E=n("div"),j=n("button"),ue=_("-5s"),Re=b(),$=n("button"),Pe=_("-1s"),De=b(),D=n("button"),ne(W.$$.fragment),Ue=b(),ne(q.$$.fragment),ye=b(),H=n("button"),Ae=_("+1s"),Ve=b(),G=n("button"),w=_("+5s"),N=b(),x=n("div"),B=n("div"),Z=n("div"),de=n("span"),Qe=_("Room"),Ze=b(),pe=n("span"),et=_(o[8]),tt=b(),ee=n("div"),me=n("span"),st=_("Room URL"),lt=b(),K=n("a"),je=_(o[2]),ot=_(A),at=_("/room/"),rt=_(o[8]),nt=b(),_e=n("div"),he=n("button"),X=n("div"),ve=n("span"),ct=_("Share Room URL"),it=b(),ne(ae.$$.fragment),ft=b(),C=n("div"),te=n("div"),be=n("span"),ut=_("PIN"),dt=b(),ge=n("span"),xe=_(o[1]),pt=b(),se=n("div"),ke=n("span"),mt=_("Controller URL"),_t=b(),Y=n("a"),Ce=_(o[2]),ht=_(A),vt=_("/control/"),bt=_(o[8]),gt=b(),we=n("div"),Ee=n("button"),J=n("div"),Ie=n("span"),kt=_("Share Controller URL"),wt=b(),ne(re.$$.fragment),this.h()},l(r){l=c(r,"DIV",{class:!0});var k=i(l);s.l(k),k.forEach(a),d=g(r),p=c(r,"DIV",{class:!0});var U=i(p);R=c(U,"DIV",{class:!0});var Rt=i(R);I=c(Rt,"SPAN",{class:!0});var Pt=i(I);v=h(Pt,o[4]),Pt.forEach(a),Rt.forEach(a),P=g(U),m=c(U,"DIV",{class:!0});var Fe=i(m);u=c(Fe,"BUTTON",{class:!0});var Dt=i(u);S=c(Dt,"SPAN",{});var Ut=i(S);Q.l(Ut),Ut.forEach(a),Dt.forEach(a),M=g(Fe),T=c(Fe,"BUTTON",{class:!0});var yt=i(T);V=h(yt,"RESET"),yt.forEach(a),Fe.forEach(a),Be=g(U),E=c(U,"DIV",{class:!0});var z=i(E);j=c(z,"BUTTON",{class:!0});var At=i(j);ue=h(At,"-5s"),At.forEach(a),Re=g(z),$=c(z,"BUTTON",{class:!0});var Vt=i($);Pe=h(Vt,"-1s"),Vt.forEach(a),De=g(z),D=c(z,"BUTTON",{class:!0,title:!0});var Me=i(D);ce(W.$$.fragment,Me),Ue=g(Me),ce(q.$$.fragment,Me),Me.forEach(a),ye=g(z),H=c(z,"BUTTON",{class:!0});var Lt=i(H);Ae=h(Lt,"+1s"),Lt.forEach(a),Ve=g(z),G=c(z,"BUTTON",{class:!0});var Ot=i(G);w=h(Ot,"+5s"),Ot.forEach(a),z.forEach(a),N=g(U),x=c(U,"DIV",{class:!0});var We=i(x);B=c(We,"DIV",{class:!0});var Se=i(B);Z=c(Se,"DIV",{class:!0});var qe=i(Z);de=c(qe,"SPAN",{class:!0});var jt=i(de);Qe=h(jt,"Room"),jt.forEach(a),Ze=g(qe),pe=c(qe,"SPAN",{class:!0});var xt=i(pe);et=h(xt,o[8]),xt.forEach(a),qe.forEach(a),tt=g(Se),ee=c(Se,"DIV",{class:!0});var He=i(ee);me=c(He,"SPAN",{class:!0});var Ct=i(me);st=h(Ct,"Room URL"),Ct.forEach(a),lt=g(He),K=c(He,"A",{href:!0});var Le=i(K);je=h(Le,o[2]),ot=h(Le,A),at=h(Le,"/room/"),rt=h(Le,o[8]),Le.forEach(a),He.forEach(a),nt=g(Se),_e=c(Se,"DIV",{});var zt=i(_e);he=c(zt,"BUTTON",{class:!0});var Ft=i(he);X=c(Ft,"DIV",{class:!0});var Ge=i(X);ve=c(Ge,"SPAN",{class:!0});var Mt=i(ve);ct=h(Mt,"Share Room URL"),Mt.forEach(a),it=g(Ge),ce(ae.$$.fragment,Ge),Ge.forEach(a),Ft.forEach(a),zt.forEach(a),Se.forEach(a),ft=g(We),C=c(We,"DIV",{class:!0});var Te=i(C);te=c(Te,"DIV",{class:!0});var Ke=i(te);be=c(Ke,"SPAN",{class:!0});var Wt=i(be);ut=h(Wt,"PIN"),Wt.forEach(a),dt=g(Ke),ge=c(Ke,"SPAN",{class:!0});var qt=i(ge);xe=h(qt,o[1]),qt.forEach(a),Ke.forEach(a),pt=g(Te),se=c(Te,"DIV",{class:!0});var Xe=i(se);ke=c(Xe,"SPAN",{class:!0});var Ht=i(ke);mt=h(Ht,"Controller URL"),Ht.forEach(a),_t=g(Xe),Y=c(Xe,"A",{href:!0});var Oe=i(Y);Ce=h(Oe,o[2]),ht=h(Oe,A),vt=h(Oe,"/control/"),bt=h(Oe,o[8]),Oe.forEach(a),Xe.forEach(a),gt=g(Te),we=c(Te,"DIV",{});var Gt=i(we);Ee=c(Gt,"BUTTON",{class:!0});var Kt=i(Ee);J=c(Kt,"DIV",{class:!0});var Ye=i(J);Ie=c(Ye,"SPAN",{class:!0});var Xt=i(Ie);kt=h(Xt,"Share Controller URL"),Xt.forEach(a),wt=g(Ye),ce(re.$$.fragment,Ye),Ye.forEach(a),Kt.forEach(a),Gt.forEach(a),Te.forEach(a),We.forEach(a),U.forEach(a),this.h()},h(){f(l,"class","absolute top-3 left-3"),f(I,"class","clock svelte-d2epfp"),F(I,"text-red-600",o[5]),f(R,"class","flex flex-col justify-center items-center"),f(u,"class","controlButton svelte-d2epfp"),F(u,"startButton",!o[6]&&o[0]>0),F(u,"stopButton",o[6]&&o[0]>0),F(u,"buttonDisabled",o[0]==0),f(T,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(m,"class","flex flex-row lg:flex-col justify-evenly"),f(j,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f($,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(D,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(D,"title","Rewind to last reset"),f(H,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(G,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(E,"class","flex flex-row lg:flex-col justify-evenly"),f(de,"class","text-xs"),f(pe,"class","text-xl"),f(Z,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(me,"class","text-xs"),f(K,"href",""+(A+"/room/"+o[8])),f(ee,"class","hidden lg:flex flex-col mb-3"),f(ve,"class","mr-2"),f(X,"class","flex flex-row items-center"),f(he,"class","shareButton lg:text-lg svelte-d2epfp"),F(_e,"hidden",!navigator.share),f(B,"class","lg:mb-10 w-1/2 lg:w-full"),f(be,"class","text-xs"),f(ge,"class","text-xl"),f(te,"class","flex flex-col mb-3"),f(ke,"class","text-xs"),f(Y,"href",""+(A+"/control/"+o[8])),f(se,"class","hidden lg:flex flex-col mb-3"),f(Ie,"class","mr-2"),f(J,"class","flex flex-row items-center"),f(Ee,"class","shareButton lg:text-lg svelte-d2epfp"),F(we,"hidden",!navigator.share),f(C,"class","w-1/2 lg:w-full"),f(x,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(p,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,k){$e(r,l,k),oe[t].m(l,null),$e(r,d,k),$e(r,p,k),e(p,R),e(R,I),e(I,v),e(p,P),e(p,m),e(m,u),e(u,S),Q.m(S,null),e(m,M),e(m,T),e(T,V),e(p,Be),e(p,E),e(E,j),e(j,ue),e(E,Re),e(E,$),e($,Pe),e(E,De),e(E,D),ie(W,D,null),e(D,Ue),ie(q,D,null),e(E,ye),e(E,H),e(H,Ae),e(E,Ve),e(E,G),e(G,w),e(p,N),e(p,x),e(x,B),e(B,Z),e(Z,de),e(de,Qe),e(Z,Ze),e(Z,pe),e(pe,et),e(B,tt),e(B,ee),e(ee,me),e(me,st),e(ee,lt),e(ee,K),e(K,je),e(K,ot),e(K,at),e(K,rt),e(B,nt),e(B,_e),e(_e,he),e(he,X),e(X,ve),e(ve,ct),e(X,it),ie(ae,X,null),e(x,ft),e(x,C),e(C,te),e(te,be),e(be,ut),e(te,dt),e(te,ge),e(ge,xe),e(C,pt),e(C,se),e(se,ke),e(ke,mt),e(se,_t),e(se,Y),e(Y,Ce),e(Y,ht),e(Y,vt),e(Y,bt),e(C,gt),e(C,we),e(we,Ee),e(Ee,J),e(J,Ie),e(Ie,kt),e(J,wt),ie(re,J,null),le=!0,Et||(Tt=[y(l,"click",o[17]),y(u,"click",o[10]),y(T,"click",o[11]),y(j,"click",o[18]),y($,"click",o[19]),y(D,"click",o[12]),y(H,"click",o[20]),y(G,"click",o[21]),y(X,"click",o[14]),y(J,"click",o[15])],Et=!0)},p(r,k){let U=t;t=Nt(r),t===U?oe[t].p(r,k):(Qt(),L(oe[U],1,1,()=>{oe[U]=null}),Yt(),s=oe[t],s?s.p(r,k):(s=oe[t]=$t[t](r),s.c()),O(s,1),s.m(l,null)),(!le||k&16)&&Je(v,r[4]),k&32&&F(I,"text-red-600",r[5]),ze!==(ze=Bt(r))&&(Q.d(1),Q=ze(r),Q&&(Q.c(),Q.m(S,null))),k&65&&F(u,"startButton",!r[6]&&r[0]>0),k&65&&F(u,"stopButton",r[6]&&r[0]>0),k&1&&F(u,"buttonDisabled",r[0]==0),(!le||k&4)&&Je(je,r[2]),(!le||k&2)&&Je(xe,r[1]),(!le||k&4)&&Je(Ce,r[2])},i(r){le||(O(s),O(W.$$.fragment,r),O(q.$$.fragment,r),O(ae.$$.fragment,r),O(re.$$.fragment,r),le=!0)},o(r){L(s),L(W.$$.fragment,r),L(q.$$.fragment,r),L(ae.$$.fragment,r),L(re.$$.fragment,r),le=!1},d(r){r&&a(l),oe[t].d(),r&&a(d),r&&a(p),Q.d(),fe(W),fe(q),fe(ae),fe(re),Et=!1,Jt(Tt)}}}function hs(o){let l,t;return l=new Ne({props:{icon:ns,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(O(l.$$.fragment,s),t=!0)},o(s){L(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function vs(o){let l,t;return l=new Ne({props:{icon:cs,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(O(l.$$.fragment,s),t=!0)},o(s){L(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function bs(o){let l;return{c(){l=_("START")},l(t){l=h(t,"START")},m(t,s){$e(t,l,s)},d(t){t&&a(l)}}}function gs(o){let l;return{c(){l=_("STOP")},l(t){l=h(t,"STOP")},m(t,s){$e(t,l,s)},d(t){t&&a(l)}}}function ks(o){let l,t,s,d,p,R;const I=[_s,ms],v=[];function P(m,u){return m[3]?0:1}return t=P(o),s=v[t]=I[t](o),{c(){l=n("div"),s.c(),this.h()},l(m){l=c(m,"DIV",{id:!0,class:!0});var u=i(l);s.l(u),u.forEach(a),this.h()},h(){f(l,"id","main"),f(l,"class","w-full h-full overflow-hidden svelte-d2epfp")},m(m,u){$e(m,l,u),v[t].m(l,null),d=!0,p||(R=[y(ps,"keydown",o[16]),y(l,"click",o[9],{once:!0})],p=!0)},p(m,[u]){let S=t;t=P(m),t===S?v[t].p(m,u):(Qt(),L(v[S],1,1,()=>{v[S]=null}),Yt(),s=v[t],s?s.p(m,u):(s=v[t]=I[t](m),s.c()),O(s,1),s.m(l,null))},i(m){d||(O(s),d=!0)},o(m){L(s),d=!1},d(m){m&&a(l),v[t].d(),p=!1,Jt(R)}}}function ws(o,l,t){let s;os(o,is,w=>t(25,s=w));let d=s.params.roomId,p,R,I=!1,v,P,m="",u=!1,S,M,T=!1,V;as(()=>{t(2,R=window.location.host),s.url.searchParams.has("pin")?t(1,p=s.url.searchParams.get("pin")):(t(1,p=sessionStorage.getItem("PIN-"+d)),p||t(1,p=prompt("Please enter the control PIN for room "+d))),p?(sessionStorage.setItem("PIN-"+d,p),E(p),V=new Audio(A+"/audio/beep.mp3")):St(A+"/")});function Be(){t(7,T=!0),V.play(),V.pause(),V.load()}function E(w){v=new WebSocket(fs+"://"+us+"/"+d+"?pin="+w),v.onerror=function(N){console.log(N)},v.onmessage=function(N){if(N.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),St(A+"/");else if(N.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),St(A+"/");else if(N.data==="AUTHENTICATED")t(3,I=!0);else{let x=N.data.substring(0,1),B=N.data.substring(2).includes(";")?N.data.substring(2).split(";"):[N.data.substring(2)];switch(x){case"t":t(0,P=parseInt(B[1])),P==0?Pe():De();break;case"r":t(6,S=B[0]==="1");break}}}}function j(){S?v.send("pause"):v.send("start")}function ue(){v.send("reset")}function Re(){v.send("rewind")}function $(w){v.send("updateTime;"+w)}function Pe(){M===void 0&&(t(5,u=!0),D(),M=setInterval(function(){t(5,u=!u)},500))}function De(){M&&(clearInterval(M),M=void 0,t(5,u=!1))}function D(){T&&(V.play(),setTimeout(function(){V.pause(),V.load()},2e3))}function W(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:A+"/room/"+d})}function Ue(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:A+"/control/"+d})}function q(w){w.key===" "||w.key==="Enter"?(j(),w.preventDefault()):(w.key.toLowerCase()==="m"||w.key.toLowerCase()==="c"||w.key==="Backspace")&&(ue(),w.preventDefault())}const ye=()=>t(7,T=!T),H=()=>$(-5),Ae=()=>$(-1),Ve=()=>$(1),G=()=>$(5);return o.$$.update=()=>{o.$$.dirty&1&&P!==void 0&&t(4,m=P.toString().padStart(2,"0"))},[P,p,R,I,m,u,S,T,d,Be,j,ue,Re,$,W,Ue,q,ye,H,Ae,Ve,G]}class Ns extends ts{constructor(l){super();ss(this,l,ws,ks,ls,{})}}export{Ns as default};
