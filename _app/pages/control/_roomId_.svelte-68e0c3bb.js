import{S as At,i as Dt,s as Ut,e as n,c,a as i,d as r,b as f,g as ue,V as Z,o as q,p as Pt,q as W,W as Rt,F as Vt,v as $t,_ as Bt,n as Tt,w as ke,x as Ee,y as we,L as lt,B as Ie,N as Le,a0 as yt,k,t as h,m as E,h as v,a1 as Q,P as s,j as xe,a2 as Lt,a3 as xt}from"../../chunks/vendor-c63f3d7b.js";import{p as jt,w as Ct,s as Ot}from"../../chunks/config-7bff5de6.js";import{b as A}from"../../chunks/paths-b0acc198.js";import{L as zt}from"../../chunks/LoadingInfo-d206336c.js";import{g as at}from"../../chunks/navigation-ecedacd4.js";const{window:qt}=Bt;function Wt(a){let l,e;return l=new zt({}),{c(){ke(l.$$.fragment)},l(t){Ee(l.$$.fragment,t)},m(t,u){we(l,t,u),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){q(l.$$.fragment,t),e=!1},d(t){Ie(l,t)}}}function Ft(a){let l,e,t,u,m,R,w,_,T,d,p,I,x,S,D,de,V,N,U,F,pe,me,M,_e,he,$,g,P,ve,y,Se,je,Ce,Oe,ze,ee,te,j,se,qe,We,X,Fe,B,H,le,Me,He,ae,Ne,Ge,G,re,Ke,Je,C,Pe,Qe,Xe,Ye,Ze,oe,ne,O,ce,et,tt,Y,K,st,rt;const ot=[Ht,Mt],J=[];function nt(o,b){return o[6]?0:1}e=nt(a),t=J[e]=ot[e](a);function ct(o,b){return o[5]?Kt:Gt}let Re=ct(a),z=Re(a);return X=new Le({props:{icon:yt,size:"lg"}}),Y=new Le({props:{icon:yt,size:"lg"}}),{c(){l=n("div"),t.c(),u=k(),m=n("div"),R=n("div"),w=n("span"),_=h(a[3]),T=k(),d=n("div"),p=n("button"),I=n("span"),z.c(),x=k(),S=n("button"),D=h("RESET"),de=k(),V=n("div"),N=n("div"),U=n("div"),F=n("span"),pe=h("Room"),me=k(),M=n("span"),_e=h(a[7]),he=k(),$=n("div"),g=n("span"),P=h("Room URL"),ve=k(),y=n("a"),Se=h(a[1]),je=h(A),Ce=h("/room/"),Oe=h(a[7]),ze=k(),ee=n("div"),te=n("button"),j=n("div"),se=n("span"),qe=h("Share Room URL"),We=k(),ke(X.$$.fragment),Fe=k(),B=n("div"),H=n("div"),le=n("span"),Me=h("PIN"),He=k(),ae=n("span"),Ne=h(a[0]),Ge=k(),G=n("div"),re=n("span"),Ke=h("Controller URL"),Je=k(),C=n("a"),Pe=h(a[1]),Qe=h(A),Xe=h("/control/"),Ye=h(a[7]),Ze=k(),oe=n("div"),ne=n("button"),O=n("div"),ce=n("span"),et=h("Share Controller URL"),tt=k(),ke(Y.$$.fragment),this.h()},l(o){l=c(o,"DIV",{class:!0});var b=i(l);t.l(b),b.forEach(r),u=E(o),m=c(o,"DIV",{class:!0});var L=i(m);R=c(L,"DIV",{class:!0});var it=i(R);w=c(it,"SPAN",{class:!0});var ft=i(w);_=v(ft,a[3]),ft.forEach(r),it.forEach(r),T=E(L),d=c(L,"DIV",{class:!0});var Te=i(d);p=c(Te,"BUTTON",{class:!0});var ut=i(p);I=c(ut,"SPAN",{});var dt=i(I);z.l(dt),dt.forEach(r),ut.forEach(r),x=E(Te),S=c(Te,"BUTTON",{class:!0});var pt=i(S);D=v(pt,"RESET"),pt.forEach(r),Te.forEach(r),de=E(L),V=c(L,"DIV",{class:!0});var ye=i(V);N=c(ye,"DIV",{class:!0});var ie=i(N);U=c(ie,"DIV",{class:!0});var Ae=i(U);F=c(Ae,"SPAN",{class:!0});var mt=i(F);pe=v(mt,"Room"),mt.forEach(r),me=E(Ae),M=c(Ae,"SPAN",{class:!0});var _t=i(M);_e=v(_t,a[7]),_t.forEach(r),Ae.forEach(r),he=E(ie),$=c(ie,"DIV",{class:!0});var De=i($);g=c(De,"SPAN",{class:!0});var ht=i(g);P=v(ht,"Room URL"),ht.forEach(r),ve=E(De),y=c(De,"A",{href:!0});var ge=i(y);Se=v(ge,a[1]),je=v(ge,A),Ce=v(ge,"/room/"),Oe=v(ge,a[7]),ge.forEach(r),De.forEach(r),ze=E(ie),ee=c(ie,"DIV",{});var vt=i(ee);te=c(vt,"BUTTON",{class:!0});var gt=i(te);j=c(gt,"DIV",{class:!0});var Ue=i(j);se=c(Ue,"SPAN",{class:!0});var bt=i(se);qe=v(bt,"Share Room URL"),bt.forEach(r),We=E(Ue),Ee(X.$$.fragment,Ue),Ue.forEach(r),gt.forEach(r),vt.forEach(r),ie.forEach(r),Fe=E(ye),B=c(ye,"DIV",{class:!0});var fe=i(B);H=c(fe,"DIV",{class:!0});var Ve=i(H);le=c(Ve,"SPAN",{class:!0});var kt=i(le);Me=v(kt,"PIN"),kt.forEach(r),He=E(Ve),ae=c(Ve,"SPAN",{class:!0});var Et=i(ae);Ne=v(Et,a[0]),Et.forEach(r),Ve.forEach(r),Ge=E(fe),G=c(fe,"DIV",{class:!0});var $e=i(G);re=c($e,"SPAN",{class:!0});var wt=i(re);Ke=v(wt,"Controller URL"),wt.forEach(r),Je=E($e),C=c($e,"A",{href:!0});var be=i(C);Pe=v(be,a[1]),Qe=v(be,A),Xe=v(be,"/control/"),Ye=v(be,a[7]),be.forEach(r),$e.forEach(r),Ze=E(fe),oe=c(fe,"DIV",{});var It=i(oe);ne=c(It,"BUTTON",{class:!0});var St=i(ne);O=c(St,"DIV",{class:!0});var Be=i(O);ce=c(Be,"SPAN",{class:!0});var Nt=i(ce);et=v(Nt,"Share Controller URL"),Nt.forEach(r),tt=E(Be),Ee(Y.$$.fragment,Be),Be.forEach(r),St.forEach(r),It.forEach(r),fe.forEach(r),ye.forEach(r),L.forEach(r),this.h()},h(){f(l,"class","absolute top-3 left-3"),f(w,"class","clock svelte-qg5rdz"),Q(w,"text-red-600",a[4]),f(R,"class","flex flex-col justify-center items-center"),f(p,"class","controlButton svelte-qg5rdz"),Q(p,"startButton",!a[5]),Q(p,"stopButton",a[5]),f(S,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-qg5rdz"),f(d,"class","flex flex-row lg:flex-col justify-evenly"),f(F,"class","text-xs"),f(M,"class","text-xl"),f(U,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(g,"class","text-xs"),f(y,"href",""+(A+"/room/"+a[7])),f($,"class","hidden lg:flex flex-col mb-3"),f(se,"class","mr-2"),f(j,"class","flex flex-row items-center"),f(te,"class","shareButton lg:text-lg svelte-qg5rdz"),Q(ee,"hidden",!navigator.share),f(N,"class","lg:mb-10 w-1/2 lg:w-full"),f(le,"class","text-xs"),f(ae,"class","text-xl"),f(H,"class","flex flex-col mb-3"),f(re,"class","text-xs"),f(C,"href",""+(A+"/control/"+a[7])),f(G,"class","hidden lg:flex flex-col mb-3"),f(ce,"class","mr-2"),f(O,"class","flex flex-row items-center"),f(ne,"class","shareButton lg:text-lg svelte-qg5rdz"),Q(oe,"hidden",!navigator.share),f(B,"class","w-1/2 lg:w-full"),f(V,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(m,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(o,b){ue(o,l,b),J[e].m(l,null),ue(o,u,b),ue(o,m,b),s(m,R),s(R,w),s(w,_),s(m,T),s(m,d),s(d,p),s(p,I),z.m(I,null),s(d,x),s(d,S),s(S,D),s(m,de),s(m,V),s(V,N),s(N,U),s(U,F),s(F,pe),s(U,me),s(U,M),s(M,_e),s(N,he),s(N,$),s($,g),s(g,P),s($,ve),s($,y),s(y,Se),s(y,je),s(y,Ce),s(y,Oe),s(N,ze),s(N,ee),s(ee,te),s(te,j),s(j,se),s(se,qe),s(j,We),we(X,j,null),s(V,Fe),s(V,B),s(B,H),s(H,le),s(le,Me),s(H,He),s(H,ae),s(ae,Ne),s(B,Ge),s(B,G),s(G,re),s(re,Ke),s(G,Je),s(G,C),s(C,Pe),s(C,Qe),s(C,Xe),s(C,Ye),s(B,Ze),s(B,oe),s(oe,ne),s(ne,O),s(O,ce),s(ce,et),s(O,tt),we(Y,O,null),K=!0,st||(rt=[Z(l,"click",a[15]),Z(p,"click",a[9]),Z(S,"click",a[10]),Z(j,"click",a[11]),Z(O,"click",a[12])],st=!0)},p(o,b){let L=e;e=nt(o),e===L?J[e].p(o,b):(Tt(),q(J[L],1,1,()=>{J[L]=null}),Pt(),t=J[e],t?t.p(o,b):(t=J[e]=ot[e](o),t.c()),W(t,1),t.m(l,null)),(!K||b&8)&&xe(_,o[3]),b&16&&Q(w,"text-red-600",o[4]),Re!==(Re=ct(o))&&(z.d(1),z=Re(o),z&&(z.c(),z.m(I,null))),b&32&&Q(p,"startButton",!o[5]),b&32&&Q(p,"stopButton",o[5]),(!K||b&2)&&xe(Se,o[1]),(!K||b&1)&&xe(Ne,o[0]),(!K||b&2)&&xe(Pe,o[1])},i(o){K||(W(t),W(X.$$.fragment,o),W(Y.$$.fragment,o),K=!0)},o(o){q(t),q(X.$$.fragment,o),q(Y.$$.fragment,o),K=!1},d(o){o&&r(l),J[e].d(),o&&r(u),o&&r(m),z.d(),Ie(X),Ie(Y),st=!1,Rt(rt)}}}function Mt(a){let l,e;return l=new Le({props:{icon:Lt,size:"2x"}}),{c(){ke(l.$$.fragment)},l(t){Ee(l.$$.fragment,t)},m(t,u){we(l,t,u),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){q(l.$$.fragment,t),e=!1},d(t){Ie(l,t)}}}function Ht(a){let l,e;return l=new Le({props:{icon:xt,size:"2x"}}),{c(){ke(l.$$.fragment)},l(t){Ee(l.$$.fragment,t)},m(t,u){we(l,t,u),e=!0},p:lt,i(t){e||(W(l.$$.fragment,t),e=!0)},o(t){q(l.$$.fragment,t),e=!1},d(t){Ie(l,t)}}}function Gt(a){let l;return{c(){l=h("START")},l(e){l=v(e,"START")},m(e,t){ue(e,l,t)},d(e){e&&r(l)}}}function Kt(a){let l;return{c(){l=h("STOP")},l(e){l=v(e,"STOP")},m(e,t){ue(e,l,t)},d(e){e&&r(l)}}}function Jt(a){let l,e,t,u,m,R;const w=[Ft,Wt],_=[];function T(d,p){return d[2]?0:1}return e=T(a),t=_[e]=w[e](a),{c(){l=n("div"),t.c(),this.h()},l(d){l=c(d,"DIV",{id:!0,class:!0});var p=i(l);t.l(p),p.forEach(r),this.h()},h(){f(l,"id","main"),f(l,"class","w-full h-full overflow-hidden svelte-qg5rdz")},m(d,p){ue(d,l,p),_[e].m(l,null),u=!0,m||(R=[Z(qt,"keydown",a[13]),Z(l,"click",a[8],{once:!0})],m=!0)},p(d,[p]){let I=e;e=T(d),e===I?_[e].p(d,p):(Tt(),q(_[I],1,1,()=>{_[I]=null}),Pt(),t=_[e],t?t.p(d,p):(t=_[e]=w[e](d),t.c()),W(t,1),t.m(l,null))},i(d){u||(W(t),u=!0)},o(d){q(t),u=!1},d(d){d&&r(l),_[e].d(),m=!1,Rt(R)}}}function Qt(a,l,e){let t;Vt(a,jt,g=>e(19,t=g));let u=t.params.roomId,m,R,w=!1,_,T,d="",p=!1,I,x,S=!1,D;$t(()=>{e(1,R=window.location.host),t.url.searchParams.has("pin")?e(0,m=t.url.searchParams.get("pin")):(e(0,m=sessionStorage.getItem("PIN-"+u)),m||e(0,m=prompt("Please enter the control PIN for room "+u))),m?(sessionStorage.setItem("PIN-"+u,m),V(m),D=new Audio(A+"/audio/beep.mp3")):at(A+"/")});function de(){e(6,S=!0),D.play(),D.pause(),D.load()}function V(g){_=new WebSocket(Ct+"://"+Ot+"/"+u+"?pin="+g),_.onerror=function(P){console.log(P)},_.onmessage=function(P){if(P.data==="ROOM_NOT_FOUND")alert("The room "+u+" does not exist"),at(A+"/");else if(P.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+u),at(A+"/");else if(P.data==="AUTHENTICATED")e(2,w=!0);else{let ve=P.data.substring(0,1),y=P.data.substring(2).includes(";")?P.data.substring(2).split(";"):[P.data.substring(2)];switch(ve){case"t":e(14,T=parseInt(y[1])),T==0?F():pe();break;case"r":e(5,I=y[0]==="1");break}}}}function N(){I?_.send("pause"):_.send("start")}function U(){_.send("reset")}function F(){x===void 0&&(e(4,p=!0),me(),x=setInterval(function(){e(4,p=!p)},500))}function pe(){x&&(clearInterval(x),x=void 0,e(4,p=!1))}function me(){S&&(D.play(),setTimeout(function(){D.pause(),D.load()},2e3))}function M(){navigator.share&&navigator.share({title:"Shot Clock room "+u,url:A+"/room/"+u})}function _e(){navigator.share&&navigator.share({title:"Shot Clock controller "+u,url:A+"/control/"+u})}function he(g){g.key===" "||g.key==="Enter"?(N(),g.preventDefault()):(g.key.toLowerCase()==="m"||g.key.toLowerCase()==="c"||g.key==="Backspace")&&(U(),g.preventDefault())}const $=()=>e(6,S=!S);return a.$$.update=()=>{a.$$.dirty&16384&&T!==void 0&&e(3,d=T.toString().padStart(2,"0"))},[m,R,w,d,p,I,S,u,de,N,U,M,_e,he,T,$]}class ss extends At{constructor(l){super();Dt(this,l,Qt,Jt,Ut,{})}}export{ss as default};
