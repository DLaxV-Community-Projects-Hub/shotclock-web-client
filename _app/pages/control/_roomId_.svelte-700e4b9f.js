import{S as qt,i as yt,s as Rt,e as n,c,a as i,d as a,b as f,g as me,X as ve,o as M,p as jt,q as W,H as Ut,v as Ct,n as zt,_ as Lt,w as Pe,x as Ae,y as De,O as ft,B as Ve,P as Ge,a1 as Ot,k as w,t as v,m as N,h,a2 as Z,R as l,j as D,Y as Ht,a3 as Mt,a4 as Wt}from"../../chunks/vendor-c3f96ae6.js";import{p as Ft,w as Xt,s as Gt}from"../../chunks/config-7038c0e7.js";import{b as T}from"../../chunks/paths-b0acc198.js";import{L as Yt}from"../../chunks/LoadingInfo-456c9f37.js";import{g as ut}from"../../chunks/navigation-ecedacd4.js";function Jt(o){let s,t;return s=new Yt({}),{c(){Pe(s.$$.fragment)},l(e){Ae(s.$$.fragment,e)},m(e,_){De(s,e,_),t=!0},p:ft,i(e){t||(W(s.$$.fragment,e),t=!0)},o(e){M(s.$$.fragment,e),t=!1},d(e){Ve(s,e)}}}function Kt(o){let s,t,e,_,d,g,S,k,P,u,m,I,x,A,$=o[7]("control.reset")+"",V,he,U,B,z,F,ee=o[7]("control.room")+"",se,ge,X,be,y,b,G,Y=o[7]("control.room_url")+"",Be,Ye,R,Te,Je,Ke,Qe,Ze,oe,re,C,ae,ke=o[7]("control.share_room_url")+"",$e,xe,te,et,O,J,ne,Ie=o[7]("control.pin")+"",je,tt,ce,Ue,lt,K,ie,Ee=o[7]("control.controller_url")+"",ze,st,L,Oe,ot,rt,at,nt,fe,ue,H,de,we=o[7]("control.share_controller_url")+"",qe,ct,le,E,it,dt;const _t=[Zt,Qt],Q=[];function pt(r,p){return r[6]?0:1}t=pt(o),e=Q[t]=_t[t](o);function mt(r,p){return r[5]?el:xt}let ye=mt(o),j=ye(o);return te=new Ge({props:{icon:Ot,size:"lg"}}),le=new Ge({props:{icon:Ot,size:"lg"}}),{c(){s=n("div"),e.c(),_=w(),d=n("div"),g=n("div"),S=n("span"),k=v(o[3]),P=w(),u=n("div"),m=n("button"),I=n("span"),j.c(),x=w(),A=n("button"),V=v($),he=w(),U=n("div"),B=n("div"),z=n("div"),F=n("span"),se=v(ee),ge=w(),X=n("span"),be=v(o[8]),y=w(),b=n("div"),G=n("span"),Be=v(Y),Ye=w(),R=n("a"),Te=v(o[1]),Je=v(T),Ke=v("/room/"),Qe=v(o[8]),Ze=w(),oe=n("div"),re=n("button"),C=n("div"),ae=n("span"),$e=v(ke),xe=w(),Pe(te.$$.fragment),et=w(),O=n("div"),J=n("div"),ne=n("span"),je=v(Ie),tt=w(),ce=n("span"),Ue=v(o[0]),lt=w(),K=n("div"),ie=n("span"),ze=v(Ee),st=w(),L=n("a"),Oe=v(o[1]),ot=v(T),rt=v("/control/"),at=v(o[8]),nt=w(),fe=n("div"),ue=n("button"),H=n("div"),de=n("span"),qe=v(we),ct=w(),Pe(le.$$.fragment),this.h()},l(r){s=c(r,"DIV",{class:!0});var p=i(s);e.l(p),p.forEach(a),_=N(r),d=c(r,"DIV",{class:!0});var q=i(d);g=c(q,"DIV",{class:!0});var vt=i(g);S=c(vt,"SPAN",{class:!0});var ht=i(S);k=h(ht,o[3]),ht.forEach(a),vt.forEach(a),P=N(q),u=c(q,"DIV",{class:!0});var Re=i(u);m=c(Re,"BUTTON",{class:!0});var gt=i(m);I=c(gt,"SPAN",{});var bt=i(I);j.l(bt),bt.forEach(a),gt.forEach(a),x=N(Re),A=c(Re,"BUTTON",{class:!0});var kt=i(A);V=h(kt,$),kt.forEach(a),Re.forEach(a),he=N(q),U=c(q,"DIV",{class:!0});var Ce=i(U);B=c(Ce,"DIV",{class:!0});var _e=i(B);z=c(_e,"DIV",{class:!0});var Le=i(z);F=c(Le,"SPAN",{class:!0});var It=i(F);se=h(It,ee),It.forEach(a),ge=N(Le),X=c(Le,"SPAN",{class:!0});var Et=i(X);be=h(Et,o[8]),Et.forEach(a),Le.forEach(a),y=N(_e),b=c(_e,"DIV",{class:!0});var He=i(b);G=c(He,"SPAN",{class:!0});var wt=i(G);Be=h(wt,Y),wt.forEach(a),Ye=N(He),R=c(He,"A",{href:!0});var Ne=i(R);Te=h(Ne,o[1]),Je=h(Ne,T),Ke=h(Ne,"/room/"),Qe=h(Ne,o[8]),Ne.forEach(a),He.forEach(a),Ze=N(_e),oe=c(_e,"DIV",{});var Nt=i(oe);re=c(Nt,"BUTTON",{class:!0});var St=i(re);C=c(St,"DIV",{class:!0});var Me=i(C);ae=c(Me,"SPAN",{class:!0});var Pt=i(ae);$e=h(Pt,ke),Pt.forEach(a),xe=N(Me),Ae(te.$$.fragment,Me),Me.forEach(a),St.forEach(a),Nt.forEach(a),_e.forEach(a),et=N(Ce),O=c(Ce,"DIV",{class:!0});var pe=i(O);J=c(pe,"DIV",{class:!0});var We=i(J);ne=c(We,"SPAN",{class:!0});var At=i(ne);je=h(At,Ie),At.forEach(a),tt=N(We),ce=c(We,"SPAN",{class:!0});var Dt=i(ce);Ue=h(Dt,o[0]),Dt.forEach(a),We.forEach(a),lt=N(pe),K=c(pe,"DIV",{class:!0});var Fe=i(K);ie=c(Fe,"SPAN",{class:!0});var Vt=i(ie);ze=h(Vt,Ee),Vt.forEach(a),st=N(Fe),L=c(Fe,"A",{href:!0});var Se=i(L);Oe=h(Se,o[1]),ot=h(Se,T),rt=h(Se,"/control/"),at=h(Se,o[8]),Se.forEach(a),Fe.forEach(a),nt=N(pe),fe=c(pe,"DIV",{});var Bt=i(fe);ue=c(Bt,"BUTTON",{class:!0});var Tt=i(ue);H=c(Tt,"DIV",{class:!0});var Xe=i(H);de=c(Xe,"SPAN",{class:!0});var $t=i(de);qe=h($t,we),$t.forEach(a),ct=N(Xe),Ae(le.$$.fragment,Xe),Xe.forEach(a),Tt.forEach(a),Bt.forEach(a),pe.forEach(a),Ce.forEach(a),q.forEach(a),this.h()},h(){f(s,"class","absolute top-3 left-3"),f(S,"class","clock svelte-qg5rdz"),Z(S,"text-red-600",o[4]),f(g,"class","flex flex-col justify-center items-center"),f(m,"class","controlButton svelte-qg5rdz"),Z(m,"startButton",!o[5]),Z(m,"stopButton",o[5]),f(A,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-qg5rdz"),f(u,"class","flex flex-row lg:flex-col justify-evenly"),f(F,"class","text-xs"),f(X,"class","text-xl"),f(z,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(G,"class","text-xs"),f(R,"href",""+(T+"/room/"+o[8])),f(b,"class","hidden lg:flex flex-col mb-3"),f(ae,"class","mr-2"),f(C,"class","flex flex-row items-center"),f(re,"class","shareButton lg:text-lg svelte-qg5rdz"),Z(oe,"hidden",!navigator.share),f(B,"class","lg:mb-10 w-1/2 lg:w-full"),f(ne,"class","text-xs"),f(ce,"class","text-xl"),f(J,"class","flex flex-col mb-3"),f(ie,"class","text-xs"),f(L,"href",""+(T+"/control/"+o[8])),f(K,"class","hidden lg:flex flex-col mb-3"),f(de,"class","mr-2"),f(H,"class","flex flex-row items-center"),f(ue,"class","shareButton lg:text-lg svelte-qg5rdz"),Z(fe,"hidden",!navigator.share),f(O,"class","w-1/2 lg:w-full"),f(U,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(d,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,p){me(r,s,p),Q[t].m(s,null),me(r,_,p),me(r,d,p),l(d,g),l(g,S),l(S,k),l(d,P),l(d,u),l(u,m),l(m,I),j.m(I,null),l(u,x),l(u,A),l(A,V),l(d,he),l(d,U),l(U,B),l(B,z),l(z,F),l(F,se),l(z,ge),l(z,X),l(X,be),l(B,y),l(B,b),l(b,G),l(G,Be),l(b,Ye),l(b,R),l(R,Te),l(R,Je),l(R,Ke),l(R,Qe),l(B,Ze),l(B,oe),l(oe,re),l(re,C),l(C,ae),l(ae,$e),l(C,xe),De(te,C,null),l(U,et),l(U,O),l(O,J),l(J,ne),l(ne,je),l(J,tt),l(J,ce),l(ce,Ue),l(O,lt),l(O,K),l(K,ie),l(ie,ze),l(K,st),l(K,L),l(L,Oe),l(L,ot),l(L,rt),l(L,at),l(O,nt),l(O,fe),l(fe,ue),l(ue,H),l(H,de),l(de,qe),l(H,ct),De(le,H,null),E=!0,it||(dt=[ve(s,"click",o[15]),ve(m,"click",o[10]),ve(A,"click",o[11]),ve(C,"click",o[12]),ve(H,"click",o[13])],it=!0)},p(r,p){let q=t;t=pt(r),t===q?Q[t].p(r,p):(zt(),M(Q[q],1,1,()=>{Q[q]=null}),jt(),e=Q[t],e?e.p(r,p):(e=Q[t]=_t[t](r),e.c()),W(e,1),e.m(s,null)),(!E||p&8)&&D(k,r[3]),p&16&&Z(S,"text-red-600",r[4]),ye===(ye=mt(r))&&j?j.p(r,p):(j.d(1),j=ye(r),j&&(j.c(),j.m(I,null))),p&32&&Z(m,"startButton",!r[5]),p&32&&Z(m,"stopButton",r[5]),(!E||p&128)&&$!==($=r[7]("control.reset")+"")&&D(V,$),(!E||p&128)&&ee!==(ee=r[7]("control.room")+"")&&D(se,ee),(!E||p&128)&&Y!==(Y=r[7]("control.room_url")+"")&&D(Be,Y),(!E||p&2)&&D(Te,r[1]),(!E||p&128)&&ke!==(ke=r[7]("control.share_room_url")+"")&&D($e,ke),(!E||p&128)&&Ie!==(Ie=r[7]("control.pin")+"")&&D(je,Ie),(!E||p&1)&&D(Ue,r[0]),(!E||p&128)&&Ee!==(Ee=r[7]("control.controller_url")+"")&&D(ze,Ee),(!E||p&2)&&D(Oe,r[1]),(!E||p&128)&&we!==(we=r[7]("control.share_controller_url")+"")&&D(qe,we)},i(r){E||(W(e),W(te.$$.fragment,r),W(le.$$.fragment,r),E=!0)},o(r){M(e),M(te.$$.fragment,r),M(le.$$.fragment,r),E=!1},d(r){r&&a(s),Q[t].d(),r&&a(_),r&&a(d),j.d(),Ve(te),Ve(le),it=!1,Ht(dt)}}}function Qt(o){let s,t;return s=new Ge({props:{icon:Mt,size:"2x"}}),{c(){Pe(s.$$.fragment)},l(e){Ae(s.$$.fragment,e)},m(e,_){De(s,e,_),t=!0},p:ft,i(e){t||(W(s.$$.fragment,e),t=!0)},o(e){M(s.$$.fragment,e),t=!1},d(e){Ve(s,e)}}}function Zt(o){let s,t;return s=new Ge({props:{icon:Wt,size:"2x"}}),{c(){Pe(s.$$.fragment)},l(e){Ae(s.$$.fragment,e)},m(e,_){De(s,e,_),t=!0},p:ft,i(e){t||(W(s.$$.fragment,e),t=!0)},o(e){M(s.$$.fragment,e),t=!1},d(e){Ve(s,e)}}}function xt(o){let s=o[7]("control.start")+"",t;return{c(){t=v(s)},l(e){t=h(e,s)},m(e,_){me(e,t,_)},p(e,_){_&128&&s!==(s=e[7]("control.start")+"")&&D(t,s)},d(e){e&&a(t)}}}function el(o){let s=o[7]("control.stop")+"",t;return{c(){t=v(s)},l(e){t=h(e,s)},m(e,_){me(e,t,_)},p(e,_){_&128&&s!==(s=e[7]("control.stop")+"")&&D(t,s)},d(e){e&&a(t)}}}function tl(o){let s,t,e,_,d,g;const S=[Kt,Jt],k=[];function P(u,m){return u[2]?0:1}return t=P(o),e=k[t]=S[t](o),{c(){s=n("div"),e.c(),this.h()},l(u){s=c(u,"DIV",{id:!0,class:!0});var m=i(s);e.l(m),m.forEach(a),this.h()},h(){f(s,"id","main"),f(s,"class","w-full h-full overflow-hidden svelte-qg5rdz")},m(u,m){me(u,s,m),k[t].m(s,null),_=!0,d||(g=ve(s,"click",o[9],{once:!0}),d=!0)},p(u,[m]){let I=t;t=P(u),t===I?k[t].p(u,m):(zt(),M(k[I],1,1,()=>{k[I]=null}),jt(),e=k[t],e?e.p(u,m):(e=k[t]=S[t](u),e.c()),W(e,1),e.m(s,null))},i(u){_||(W(e),_=!0)},o(u){M(e),_=!1},d(u){u&&a(s),k[t].d(),d=!1,g()}}}function ll(o,s,t){let e,_;Ut(o,Ft,y=>t(19,e=y)),Ut(o,Lt,y=>t(7,_=y));let d=e.params.roomId,g,S,k=!1,P,u,m="",I=!1,x,A,$=!1,V;Ct(()=>{t(1,S=window.location.host),e.url.searchParams.has("pin")?t(0,g=e.url.searchParams.get("pin")):(t(0,g=sessionStorage.getItem("PIN-"+d)),g||t(0,g=prompt("Please enter the control PIN for room "+d))),g?(sessionStorage.setItem("PIN-"+d,g),U(g),V=new Audio(T+"/audio/beep.mp3")):ut(T+"/")});function he(){t(6,$=!0),V.play(),V.pause(),V.load()}function U(y){P=new WebSocket(Xt+"://"+Gt+"/"+d+"?pin="+y),P.onerror=function(b){console.log(b)},P.onmessage=function(b){if(b.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),ut(T+"/");else if(b.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),ut(T+"/");else if(b.data==="AUTHENTICATED")t(2,k=!0);else{let G=b.data.substring(0,1),Y=b.data.substring(2).includes(";")?b.data.substring(2).split(";"):[b.data.substring(2)];switch(G){case"t":t(14,u=parseInt(Y[1])),u==0?F():ee();break;case"r":t(5,x=Y[0]==="1");break}}}}function B(){x?P.send("pause"):P.send("start")}function z(){P.send("reset")}function F(){A===void 0&&(t(4,I=!0),se(),A=setInterval(function(){t(4,I=!I)},500))}function ee(){A&&(clearInterval(A),A=void 0,t(4,I=!1))}function se(){$&&(V.play(),setTimeout(function(){V.pause(),V.load()},2e3))}function ge(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:T+"/room/"+d})}function X(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:T+"/control/"+d})}const be=()=>t(6,$=!$);return o.$$.update=()=>{o.$$.dirty&16384&&u!==void 0&&t(3,m=u.toString().padStart(2,"0"))},[g,S,k,m,I,x,$,_,d,he,B,z,ge,X,u,be]}class cl extends qt{constructor(s){super();yt(this,s,ll,tl,Rt,{})}}export{cl as default};
