import{S as ts,i as ss,s as ls,e as n,c,a as i,d as a,b as f,g as Ne,R,o as O,p as Yt,q as L,G as Zt,I as os,v as as,T as rs,n as es,w as ne,x as ce,y as ie,E as It,B as fe,k as b,t as m,m as g,h,U as F,Q as e,j as Xe}from"../../chunks/index-bcecc6c1.js";import{w as ns,s as cs,p as is}from"../../chunks/config-3ef163f3.js";import{b as A}from"../../chunks/singletons-1b661bce.js";import{L as fs,F as $e,f as Jt,a as Xt,b as us,c as ds}from"../../chunks/LoadingInfo-8a9dc84f.js";import{g as St}from"../../chunks/navigation-d1154fc1.js";const{window:ps}=rs;function _s(o){let l,t;return l=new fs({}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){O(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function ms(o){let l,t,s,d,p,U,S,v,D,_,u,I,M,T,V,Be,E,x,ue,Ue,$,De,Pe,P,W,ye,q,Re,G,Ae,Ve,H,w,N,C,B,Z,de,Ye,Ze,pe,et,tt,ee,_e,st,lt,K,xe,ot,at,rt,nt,me,he,Q,ve,ct,it,ae,ft,j,te,be,ut,dt,ge,Ce,pt,se,ke,_t,mt,J,je,ht,vt,bt,gt,we,Ee,X,Se,kt,wt,re,le,Et,Tt;const $t=[vs,hs],oe=[];function Nt(r,k){return r[7]?0:1}t=Nt(o),s=oe[t]=$t[t](o);function Bt(r,k){return r[6]?gs:bs}let ze=Bt(o),Y=ze(o);return W=new $e({props:{class:"w-full lg:hidden",icon:Jt}}),q=new $e({props:{class:"w-full hidden lg:block",icon:Jt,size:"2x"}}),ae=new $e({props:{icon:Xt,size:"lg"}}),re=new $e({props:{icon:Xt,size:"lg"}}),{c(){l=n("div"),s.c(),d=b(),p=n("div"),U=n("div"),S=n("span"),v=m(o[4]),D=b(),_=n("div"),u=n("button"),I=n("span"),Y.c(),M=b(),T=n("button"),V=m("RESET"),Be=b(),E=n("div"),x=n("button"),ue=m("-5s"),Ue=b(),$=n("button"),De=m("-1s"),Pe=b(),P=n("button"),ne(W.$$.fragment),ye=b(),ne(q.$$.fragment),Re=b(),G=n("button"),Ae=m("+1s"),Ve=b(),H=n("button"),w=m("+5s"),N=b(),C=n("div"),B=n("div"),Z=n("div"),de=n("span"),Ye=m("Room"),Ze=b(),pe=n("span"),et=m(o[8]),tt=b(),ee=n("div"),_e=n("span"),st=m("Shot clock URL"),lt=b(),K=n("a"),xe=m(o[2]),ot=m(A),at=m("/room/"),rt=m(o[8]),nt=b(),me=n("div"),he=n("button"),Q=n("div"),ve=n("span"),ct=m("Share shot clock URL"),it=b(),ne(ae.$$.fragment),ft=b(),j=n("div"),te=n("div"),be=n("span"),ut=m("PIN"),dt=b(),ge=n("span"),Ce=m(o[1]),pt=b(),se=n("div"),ke=n("span"),_t=m("Controller URL"),mt=b(),J=n("a"),je=m(o[2]),ht=m(A),vt=m("/control/"),bt=m(o[8]),gt=b(),we=n("div"),Ee=n("button"),X=n("div"),Se=n("span"),kt=m("Share Controller URL"),wt=b(),ne(re.$$.fragment),this.h()},l(r){l=c(r,"DIV",{class:!0});var k=i(l);s.l(k),k.forEach(a),d=g(r),p=c(r,"DIV",{class:!0});var y=i(p);U=c(y,"DIV",{class:!0});var Ut=i(U);S=c(Ut,"SPAN",{class:!0});var Dt=i(S);v=h(Dt,o[4]),Dt.forEach(a),Ut.forEach(a),D=g(y),_=c(y,"DIV",{class:!0});var Fe=i(_);u=c(Fe,"BUTTON",{class:!0});var Pt=i(u);I=c(Pt,"SPAN",{});var yt=i(I);Y.l(yt),yt.forEach(a),Pt.forEach(a),M=g(Fe),T=c(Fe,"BUTTON",{class:!0});var Rt=i(T);V=h(Rt,"RESET"),Rt.forEach(a),Fe.forEach(a),Be=g(y),E=c(y,"DIV",{class:!0});var z=i(E);x=c(z,"BUTTON",{class:!0});var At=i(x);ue=h(At,"-5s"),At.forEach(a),Ue=g(z),$=c(z,"BUTTON",{class:!0});var Vt=i($);De=h(Vt,"-1s"),Vt.forEach(a),Pe=g(z),P=c(z,"BUTTON",{class:!0,title:!0});var Me=i(P);ce(W.$$.fragment,Me),ye=g(Me),ce(q.$$.fragment,Me),Me.forEach(a),Re=g(z),G=c(z,"BUTTON",{class:!0});var Ot=i(G);Ae=h(Ot,"+1s"),Ot.forEach(a),Ve=g(z),H=c(z,"BUTTON",{class:!0});var Lt=i(H);w=h(Lt,"+5s"),Lt.forEach(a),z.forEach(a),N=g(y),C=c(y,"DIV",{class:!0});var We=i(C);B=c(We,"DIV",{class:!0});var Ie=i(B);Z=c(Ie,"DIV",{class:!0});var qe=i(Z);de=c(qe,"SPAN",{class:!0});var xt=i(de);Ye=h(xt,"Room"),xt.forEach(a),Ze=g(qe),pe=c(qe,"SPAN",{class:!0});var Ct=i(pe);et=h(Ct,o[8]),Ct.forEach(a),qe.forEach(a),tt=g(Ie),ee=c(Ie,"DIV",{class:!0});var Ge=i(ee);_e=c(Ge,"SPAN",{class:!0});var jt=i(_e);st=h(jt,"Shot clock URL"),jt.forEach(a),lt=g(Ge),K=c(Ge,"A",{href:!0});var Oe=i(K);xe=h(Oe,o[2]),ot=h(Oe,A),at=h(Oe,"/room/"),rt=h(Oe,o[8]),Oe.forEach(a),Ge.forEach(a),nt=g(Ie),me=c(Ie,"DIV",{});var zt=i(me);he=c(zt,"BUTTON",{class:!0});var Ft=i(he);Q=c(Ft,"DIV",{class:!0});var He=i(Q);ve=c(He,"SPAN",{class:!0});var Mt=i(ve);ct=h(Mt,"Share shot clock URL"),Mt.forEach(a),it=g(He),ce(ae.$$.fragment,He),He.forEach(a),Ft.forEach(a),zt.forEach(a),Ie.forEach(a),ft=g(We),j=c(We,"DIV",{class:!0});var Te=i(j);te=c(Te,"DIV",{class:!0});var Ke=i(te);be=c(Ke,"SPAN",{class:!0});var Wt=i(be);ut=h(Wt,"PIN"),Wt.forEach(a),dt=g(Ke),ge=c(Ke,"SPAN",{class:!0});var qt=i(ge);Ce=h(qt,o[1]),qt.forEach(a),Ke.forEach(a),pt=g(Te),se=c(Te,"DIV",{class:!0});var Qe=i(se);ke=c(Qe,"SPAN",{class:!0});var Gt=i(ke);_t=h(Gt,"Controller URL"),Gt.forEach(a),mt=g(Qe),J=c(Qe,"A",{href:!0});var Le=i(J);je=h(Le,o[2]),ht=h(Le,A),vt=h(Le,"/control/"),bt=h(Le,o[8]),Le.forEach(a),Qe.forEach(a),gt=g(Te),we=c(Te,"DIV",{});var Ht=i(we);Ee=c(Ht,"BUTTON",{class:!0});var Kt=i(Ee);X=c(Kt,"DIV",{class:!0});var Je=i(X);Se=c(Je,"SPAN",{class:!0});var Qt=i(Se);kt=h(Qt,"Share Controller URL"),Qt.forEach(a),wt=g(Je),ce(re.$$.fragment,Je),Je.forEach(a),Kt.forEach(a),Ht.forEach(a),Te.forEach(a),We.forEach(a),y.forEach(a),this.h()},h(){f(l,"class","absolute top-3 left-3"),f(S,"class","clock svelte-d2epfp"),F(S,"text-red-600",o[5]),f(U,"class","flex flex-col justify-center items-center"),f(u,"class","controlButton svelte-d2epfp"),F(u,"startButton",!o[6]&&o[0]>0),F(u,"stopButton",o[6]&&o[0]>0),F(u,"buttonDisabled",o[0]==0),f(T,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(_,"class","flex flex-row lg:flex-col justify-evenly"),f(x,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f($,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(P,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(P,"title","Rewind to last reset"),f(G,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(H,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-d2epfp"),f(E,"class","flex flex-row lg:flex-col justify-evenly"),f(de,"class","text-xs"),f(pe,"class","text-xl"),f(Z,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(_e,"class","text-xs"),f(K,"href",A+"/room/"+o[8]),f(ee,"class","hidden lg:flex flex-col mb-3"),f(ve,"class","mr-2"),f(Q,"class","flex flex-row items-center"),f(he,"class","shareButton lg:text-lg svelte-d2epfp"),F(me,"hidden",!navigator.share),f(B,"class","lg:mb-10 w-1/2 lg:w-full"),f(be,"class","text-xs"),f(ge,"class","text-xl"),f(te,"class","flex flex-col mb-3"),f(ke,"class","text-xs"),f(J,"href",A+"/control/"+o[8]),f(se,"class","hidden lg:flex flex-col mb-3"),f(Se,"class","mr-2"),f(X,"class","flex flex-row items-center"),f(Ee,"class","shareButton lg:text-lg svelte-d2epfp"),F(we,"hidden",!navigator.share),f(j,"class","w-1/2 lg:w-full"),f(C,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(p,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,k){Ne(r,l,k),oe[t].m(l,null),Ne(r,d,k),Ne(r,p,k),e(p,U),e(U,S),e(S,v),e(p,D),e(p,_),e(_,u),e(u,I),Y.m(I,null),e(_,M),e(_,T),e(T,V),e(p,Be),e(p,E),e(E,x),e(x,ue),e(E,Ue),e(E,$),e($,De),e(E,Pe),e(E,P),ie(W,P,null),e(P,ye),ie(q,P,null),e(E,Re),e(E,G),e(G,Ae),e(E,Ve),e(E,H),e(H,w),e(p,N),e(p,C),e(C,B),e(B,Z),e(Z,de),e(de,Ye),e(Z,Ze),e(Z,pe),e(pe,et),e(B,tt),e(B,ee),e(ee,_e),e(_e,st),e(ee,lt),e(ee,K),e(K,xe),e(K,ot),e(K,at),e(K,rt),e(B,nt),e(B,me),e(me,he),e(he,Q),e(Q,ve),e(ve,ct),e(Q,it),ie(ae,Q,null),e(C,ft),e(C,j),e(j,te),e(te,be),e(be,ut),e(te,dt),e(te,ge),e(ge,Ce),e(j,pt),e(j,se),e(se,ke),e(ke,_t),e(se,mt),e(se,J),e(J,je),e(J,ht),e(J,vt),e(J,bt),e(j,gt),e(j,we),e(we,Ee),e(Ee,X),e(X,Se),e(Se,kt),e(X,wt),ie(re,X,null),le=!0,Et||(Tt=[R(l,"click",o[17]),R(u,"click",o[10]),R(T,"click",o[11]),R(x,"click",o[18]),R($,"click",o[19]),R(P,"click",o[12]),R(G,"click",o[20]),R(H,"click",o[21]),R(Q,"click",o[14]),R(X,"click",o[15])],Et=!0)},p(r,k){let y=t;t=Nt(r),t===y?oe[t].p(r,k):(es(),O(oe[y],1,1,()=>{oe[y]=null}),Yt(),s=oe[t],s?s.p(r,k):(s=oe[t]=$t[t](r),s.c()),L(s,1),s.m(l,null)),(!le||k&16)&&Xe(v,r[4]),k&32&&F(S,"text-red-600",r[5]),ze!==(ze=Bt(r))&&(Y.d(1),Y=ze(r),Y&&(Y.c(),Y.m(I,null))),k&65&&F(u,"startButton",!r[6]&&r[0]>0),k&65&&F(u,"stopButton",r[6]&&r[0]>0),k&1&&F(u,"buttonDisabled",r[0]==0),(!le||k&4)&&Xe(xe,r[2]),(!le||k&2)&&Xe(Ce,r[1]),(!le||k&4)&&Xe(je,r[2])},i(r){le||(L(s),L(W.$$.fragment,r),L(q.$$.fragment,r),L(ae.$$.fragment,r),L(re.$$.fragment,r),le=!0)},o(r){O(s),O(W.$$.fragment,r),O(q.$$.fragment,r),O(ae.$$.fragment,r),O(re.$$.fragment,r),le=!1},d(r){r&&a(l),oe[t].d(),r&&a(d),r&&a(p),Y.d(),fe(W),fe(q),fe(ae),fe(re),Et=!1,Zt(Tt)}}}function hs(o){let l,t;return l=new $e({props:{icon:us,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){O(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function vs(o){let l,t;return l=new $e({props:{icon:ds,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){O(l.$$.fragment,s),t=!1},d(s){fe(l,s)}}}function bs(o){let l;return{c(){l=m("START")},l(t){l=h(t,"START")},m(t,s){Ne(t,l,s)},d(t){t&&a(l)}}}function gs(o){let l;return{c(){l=m("STOP")},l(t){l=h(t,"STOP")},m(t,s){Ne(t,l,s)},d(t){t&&a(l)}}}function ks(o){let l,t,s,d,p,U;const S=[ms,_s],v=[];function D(_,u){return _[3]?0:1}return t=D(o),s=v[t]=S[t](o),{c(){l=n("div"),s.c(),this.h()},l(_){l=c(_,"DIV",{id:!0,class:!0});var u=i(l);s.l(u),u.forEach(a),this.h()},h(){f(l,"id","main"),f(l,"class","w-full h-full overflow-hidden svelte-d2epfp")},m(_,u){Ne(_,l,u),v[t].m(l,null),d=!0,p||(U=[R(ps,"keydown",o[16]),R(l,"click",o[9],{once:!0})],p=!0)},p(_,[u]){let I=t;t=D(_),t===I?v[t].p(_,u):(es(),O(v[I],1,1,()=>{v[I]=null}),Yt(),s=v[t],s?s.p(_,u):(s=v[t]=S[t](_),s.c()),L(s,1),s.m(l,null))},i(_){d||(L(s),d=!0)},o(_){O(s),d=!1},d(_){_&&a(l),v[t].d(),p=!1,Zt(U)}}}function ws(o,l,t){let s;os(o,is,w=>t(25,s=w));let d=s.params.roomId,p,U,S=!1,v,D,_="",u=!1,I,M,T=!1,V;as(()=>{t(2,U=window.location.host),s.url.searchParams.has("pin")?t(1,p=s.url.searchParams.get("pin")):(t(1,p=sessionStorage.getItem("PIN-"+d)),p||t(1,p=prompt("Please enter the control PIN for room "+d))),p?(sessionStorage.setItem("PIN-"+d,p),E(p),V=new Audio(A+"/audio/beep.mp3")):St(A+"/")});function Be(){t(7,T=!0),V.play(),V.pause(),V.load()}function E(w){v=new WebSocket(ns+"://"+cs+"/"+d+"?pin="+w),v.onerror=function(N){console.log(N)},v.onmessage=function(N){if(N.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),St(A+"/");else if(N.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),St(A+"/");else if(N.data==="AUTHENTICATED")t(3,S=!0);else{let C=N.data.substring(0,1),B=N.data.substring(2).includes(";")?N.data.substring(2).split(";"):[N.data.substring(2)];switch(C){case"t":t(0,D=parseInt(B[1])),D==0?De():Pe();break;case"r":t(6,I=B[0]==="1");break}}}}function x(){I?v.send("pause"):v.send("start")}function ue(){v.send("reset")}function Ue(){v.send("rewind")}function $(w){v.send("updateTime;"+w)}function De(){M===void 0&&(t(5,u=!0),P(),M=setInterval(function(){t(5,u=!u)},500))}function Pe(){M&&(clearInterval(M),M=void 0,t(5,u=!1))}function P(){T&&(V.play(),setTimeout(function(){V.pause(),V.load()},2e3))}function W(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:A+"/room/"+d})}function ye(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:A+"/control/"+d})}function q(w){w.key===" "||w.key==="Enter"?(x(),w.preventDefault()):(w.key.toLowerCase()==="m"||w.key.toLowerCase()==="c"||w.key==="Backspace")&&(ue(),w.preventDefault())}const Re=()=>t(7,T=!T),G=()=>$(-5),Ae=()=>$(-1),Ve=()=>$(1),H=()=>$(5);return o.$$.update=()=>{o.$$.dirty&1&&D!==void 0&&t(4,_=D.toString().padStart(2,"0"))},[D,p,U,S,_,u,I,T,d,Be,x,ue,Ue,$,W,ye,q,Re,G,Ae,Ve,H]}class Ns extends ts{constructor(l){super(),ss(this,l,ws,ks,ls,{})}}export{Ns as default};
