import{S as $t,i as qt,s as Ct,e as n,c,a as i,d as a,b as f,g as he,X as se,o as H,p as Ut,q as X,Y as zt,F as ft,v as Rt,a1 as Ft,n as Lt,G as Mt,_ as Wt,w as Ae,x as Ve,y as Be,L as ut,B as Te,P as Ke,a2 as Ot,k as S,t as g,m as D,h as b,a3 as ee,R as l,j as V,a4 as Gt,a5 as Ht}from"../../chunks/vendor-6d995ebd.js";import{p as Xt,w as Kt,s as Yt}from"../../chunks/config-49fddc90.js";import{b as y}from"../../chunks/paths-b0acc198.js";import{L as Jt}from"../../chunks/LoadingInfo-636a75e3.js";import{g as dt}from"../../chunks/navigation-ecedacd4.js";const{window:Qt}=Ft;function Zt(o){let s,t;return s=new Jt({}),{c(){Ae(s.$$.fragment)},l(e){Ve(s.$$.fragment,e)},m(e,u){Be(s,e,u),t=!0},p:ut,i(e){t||(X(s.$$.fragment,e),t=!0)},o(e){H(s.$$.fragment,e),t=!1},d(e){Te(s,e)}}}function xt(o){let s,t,e,u,k,m,h,w,q,d,_,E,oe,A,C=o[8]("control.reset")+"",U,R,I,B,z,F,K=o[8]("control.room")+"",re,ge,Y,be,ke,L,J,v=o[8]("control.room_url")+"",P,we,T,ye,Ye,Je,Qe,Ze,ae,ne,M,ce,Ee=o[8]("control.share_room_url")+"",je,xe,te,et,O,Q,ie,Ie=o[8]("control.pin")+"",Ue,tt,fe,ze,lt,Z,ue,Ne=o[8]("control.controller_url")+"",Le,st,W,Oe,ot,rt,at,nt,de,_e,G,pe,Se=o[8]("control.share_controller_url")+"",$e,ct,le,N,it,_t;const pt=[tl,el],x=[];function mt(r,p){return r[7]?0:1}t=mt(o),e=x[t]=pt[t](o);function vt(r,p){return r[6]?sl:ll}let qe=vt(o),j=qe(o);return te=new Ke({props:{icon:Ot,size:"lg"}}),le=new Ke({props:{icon:Ot,size:"lg"}}),{c(){s=n("div"),e.c(),u=S(),k=n("div"),m=n("div"),h=n("span"),w=g(o[4]),q=S(),d=n("div"),_=n("button"),E=n("span"),j.c(),oe=S(),A=n("button"),U=g(C),R=S(),I=n("div"),B=n("div"),z=n("div"),F=n("span"),re=g(K),ge=S(),Y=n("span"),be=g(o[9]),ke=S(),L=n("div"),J=n("span"),P=g(v),we=S(),T=n("a"),ye=g(o[1]),Ye=g(y),Je=g("/room/"),Qe=g(o[9]),Ze=S(),ae=n("div"),ne=n("button"),M=n("div"),ce=n("span"),je=g(Ee),xe=S(),Ae(te.$$.fragment),et=S(),O=n("div"),Q=n("div"),ie=n("span"),Ue=g(Ie),tt=S(),fe=n("span"),ze=g(o[0]),lt=S(),Z=n("div"),ue=n("span"),Le=g(Ne),st=S(),W=n("a"),Oe=g(o[1]),ot=g(y),rt=g("/control/"),at=g(o[9]),nt=S(),de=n("div"),_e=n("button"),G=n("div"),pe=n("span"),$e=g(Se),ct=S(),Ae(le.$$.fragment),this.h()},l(r){s=c(r,"DIV",{class:!0});var p=i(s);e.l(p),p.forEach(a),u=D(r),k=c(r,"DIV",{class:!0});var $=i(k);m=c($,"DIV",{class:!0});var ht=i(m);h=c(ht,"SPAN",{class:!0});var gt=i(h);w=b(gt,o[4]),gt.forEach(a),ht.forEach(a),q=D($),d=c($,"DIV",{class:!0});var Ce=i(d);_=c(Ce,"BUTTON",{class:!0});var bt=i(_);E=c(bt,"SPAN",{});var kt=i(E);j.l(kt),kt.forEach(a),bt.forEach(a),oe=D(Ce),A=c(Ce,"BUTTON",{class:!0});var wt=i(A);U=b(wt,C),wt.forEach(a),Ce.forEach(a),R=D($),I=c($,"DIV",{class:!0});var Re=i(I);B=c(Re,"DIV",{class:!0});var me=i(B);z=c(me,"DIV",{class:!0});var Fe=i(z);F=c(Fe,"SPAN",{class:!0});var Et=i(F);re=b(Et,K),Et.forEach(a),ge=D(Fe),Y=c(Fe,"SPAN",{class:!0});var It=i(Y);be=b(It,o[9]),It.forEach(a),Fe.forEach(a),ke=D(me),L=c(me,"DIV",{class:!0});var Me=i(L);J=c(Me,"SPAN",{class:!0});var Nt=i(J);P=b(Nt,v),Nt.forEach(a),we=D(Me),T=c(Me,"A",{href:!0});var De=i(T);ye=b(De,o[1]),Ye=b(De,y),Je=b(De,"/room/"),Qe=b(De,o[9]),De.forEach(a),Me.forEach(a),Ze=D(me),ae=c(me,"DIV",{});var St=i(ae);ne=c(St,"BUTTON",{class:!0});var Dt=i(ne);M=c(Dt,"DIV",{class:!0});var We=i(M);ce=c(We,"SPAN",{class:!0});var Pt=i(ce);je=b(Pt,Ee),Pt.forEach(a),xe=D(We),Ve(te.$$.fragment,We),We.forEach(a),Dt.forEach(a),St.forEach(a),me.forEach(a),et=D(Re),O=c(Re,"DIV",{class:!0});var ve=i(O);Q=c(ve,"DIV",{class:!0});var Ge=i(Q);ie=c(Ge,"SPAN",{class:!0});var At=i(ie);Ue=b(At,Ie),At.forEach(a),tt=D(Ge),fe=c(Ge,"SPAN",{class:!0});var Vt=i(fe);ze=b(Vt,o[0]),Vt.forEach(a),Ge.forEach(a),lt=D(ve),Z=c(ve,"DIV",{class:!0});var He=i(Z);ue=c(He,"SPAN",{class:!0});var Bt=i(ue);Le=b(Bt,Ne),Bt.forEach(a),st=D(He),W=c(He,"A",{href:!0});var Pe=i(W);Oe=b(Pe,o[1]),ot=b(Pe,y),rt=b(Pe,"/control/"),at=b(Pe,o[9]),Pe.forEach(a),He.forEach(a),nt=D(ve),de=c(ve,"DIV",{});var Tt=i(de);_e=c(Tt,"BUTTON",{class:!0});var yt=i(_e);G=c(yt,"DIV",{class:!0});var Xe=i(G);pe=c(Xe,"SPAN",{class:!0});var jt=i(pe);$e=b(jt,Se),jt.forEach(a),ct=D(Xe),Ve(le.$$.fragment,Xe),Xe.forEach(a),yt.forEach(a),Tt.forEach(a),ve.forEach(a),Re.forEach(a),$.forEach(a),this.h()},h(){f(s,"class","absolute top-3 left-3"),f(h,"class","clock svelte-qg5rdz"),ee(h,"text-red-600",o[5]),f(m,"class","flex flex-col justify-center items-center"),f(_,"class","controlButton svelte-qg5rdz"),ee(_,"startButton",!o[6]),ee(_,"stopButton",o[6]),f(A,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-qg5rdz"),f(d,"class","flex flex-row lg:flex-col justify-evenly"),f(F,"class","text-xs"),f(Y,"class","text-xl"),f(z,"class","flex flex-col mb-3 mr-5 lg:mr-0"),f(J,"class","text-xs"),f(T,"href",""+(y+"/room/"+o[9])),f(L,"class","hidden lg:flex flex-col mb-3"),f(ce,"class","mr-2"),f(M,"class","flex flex-row items-center"),f(ne,"class","shareButton lg:text-lg svelte-qg5rdz"),ee(ae,"hidden",!navigator.share),f(B,"class","lg:mb-10 w-1/2 lg:w-full"),f(ie,"class","text-xs"),f(fe,"class","text-xl"),f(Q,"class","flex flex-col mb-3"),f(ue,"class","text-xs"),f(W,"href",""+(y+"/control/"+o[9])),f(Z,"class","hidden lg:flex flex-col mb-3"),f(pe,"class","mr-2"),f(G,"class","flex flex-row items-center"),f(_e,"class","shareButton lg:text-lg svelte-qg5rdz"),ee(de,"hidden",!navigator.share),f(O,"class","w-1/2 lg:w-full"),f(I,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),f(k,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,p){he(r,s,p),x[t].m(s,null),he(r,u,p),he(r,k,p),l(k,m),l(m,h),l(h,w),l(k,q),l(k,d),l(d,_),l(_,E),j.m(E,null),l(d,oe),l(d,A),l(A,U),l(k,R),l(k,I),l(I,B),l(B,z),l(z,F),l(F,re),l(z,ge),l(z,Y),l(Y,be),l(B,ke),l(B,L),l(L,J),l(J,P),l(L,we),l(L,T),l(T,ye),l(T,Ye),l(T,Je),l(T,Qe),l(B,Ze),l(B,ae),l(ae,ne),l(ne,M),l(M,ce),l(ce,je),l(M,xe),Be(te,M,null),l(I,et),l(I,O),l(O,Q),l(Q,ie),l(ie,Ue),l(Q,tt),l(Q,fe),l(fe,ze),l(O,lt),l(O,Z),l(Z,ue),l(ue,Le),l(Z,st),l(Z,W),l(W,Oe),l(W,ot),l(W,rt),l(W,at),l(O,nt),l(O,de),l(de,_e),l(_e,G),l(G,pe),l(pe,$e),l(G,ct),Be(le,G,null),N=!0,it||(_t=[se(s,"click",o[18]),se(_,"click",o[11]),se(A,"click",o[12]),se(M,"click",o[13]),se(G,"click",o[14])],it=!0)},p(r,p){let $=t;t=mt(r),t===$?x[t].p(r,p):(Lt(),H(x[$],1,1,()=>{x[$]=null}),Ut(),e=x[t],e?e.p(r,p):(e=x[t]=pt[t](r),e.c()),X(e,1),e.m(s,null)),(!N||p&16)&&V(w,r[4]),p&32&&ee(h,"text-red-600",r[5]),qe===(qe=vt(r))&&j?j.p(r,p):(j.d(1),j=qe(r),j&&(j.c(),j.m(E,null))),p&64&&ee(_,"startButton",!r[6]),p&64&&ee(_,"stopButton",r[6]),(!N||p&256)&&C!==(C=r[8]("control.reset")+"")&&V(U,C),(!N||p&256)&&K!==(K=r[8]("control.room")+"")&&V(re,K),(!N||p&256)&&v!==(v=r[8]("control.room_url")+"")&&V(P,v),(!N||p&2)&&V(ye,r[1]),(!N||p&256)&&Ee!==(Ee=r[8]("control.share_room_url")+"")&&V(je,Ee),(!N||p&256)&&Ie!==(Ie=r[8]("control.pin")+"")&&V(Ue,Ie),(!N||p&1)&&V(ze,r[0]),(!N||p&256)&&Ne!==(Ne=r[8]("control.controller_url")+"")&&V(Le,Ne),(!N||p&2)&&V(Oe,r[1]),(!N||p&256)&&Se!==(Se=r[8]("control.share_controller_url")+"")&&V($e,Se)},i(r){N||(X(e),X(te.$$.fragment,r),X(le.$$.fragment,r),N=!0)},o(r){H(e),H(te.$$.fragment,r),H(le.$$.fragment,r),N=!1},d(r){r&&a(s),x[t].d(),r&&a(u),r&&a(k),j.d(),Te(te),Te(le),it=!1,zt(_t)}}}function el(o){let s,t;return s=new Ke({props:{icon:Gt,size:"2x"}}),{c(){Ae(s.$$.fragment)},l(e){Ve(s.$$.fragment,e)},m(e,u){Be(s,e,u),t=!0},p:ut,i(e){t||(X(s.$$.fragment,e),t=!0)},o(e){H(s.$$.fragment,e),t=!1},d(e){Te(s,e)}}}function tl(o){let s,t;return s=new Ke({props:{icon:Ht,size:"2x"}}),{c(){Ae(s.$$.fragment)},l(e){Ve(s.$$.fragment,e)},m(e,u){Be(s,e,u),t=!0},p:ut,i(e){t||(X(s.$$.fragment,e),t=!0)},o(e){H(s.$$.fragment,e),t=!1},d(e){Te(s,e)}}}function ll(o){let s=o[8]("control.start")+"",t;return{c(){t=g(s)},l(e){t=b(e,s)},m(e,u){he(e,t,u)},p(e,u){u&256&&s!==(s=e[8]("control.start")+"")&&V(t,s)},d(e){e&&a(t)}}}function sl(o){let s=o[8]("control.stop")+"",t;return{c(){t=g(s)},l(e){t=b(e,s)},m(e,u){he(e,t,u)},p(e,u){u&256&&s!==(s=e[8]("control.stop")+"")&&V(t,s)},d(e){e&&a(t)}}}function ol(o){let s,t,e,u,k,m;const h=[xt,Zt],w=[];function q(d,_){return d[2]&&d[3]?0:1}return t=q(o),e=w[t]=h[t](o),{c(){s=n("div"),e.c(),this.h()},l(d){s=c(d,"DIV",{id:!0,class:!0});var _=i(s);e.l(_),_.forEach(a),this.h()},h(){f(s,"id","main"),f(s,"class","w-full h-full overflow-hidden svelte-qg5rdz")},m(d,_){he(d,s,_),w[t].m(s,null),u=!0,k||(m=[se(Qt,"keydown",o[15]),se(s,"click",o[10],{once:!0})],k=!0)},p(d,[_]){let E=t;t=q(d),t===E?w[t].p(d,_):(Lt(),H(w[E],1,1,()=>{w[E]=null}),Ut(),e=w[t],e?e.p(d,_):(e=w[t]=h[t](d),e.c()),X(e,1),e.m(s,null))},i(d){u||(X(e),u=!0)},o(d){H(e),u=!1},d(d){d&&a(s),w[t].d(),k=!1,zt(m)}}}function rl(o,s,t){let e,u,k;ft(o,Xt,v=>t(22,e=v)),ft(o,Mt,v=>t(17,u=v)),ft(o,Wt,v=>t(8,k=v));let m=e.params.roomId,h,w,q=!1,d=!1,_,E,oe="",A=!1,C,U,R=!1,I;Rt(()=>{t(1,w=window.location.host),e.url.searchParams.has("pin")?t(0,h=e.url.searchParams.get("pin")):(t(0,h=sessionStorage.getItem("PIN-"+m)),h||t(0,h=prompt("Please enter the control PIN for room "+m))),h?(sessionStorage.setItem("PIN-"+m,h),z(h),I=new Audio(y+"/audio/beep.mp3")):dt(y+"/")});function B(){t(7,R=!0),I.play(),I.pause(),I.load()}function z(v){_=new WebSocket(Kt+"://"+Yt+"/"+m+"?pin="+v),_.onerror=function(P){console.log(P)},_.onmessage=function(P){if(P.data==="ROOM_NOT_FOUND")alert("The room "+m+" does not exist"),dt(y+"/");else if(P.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+m),dt(y+"/");else if(P.data==="AUTHENTICATED")t(2,q=!0);else{let we=P.data.substring(0,1),T=P.data.substring(2).includes(";")?P.data.substring(2).split(";"):[P.data.substring(2)];switch(we){case"t":t(16,E=parseInt(T[1])),E==0?re():ge();break;case"r":t(6,C=T[0]==="1");break}}}}function F(){C?_.send("pause"):_.send("start")}function K(){_.send("reset")}function re(){U===void 0&&(t(5,A=!0),Y(),U=setInterval(function(){t(5,A=!A)},500))}function ge(){U&&(clearInterval(U),U=void 0,t(5,A=!1))}function Y(){R&&(I.play(),setTimeout(function(){I.pause(),I.load()},2e3))}function be(){navigator.share&&navigator.share({title:"Shot Clock room "+m,url:y+"/room/"+m})}function ke(){navigator.share&&navigator.share({title:"Shot Clock controller "+m,url:y+"/control/"+m})}function L(v){v.key===" "||v.key==="Enter"?(F(),v.preventDefault()):(v.key.toLowerCase()==="m"||v.key.toLowerCase()==="c"||v.key==="Backspace")&&(K(),v.preventDefault())}const J=()=>t(7,R=!R);return o.$$.update=()=>{o.$$.dirty&131072&&setTimeout(()=>{t(3,d=!u)},100),o.$$.dirty&65536&&E!==void 0&&t(4,oe=E.toString().padStart(2,"0"))},[h,w,q,d,oe,A,C,R,k,m,B,F,K,be,ke,L,E,u,J]}class ul extends $t{constructor(s){super();qt(this,s,rl,ol,Ct,{})}}export{ul as default};
