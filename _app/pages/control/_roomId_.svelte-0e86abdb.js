import{S as ts,i as ss,s as ls,e as n,c,a as i,d as a,b as u,g as $e,X as y,o as V,p as Yt,q as L,Y as Jt,F as os,v as as,a1 as rs,n as Qt,w as ne,x as ce,y as ie,L as It,B as ue,P as Ne,a2 as Zt,a3 as es,k as b,t as v,m as g,h,a4 as F,R as e,j as Je,a5 as ns,a6 as cs}from"../../chunks/vendor-9018bcf9.js";import{p as is,w as us,s as fs}from"../../chunks/config-e6462f7e.js";import{b as x}from"../../chunks/paths-b0acc198.js";import{L as ds}from"../../chunks/LoadingInfo-4a044bd9.js";import{g as St}from"../../chunks/navigation-ecedacd4.js";const{window:ms}=rs;function _s(o){let l,t;return l=new ds({}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){V(l.$$.fragment,s),t=!1},d(s){ue(l,s)}}}function vs(o){let l,t,s,d,m,R,I,p,P,_,f,S,M,T,A,Be,E,O,fe,Re,$,Pe,De,D,W,Ue,q,ye,H,xe,Ae,G,w,N,j,B,Z,de,Qe,Ze,me,et,tt,ee,_e,st,lt,K,Oe,ot,at,rt,nt,ve,he,X,pe,ct,it,ae,ut,C,te,be,ft,dt,ge,je,mt,se,ke,_t,vt,Y,Ce,ht,pt,bt,gt,we,Ee,J,Ie,kt,wt,re,le,Et,Tt;const $t=[ps,hs],oe=[];function Nt(r,k){return r[7]?0:1}t=Nt(o),s=oe[t]=$t[t](o);function Bt(r,k){return r[6]?gs:bs}let ze=Bt(o),Q=ze(o);return W=new Ne({props:{class:"w-full lg:hidden",icon:Zt}}),q=new Ne({props:{class:"w-full hidden lg:block",icon:Zt,size:"2x"}}),ae=new Ne({props:{icon:es,size:"lg"}}),re=new Ne({props:{icon:es,size:"lg"}}),{c(){l=n("div"),s.c(),d=b(),m=n("div"),R=n("div"),I=n("span"),p=v(o[4]),P=b(),_=n("div"),f=n("button"),S=n("span"),Q.c(),M=b(),T=n("button"),A=v("RESET"),Be=b(),E=n("div"),O=n("button"),fe=v("-5s"),Re=b(),$=n("button"),Pe=v("-1s"),De=b(),D=n("button"),ne(W.$$.fragment),Ue=b(),ne(q.$$.fragment),ye=b(),H=n("button"),xe=v("+1s"),Ae=b(),G=n("button"),w=v("+5s"),N=b(),j=n("div"),B=n("div"),Z=n("div"),de=n("span"),Qe=v("Room"),Ze=b(),me=n("span"),et=v(o[8]),tt=b(),ee=n("div"),_e=n("span"),st=v("Room URL"),lt=b(),K=n("a"),Oe=v(o[2]),ot=v(x),at=v("/room/"),rt=v(o[8]),nt=b(),ve=n("div"),he=n("button"),X=n("div"),pe=n("span"),ct=v("Share Room URL"),it=b(),ne(ae.$$.fragment),ut=b(),C=n("div"),te=n("div"),be=n("span"),ft=v("PIN"),dt=b(),ge=n("span"),je=v(o[1]),mt=b(),se=n("div"),ke=n("span"),_t=v("Controller URL"),vt=b(),Y=n("a"),Ce=v(o[2]),ht=v(x),pt=v("/control/"),bt=v(o[8]),gt=b(),we=n("div"),Ee=n("button"),J=n("div"),Ie=n("span"),kt=v("Share Controller URL"),wt=b(),ne(re.$$.fragment),this.h()},l(r){l=c(r,"DIV",{class:!0});var k=i(l);s.l(k),k.forEach(a),d=g(r),m=c(r,"DIV",{class:!0});var U=i(m);R=c(U,"DIV",{class:!0});var Rt=i(R);I=c(Rt,"SPAN",{class:!0});var Pt=i(I);p=h(Pt,o[4]),Pt.forEach(a),Rt.forEach(a),P=g(U),_=c(U,"DIV",{class:!0});var Fe=i(_);f=c(Fe,"BUTTON",{class:!0});var Dt=i(f);S=c(Dt,"SPAN",{});var Ut=i(S);Q.l(Ut),Ut.forEach(a),Dt.forEach(a),M=g(Fe),T=c(Fe,"BUTTON",{class:!0});var yt=i(T);A=h(yt,"RESET"),yt.forEach(a),Fe.forEach(a),Be=g(U),E=c(U,"DIV",{class:!0});var z=i(E);O=c(z,"BUTTON",{class:!0});var xt=i(O);fe=h(xt,"-5s"),xt.forEach(a),Re=g(z),$=c(z,"BUTTON",{class:!0});var At=i($);Pe=h(At,"-1s"),At.forEach(a),De=g(z),D=c(z,"BUTTON",{class:!0,title:!0});var Me=i(D);ce(W.$$.fragment,Me),Ue=g(Me),ce(q.$$.fragment,Me),Me.forEach(a),ye=g(z),H=c(z,"BUTTON",{class:!0});var Vt=i(H);xe=h(Vt,"+1s"),Vt.forEach(a),Ae=g(z),G=c(z,"BUTTON",{class:!0});var Lt=i(G);w=h(Lt,"+5s"),Lt.forEach(a),z.forEach(a),N=g(U),j=c(U,"DIV",{class:!0});var We=i(j);B=c(We,"DIV",{class:!0});var Se=i(B);Z=c(Se,"DIV",{class:!0});var qe=i(Z);de=c(qe,"SPAN",{class:!0});var Ot=i(de);Qe=h(Ot,"Room"),Ot.forEach(a),Ze=g(qe),me=c(qe,"SPAN",{class:!0});var jt=i(me);et=h(jt,o[8]),jt.forEach(a),qe.forEach(a),tt=g(Se),ee=c(Se,"DIV",{class:!0});var He=i(ee);_e=c(He,"SPAN",{class:!0});var Ct=i(_e);st=h(Ct,"Room URL"),Ct.forEach(a),lt=g(He),K=c(He,"A",{href:!0});var Ve=i(K);Oe=h(Ve,o[2]),ot=h(Ve,x),at=h(Ve,"/room/"),rt=h(Ve,o[8]),Ve.forEach(a),He.forEach(a),nt=g(Se),ve=c(Se,"DIV",{});var zt=i(ve);he=c(zt,"BUTTON",{class:!0});var Ft=i(he);X=c(Ft,"DIV",{class:!0});var Ge=i(X);pe=c(Ge,"SPAN",{class:!0});var Mt=i(pe);ct=h(Mt,"Share Room URL"),Mt.forEach(a),it=g(Ge),ce(ae.$$.fragment,Ge),Ge.forEach(a),Ft.forEach(a),zt.forEach(a),Se.forEach(a),ut=g(We),C=c(We,"DIV",{class:!0});var Te=i(C);te=c(Te,"DIV",{class:!0});var Ke=i(te);be=c(Ke,"SPAN",{class:!0});var Wt=i(be);ft=h(Wt,"PIN"),Wt.forEach(a),dt=g(Ke),ge=c(Ke,"SPAN",{class:!0});var qt=i(ge);je=h(qt,o[1]),qt.forEach(a),Ke.forEach(a),mt=g(Te),se=c(Te,"DIV",{class:!0});var Xe=i(se);ke=c(Xe,"SPAN",{class:!0});var Ht=i(ke);_t=h(Ht,"Controller URL"),Ht.forEach(a),vt=g(Xe),Y=c(Xe,"A",{href:!0});var Le=i(Y);Ce=h(Le,o[2]),ht=h(Le,x),pt=h(Le,"/control/"),bt=h(Le,o[8]),Le.forEach(a),Xe.forEach(a),gt=g(Te),we=c(Te,"DIV",{});var Gt=i(we);Ee=c(Gt,"BUTTON",{class:!0});var Kt=i(Ee);J=c(Kt,"DIV",{class:!0});var Ye=i(J);Ie=c(Ye,"SPAN",{class:!0});var Xt=i(Ie);kt=h(Xt,"Share Controller URL"),Xt.forEach(a),wt=g(Ye),ce(re.$$.fragment,Ye),Ye.forEach(a),Kt.forEach(a),Gt.forEach(a),Te.forEach(a),We.forEach(a),U.forEach(a),this.h()},h(){u(l,"class","absolute top-3 left-3"),u(I,"class","clock svelte-vx77er"),F(I,"text-red-600",o[5]),u(R,"class","flex flex-col justify-center items-center"),u(f,"class","controlButton svelte-vx77er"),F(f,"startButton",!o[6]&&o[0]>0),F(f,"stopButton",o[6]&&o[0]>0),F(f,"buttonDisabled",o[0]==0),u(T,"class","controlButton shadow-reset text-white bg-button-bg-reset svelte-vx77er"),u(_,"class","flex flex-row lg:flex-col justify-evenly"),u(O,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-vx77er"),u($,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-vx77er"),u(D,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-vx77er"),u(D,"title","Rewind to last reset"),u(H,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-vx77er"),u(G,"class","controlButtonSmall shadow-reset text-white bg-button-bg-reset svelte-vx77er"),u(E,"class","flex flex-row lg:flex-col justify-evenly"),u(de,"class","text-xs"),u(me,"class","text-xl"),u(Z,"class","flex flex-col mb-3 mr-5 lg:mr-0"),u(_e,"class","text-xs"),u(K,"href",""+(x+"/room/"+o[8])),u(ee,"class","hidden lg:flex flex-col mb-3"),u(pe,"class","mr-2"),u(X,"class","flex flex-row items-center"),u(he,"class","shareButton lg:text-lg svelte-vx77er"),F(ve,"hidden",!navigator.share),u(B,"class","lg:mb-10 w-1/2 lg:w-full"),u(be,"class","text-xs"),u(ge,"class","text-xl"),u(te,"class","flex flex-col mb-3"),u(ke,"class","text-xs"),u(Y,"href",""+(x+"/control/"+o[8])),u(se,"class","hidden lg:flex flex-col mb-3"),u(Ie,"class","mr-2"),u(J,"class","flex flex-row items-center"),u(Ee,"class","shareButton lg:text-lg svelte-vx77er"),F(we,"hidden",!navigator.share),u(C,"class","w-1/2 lg:w-full"),u(j,"class","lg:text-right flex flex-row lg:flex-col justify-between lg:justify-start m-3"),u(m,"class","h-full w-full flex flex-col lg:flex-row justify-between")},m(r,k){$e(r,l,k),oe[t].m(l,null),$e(r,d,k),$e(r,m,k),e(m,R),e(R,I),e(I,p),e(m,P),e(m,_),e(_,f),e(f,S),Q.m(S,null),e(_,M),e(_,T),e(T,A),e(m,Be),e(m,E),e(E,O),e(O,fe),e(E,Re),e(E,$),e($,Pe),e(E,De),e(E,D),ie(W,D,null),e(D,Ue),ie(q,D,null),e(E,ye),e(E,H),e(H,xe),e(E,Ae),e(E,G),e(G,w),e(m,N),e(m,j),e(j,B),e(B,Z),e(Z,de),e(de,Qe),e(Z,Ze),e(Z,me),e(me,et),e(B,tt),e(B,ee),e(ee,_e),e(_e,st),e(ee,lt),e(ee,K),e(K,Oe),e(K,ot),e(K,at),e(K,rt),e(B,nt),e(B,ve),e(ve,he),e(he,X),e(X,pe),e(pe,ct),e(X,it),ie(ae,X,null),e(j,ut),e(j,C),e(C,te),e(te,be),e(be,ft),e(te,dt),e(te,ge),e(ge,je),e(C,mt),e(C,se),e(se,ke),e(ke,_t),e(se,vt),e(se,Y),e(Y,Ce),e(Y,ht),e(Y,pt),e(Y,bt),e(C,gt),e(C,we),e(we,Ee),e(Ee,J),e(J,Ie),e(Ie,kt),e(J,wt),ie(re,J,null),le=!0,Et||(Tt=[y(l,"click",o[17]),y(f,"click",o[10]),y(T,"click",o[11]),y(O,"click",o[18]),y($,"click",o[19]),y(D,"click",o[12]),y(H,"click",o[20]),y(G,"click",o[21]),y(X,"click",o[14]),y(J,"click",o[15])],Et=!0)},p(r,k){let U=t;t=Nt(r),t===U?oe[t].p(r,k):(Qt(),V(oe[U],1,1,()=>{oe[U]=null}),Yt(),s=oe[t],s?s.p(r,k):(s=oe[t]=$t[t](r),s.c()),L(s,1),s.m(l,null)),(!le||k&16)&&Je(p,r[4]),k&32&&F(I,"text-red-600",r[5]),ze!==(ze=Bt(r))&&(Q.d(1),Q=ze(r),Q&&(Q.c(),Q.m(S,null))),k&65&&F(f,"startButton",!r[6]&&r[0]>0),k&65&&F(f,"stopButton",r[6]&&r[0]>0),k&1&&F(f,"buttonDisabled",r[0]==0),(!le||k&4)&&Je(Oe,r[2]),(!le||k&2)&&Je(je,r[1]),(!le||k&4)&&Je(Ce,r[2])},i(r){le||(L(s),L(W.$$.fragment,r),L(q.$$.fragment,r),L(ae.$$.fragment,r),L(re.$$.fragment,r),le=!0)},o(r){V(s),V(W.$$.fragment,r),V(q.$$.fragment,r),V(ae.$$.fragment,r),V(re.$$.fragment,r),le=!1},d(r){r&&a(l),oe[t].d(),r&&a(d),r&&a(m),Q.d(),ue(W),ue(q),ue(ae),ue(re),Et=!1,Jt(Tt)}}}function hs(o){let l,t;return l=new Ne({props:{icon:ns,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){V(l.$$.fragment,s),t=!1},d(s){ue(l,s)}}}function ps(o){let l,t;return l=new Ne({props:{icon:cs,size:"2x"}}),{c(){ne(l.$$.fragment)},l(s){ce(l.$$.fragment,s)},m(s,d){ie(l,s,d),t=!0},p:It,i(s){t||(L(l.$$.fragment,s),t=!0)},o(s){V(l.$$.fragment,s),t=!1},d(s){ue(l,s)}}}function bs(o){let l;return{c(){l=v("START")},l(t){l=h(t,"START")},m(t,s){$e(t,l,s)},d(t){t&&a(l)}}}function gs(o){let l;return{c(){l=v("STOP")},l(t){l=h(t,"STOP")},m(t,s){$e(t,l,s)},d(t){t&&a(l)}}}function ks(o){let l,t,s,d,m,R;const I=[vs,_s],p=[];function P(_,f){return _[3]?0:1}return t=P(o),s=p[t]=I[t](o),{c(){l=n("div"),s.c(),this.h()},l(_){l=c(_,"DIV",{id:!0,class:!0});var f=i(l);s.l(f),f.forEach(a),this.h()},h(){u(l,"id","main"),u(l,"class","w-full h-full overflow-hidden svelte-vx77er")},m(_,f){$e(_,l,f),p[t].m(l,null),d=!0,m||(R=[y(ms,"keydown",o[16]),y(l,"click",o[9],{once:!0})],m=!0)},p(_,[f]){let S=t;t=P(_),t===S?p[t].p(_,f):(Qt(),V(p[S],1,1,()=>{p[S]=null}),Yt(),s=p[t],s?s.p(_,f):(s=p[t]=I[t](_),s.c()),L(s,1),s.m(l,null))},i(_){d||(L(s),d=!0)},o(_){V(s),d=!1},d(_){_&&a(l),p[t].d(),m=!1,Jt(R)}}}function ws(o,l,t){let s;os(o,is,w=>t(25,s=w));let d=s.params.roomId,m,R,I=!1,p,P,_="",f=!1,S,M,T=!1,A;as(()=>{t(2,R=window.location.host),s.url.searchParams.has("pin")?t(1,m=s.url.searchParams.get("pin")):(t(1,m=sessionStorage.getItem("PIN-"+d)),m||t(1,m=prompt("Please enter the control PIN for room "+d))),m?(sessionStorage.setItem("PIN-"+d,m),E(m),A=new Audio(x+"/audio/beep.mp3")):St(x+"/")});function Be(){t(7,T=!0),A.play(),A.pause(),A.load()}function E(w){p=new WebSocket(us+"://"+fs+"/"+d+"?pin="+w),p.onerror=function(N){console.log(N)},p.onmessage=function(N){if(N.data==="ROOM_NOT_FOUND")alert("The room "+d+" does not exist"),St(x+"/");else if(N.data==="WRONG_PIN")alert("Wrong PIN"),sessionStorage.removeItem("PIN-"+d),St(x+"/");else if(N.data==="AUTHENTICATED")t(3,I=!0);else{let j=N.data.substring(0,1),B=N.data.substring(2).includes(";")?N.data.substring(2).split(";"):[N.data.substring(2)];switch(j){case"t":t(0,P=parseInt(B[1])),P==0?Pe():De();break;case"r":t(6,S=B[0]==="1");break}}}}function O(){S?p.send("pause"):p.send("start")}function fe(){p.send("reset")}function Re(){p.send("rewind")}function $(w){p.send("updateTime;"+w)}function Pe(){M===void 0&&(t(5,f=!0),D(),M=setInterval(function(){t(5,f=!f)},500))}function De(){M&&(clearInterval(M),M=void 0,t(5,f=!1))}function D(){T&&(A.play(),setTimeout(function(){A.pause(),A.load()},2e3))}function W(){navigator.share&&navigator.share({title:"Shot Clock room "+d,url:x+"/room/"+d})}function Ue(){navigator.share&&navigator.share({title:"Shot Clock controller "+d,url:x+"/control/"+d})}function q(w){w.key===" "||w.key==="Enter"?(O(),w.preventDefault()):(w.key.toLowerCase()==="m"||w.key.toLowerCase()==="c"||w.key==="Backspace")&&(fe(),w.preventDefault())}const ye=()=>t(7,T=!T),H=()=>$(-5),xe=()=>$(-1),Ae=()=>$(1),G=()=>$(5);return o.$$.update=()=>{o.$$.dirty&1&&P!==void 0&&t(4,_=P.toString().padStart(2,"0"))},[P,m,R,I,_,f,S,T,d,Be,O,fe,Re,$,W,Ue,q,ye,H,xe,Ae,G]}class Ns extends ts{constructor(l){super();ss(this,l,ws,ks,ls,{})}}export{Ns as default};
