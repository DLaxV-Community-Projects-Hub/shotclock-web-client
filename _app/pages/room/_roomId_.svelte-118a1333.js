import{S as M,i as N,s as P,e as y,k as R,t as C,c as I,a as S,d as b,m as F,h as J,b as g,P as $,g as K,J as k,N as x,o as A,p as O,q as V,j as Q,O as W,Q as G,v as H,n as L,R as D,T as X,w as E,x as T,y as U,K as q,B as z,U as Y}from"../../chunks/vendor-c00b176d.js";import{p as Z}from"../../chunks/stores-bb3352fd.js";import{b as ee}from"../../chunks/paths-4b3c6e7e.js";function te(o){let t,s;return t=new D({props:{icon:X,size:"2x"}}),{c(){E(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,n){U(t,e,n),s=!0},p:q,i(e){s||(V(t.$$.fragment,e),s=!0)},o(e){A(t.$$.fragment,e),s=!1},d(e){z(t,e)}}}function se(o){let t,s;return t=new D({props:{icon:Y,size:"2x"}}),{c(){E(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,n){U(t,e,n),s=!0},p:q,i(e){s||(V(t.$$.fragment,e),s=!0)},o(e){A(t.$$.fragment,e),s=!1},d(e){z(t,e)}}}function ae(o){let t,s,e,n,h,l,c,u,i,p,f;const v=[se,te],d=[];function w(a,r){return a[2]?0:1}return e=w(o),n=d[e]=v[e](o),{c(){t=y("div"),s=y("div"),n.c(),h=R(),l=y("div"),c=y("span"),u=C(o[0]),this.h()},l(a){t=I(a,"DIV",{id:!0,class:!0});var r=S(t);s=I(r,"DIV",{class:!0});var _=S(s);n.l(_),_.forEach(b),h=F(r),l=I(r,"DIV",{class:!0});var m=S(l);c=I(m,"SPAN",{class:!0});var j=S(c);u=J(j,o[0]),j.forEach(b),m.forEach(b),r.forEach(b),this.h()},h(){g(s,"class","absolute top-3 left-3"),g(c,"class","clock svelte-jj001p"),$(c,"text-red-600",o[1]),g(l,"class","h-full w-full flex flex-col justify-center items-center"),g(t,"id","main"),g(t,"class","w-screen h-screen overflow-hidden svelte-jj001p")},m(a,r){K(a,t,r),k(t,s),d[e].m(s,null),k(t,h),k(t,l),k(l,c),k(c,u),i=!0,p||(f=[x(s,"click",o[5]),x(t,"click",o[3],{once:!0})],p=!0)},p(a,[r]){let _=e;e=w(a),e===_?d[e].p(a,r):(L(),A(d[_],1,1,()=>{d[_]=null}),O(),n=d[e],n?n.p(a,r):(n=d[e]=v[e](a),n.c()),V(n,1),n.m(s,null)),(!i||r&1)&&Q(u,a[0]),r&2&&$(c,"text-red-600",a[1])},i(a){i||(V(n),i=!0)},o(a){A(n),i=!1},d(a){a&&b(t),d[e].d(),p=!1,W(f)}}}function ne(o,t,s){let e;G(o,Z,a=>s(9,e=a));let n=e.params.roomId,h,l,c="",u=!1,i,p=!1,f;H(()=>{d(),f=new Audio(ee+"/audio/beep.mp3")});function v(){s(2,p=!0),f.play(),f.pause(),f.load()}function d(){h=new WebSocket("wss://tobias-reinke.de/shotclock/"+n),h.onerror=function(m){console.log(m)},h.onmessage=function(m){let j=m.data.substring(0,1),B=m.data.substring(2).includes(";")?m.data.substring(2).split(";"):[m.data.substring(2)];switch(j){case"t":s(4,l=parseInt(B[1])),l==0?a():r();break}};function a(){i===void 0&&(s(1,u=!0),_(),i=setInterval(function(){s(1,u=!u)},500))}function r(){i&&(clearInterval(i),i=void 0,s(1,u=!1))}function _(){p&&(f.play(),setTimeout(function(){f.pause(),f.load()},2e3))}}const w=()=>s(2,p=!p);return o.$$.update=()=>{o.$$.dirty&16&&l!==void 0&&s(0,c=l.toString().padStart(2,"0"))},[c,u,p,v,l,w]}class ce extends M{constructor(t){super();N(this,t,ne,ae,P,{})}}export{ce as default};
