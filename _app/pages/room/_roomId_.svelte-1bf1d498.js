import{S as Y,i as Z,s as x,e as E,c as A,a as N,d as m,b as S,g as P,R as H,o as D,p as Q,q as V,I as z,v as ee,n as W,w as j,x as B,y as F,E as M,B as L,t as O,h as U,Q as y,k as R,m as T,U as v,j as $}from"../../chunks/index-bcecc6c1.js";import{w as te,s as le,p as re}from"../../chunks/config-3ef163f3.js";import{b as C}from"../../chunks/singletons-1b661bce.js";import{L as se,F as G,c as oe,d as ae}from"../../chunks/LoadingInfo-1f9f7de7.js";import{g as ne}from"../../chunks/navigation-d1154fc1.js";import{k as ie}from"../../chunks/runtime.esm-39e6a741.js";import"../../chunks/index-61660f38.js";function ce(r){let t,l;return t=new se({}),{c(){j(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,s){F(t,e,s),l=!0},p:M,i(e){l||(V(t.$$.fragment,e),l=!0)},o(e){D(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function fe(r){let t,l,e,s,n,u,f,o,k;const i=[pe,ue],c=[];function b(a,_){return a[5]?0:1}l=b(r),e=c[l]=i[l](r);let p=r[7]&&_e(r);function w(a,_){return a[0]<=60?de:me}let g=w(r),h=g(r);return{c(){t=E("div"),e.c(),s=R(),n=E("div"),p&&p.c(),u=R(),h.c(),this.h()},l(a){t=A(a,"DIV",{class:!0});var _=N(t);e.l(_),_.forEach(m),s=T(a),n=A(a,"DIV",{class:!0});var d=N(n);p&&p.l(d),u=T(d),h.l(d),d.forEach(m),this.h()},h(){S(t,"class","absolute top-3 left-3"),S(n,"class","h-full w-full flex flex-col justify-start items-center")},m(a,_){P(a,t,_),c[l].m(t,null),P(a,s,_),P(a,n,_),p&&p.m(n,null),y(n,u),h.m(n,null),f=!0,o||(k=H(t,"click",r[9]),o=!0)},p(a,_){let d=l;l=b(a),l===d?c[l].p(a,_):(W(),D(c[d],1,1,()=>{c[d]=null}),Q(),e=c[l],e?e.p(a,_):(e=c[l]=i[l](a),e.c()),V(e,1),e.m(t,null)),a[7]&&p.p(a,_),g===(g=w(a))&&h?h.p(a,_):(h.d(1),h=g(a),h&&(h.c(),h.m(n,null)))},i(a){f||(V(e),f=!0)},o(a){D(e),f=!1},d(a){a&&m(t),c[l].d(),a&&m(s),a&&m(n),p&&p.d(),h.d(),o=!1,k()}}}function ue(r){let t,l;return t=new G({props:{icon:oe,size:"2x"}}),{c(){j(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,s){F(t,e,s),l=!0},p:M,i(e){l||(V(t.$$.fragment,e),l=!0)},o(e){D(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function pe(r){let t,l;return t=new G({props:{icon:ae,size:"2x"}}),{c(){j(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,s){F(t,e,s),l=!0},p:M,i(e){l||(V(t.$$.fragment,e),l=!0)},o(e){D(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function _e(r){let t,l;return{c(){t=E("span"),l=O(r[7]),this.h()},l(e){t=A(e,"SPAN",{class:!0});var s=N(t);l=U(s,r[7]),s.forEach(m),this.h()},h(){S(t,"class","title portrait:mt-5 svelte-r3ecmr")},m(e,s){P(e,t,s),y(t,l)},p:M,d(e){e&&m(t)}}}function me(r){let t,l,e,s,n,u;return{c(){t=E("div"),l=E("span"),e=O(r[1]),s=R(),n=E("span"),u=O(r[2]),this.h()},l(f){t=A(f,"DIV",{class:!0});var o=N(t);l=A(o,"SPAN",{class:!0});var k=N(l);e=U(k,r[1]),k.forEach(m),s=T(o),n=A(o,"SPAN",{class:!0});var i=N(n);u=U(i,r[2]),i.forEach(m),o.forEach(m),this.h()},h(){S(l,"class","clock svelte-r3ecmr"),v(l,"text-red-600",r[4]),v(l,"clock-small",r[7]),v(l,"clock-large",!r[7]),S(n,"class","clock svelte-r3ecmr"),v(n,"text-red-600",r[4]),v(n,"clock-small",r[7]),v(n,"clock-large",!r[7]),S(t,"class","flex portrait:flex-col landscape:flex-row")},m(f,o){P(f,t,o),y(t,l),y(l,e),y(t,s),y(t,n),y(n,u)},p(f,o){o&2&&$(e,f[1]),o&16&&v(l,"text-red-600",f[4]),o&4&&$(u,f[2]),o&16&&v(n,"text-red-600",f[4])},d(f){f&&m(t)}}}function de(r){let t,l;return{c(){t=E("span"),l=O(r[3]),this.h()},l(e){t=A(e,"SPAN",{class:!0});var s=N(t);l=U(s,r[3]),s.forEach(m),this.h()},h(){S(t,"class","clock svelte-r3ecmr"),v(t,"text-red-600",r[4]),v(t,"clock-small",r[7]),v(t,"clock-large",!r[7])},m(e,s){P(e,t,s),y(t,l)},p(e,s){s&8&&$(l,e[3]),s&16&&v(t,"text-red-600",e[4])},d(e){e&&m(t)}}}function he(r){let t,l,e,s,n,u;const f=[fe,ce],o=[];function k(i,c){return i[6]?1:0}return l=k(r),e=o[l]=f[l](r),{c(){t=E("div"),e.c(),this.h()},l(i){t=A(i,"DIV",{id:!0,class:!0});var c=N(t);e.l(c),c.forEach(m),this.h()},h(){S(t,"id","main"),S(t,"class","w-full h-full svelte-r3ecmr")},m(i,c){P(i,t,c),o[l].m(t,null),s=!0,n||(u=H(t,"click",r[8],{once:!0}),n=!0)},p(i,[c]){let b=l;l=k(i),l===b?o[l].p(i,c):(W(),D(o[b],1,1,()=>{o[b]=null}),Q(),e=o[l],e?e.p(i,c):(e=o[l]=f[l](i),e.c()),V(e,1),e.m(t,null))},i(i){s||(V(e),s=!0)},o(i){D(e),s=!1},d(i){i&&m(t),o[l].d(),n=!1,u()}}}function ke(r,t,l){let e,s;z(r,re,d=>l(13,e=d)),z(r,ie,d=>l(6,s=d));let n=e.params.roomId,u,f,o,k="",i="",c="",b=!1,p,w=!1,g;ee(()=>{a(),g=new Audio(C+"/audio/beep.mp3")});function h(){l(5,w=!0),g.play(),g.pause(),g.load()}function a(){u=new WebSocket(te+"://"+le+"/"+n),u.onerror=function(I){console.log(I)},u.onmessage=function(I){if(I.data==="ROOM_NOT_FOUND")alert("The room "+n+" does not exist"),ne(C+"/");else if(I.data==="HORN")q();else{let K=I.data.substring(0,1),X=I.data.substring(2).includes(";")?I.data.substring(2).split(";"):[I.data.substring(2)];switch(K){case"t":l(0,o=parseInt(X[1])),o==0?d():J();break}}};function d(){p===void 0&&(l(4,b=!0),q(),p=setInterval(function(){l(4,b=!b)},500))}function J(){p&&(clearInterval(p),p=void 0,l(4,b=!1))}function q(){w&&(g.play(),setTimeout(function(){g.pause(),g.load()},2e3))}}const _=()=>l(5,w=!w);return r.$$.update=()=>{r.$$.dirty&7&&o!==void 0&&(o<=60?l(3,k=o.toString().padStart(2,"0")):l(1,i=Math.floor(o/60).toString().padStart(2,"0")+":"),l(2,c=(o%60).toString().padStart(2,"0")),l(3,k=i+c))},[o,i,c,k,b,w,s,f,h,_]}class Ee extends Y{constructor(t){super(),Z(this,t,ke,he,x,{})}}export{Ee as default};
