import{S as P,i as R,s as q,e as I,k as z,t as F,c as j,a as x,d as g,m as W,h as C,b,Z as A,g as H,R as k,V as D,o as S,p as Z,q as V,j as G,W as J,H as K,v as L,n as Q,P as O,_ as X,w as $,x as E,y as T,O as U,B,a0 as Y}from"../../chunks/vendor-d6659832.js";import{p as ee,w as te,s as se}from"../../chunks/config-9a6a8ce5.js";import{b as M}from"../../chunks/paths-b0acc198.js";import{g as ae}from"../../chunks/navigation-ecedacd4.js";function oe(n){let t,s;return t=new O({props:{icon:X,size:"2x"}}),{c(){$(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,o){T(t,e,o),s=!0},p:U,i(e){s||(V(t.$$.fragment,e),s=!0)},o(e){S(t.$$.fragment,e),s=!1},d(e){B(t,e)}}}function ne(n){let t,s;return t=new O({props:{icon:Y,size:"2x"}}),{c(){$(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,o){T(t,e,o),s=!0},p:U,i(e){s||(V(t.$$.fragment,e),s=!0)},o(e){S(t.$$.fragment,e),s=!1},d(e){B(t,e)}}}function re(n){let t,s,e,o,h,l,c,u,i,m,f;const v=[ne,oe],d=[];function w(a,r){return a[2]?0:1}return e=w(n),o=d[e]=v[e](n),{c(){t=I("div"),s=I("div"),o.c(),h=z(),l=I("div"),c=I("span"),u=F(n[0]),this.h()},l(a){t=j(a,"DIV",{id:!0,class:!0});var r=x(t);s=j(r,"DIV",{class:!0});var _=x(s);o.l(_),_.forEach(g),h=W(r),l=j(r,"DIV",{class:!0});var p=x(l);c=j(p,"SPAN",{class:!0});var y=x(c);u=C(y,n[0]),y.forEach(g),p.forEach(g),r.forEach(g),this.h()},h(){b(s,"class","absolute top-3 left-3"),b(c,"class","clock svelte-1eujyxo"),A(c,"text-red-600",n[1]),b(l,"class","h-full w-full flex flex-col justify-center items-center"),b(t,"id","main"),b(t,"class","w-full h-full overflow-hidden svelte-1eujyxo")},m(a,r){H(a,t,r),k(t,s),d[e].m(s,null),k(t,h),k(t,l),k(l,c),k(c,u),i=!0,m||(f=[D(s,"click",n[5]),D(t,"click",n[3],{once:!0})],m=!0)},p(a,[r]){let _=e;e=w(a),e===_?d[e].p(a,r):(Q(),S(d[_],1,1,()=>{d[_]=null}),Z(),o=d[e],o?o.p(a,r):(o=d[e]=v[e](a),o.c()),V(o,1),o.m(s,null)),(!i||r&1)&&G(u,a[0]),r&2&&A(c,"text-red-600",a[1])},i(a){i||(V(o),i=!0)},o(a){S(o),i=!1},d(a){a&&g(t),d[e].d(),m=!1,J(f)}}}function le(n,t,s){let e;K(n,ee,a=>s(9,e=a));let o=e.params.roomId,h,l,c="",u=!1,i,m=!1,f;L(()=>{d(),f=new Audio(M+"/audio/beep.mp3")});function v(){s(2,m=!0),f.play(),f.pause(),f.load()}function d(){h=new WebSocket(te+"://"+se+"/"+o),h.onerror=function(p){console.log(p)},h.onmessage=function(p){if(p.data==="ROOM_NOT_FOUND")alert("The room "+o+" does not exist"),ae(M+"/");else{let y=p.data.substring(0,1),N=p.data.substring(2).includes(";")?p.data.substring(2).split(";"):[p.data.substring(2)];switch(y){case"t":s(4,l=parseInt(N[1])),l==0?a():r();break}}};function a(){i===void 0&&(s(1,u=!0),_(),i=setInterval(function(){s(1,u=!u)},500))}function r(){i&&(clearInterval(i),i=void 0,s(1,u=!1))}function _(){m&&(f.play(),setTimeout(function(){f.pause(),f.load()},2e3))}}const w=()=>s(2,m=!m);return n.$$.update=()=>{n.$$.dirty&16&&l!==void 0&&s(0,c=l.toString().padStart(2,"0"))},[c,u,m,v,l,w]}class de extends P{constructor(t){super();R(this,t,le,re,q,{})}}export{de as default};
