import{S as P,i as C,s as H,e as I,c as $,a as S,d as g,b as v,g as A,R as j,o as k,p as B,q as h,I as x,v as Q,n as F,w as D,x as E,y as O,E as U,B as V,k as W,t as G,m as J,h as K,U as N,Q as R,j as X}from"../../chunks/index-bcecc6c1.js";import{w as Y,s as Z,p as ee}from"../../chunks/config-3ef163f3.js";import{b as T}from"../../chunks/singletons-1b661bce.js";import{L as te,F as L,c as oe,d as se}from"../../chunks/LoadingInfo-1f9f7de7.js";import{g as le}from"../../chunks/navigation-d1154fc1.js";import{k as re}from"../../chunks/runtime.esm-39e6a741.js";import"../../chunks/index-61660f38.js";function ae(a){let o,t;return o=new te({}),{c(){D(o.$$.fragment)},l(e){E(o.$$.fragment,e)},m(e,n){O(o,e,n),t=!0},p:U,i(e){t||(h(o.$$.fragment,e),t=!0)},o(e){k(o.$$.fragment,e),t=!1},d(e){V(o,e)}}}function ne(a){let o,t,e,n,f,u,m,i,p,l;const c=[ce,ie],r=[];function w(s,d){return s[2]?0:1}return t=w(a),e=r[t]=c[t](a),{c(){o=I("div"),e.c(),n=W(),f=I("div"),u=I("span"),m=G(a[0]),this.h()},l(s){o=$(s,"DIV",{class:!0});var d=S(o);e.l(d),d.forEach(g),n=J(s),f=$(s,"DIV",{class:!0});var _=S(f);u=$(_,"SPAN",{class:!0});var y=S(u);m=K(y,a[0]),y.forEach(g),_.forEach(g),this.h()},h(){v(o,"class","absolute top-3 left-3"),v(u,"class","clock svelte-1fdq5l4"),N(u,"text-red-600",a[1]),v(f,"class","h-full w-full flex flex-col justify-center items-center")},m(s,d){A(s,o,d),r[t].m(o,null),A(s,n,d),A(s,f,d),R(f,u),R(u,m),i=!0,p||(l=j(o,"click",a[6]),p=!0)},p(s,d){let _=t;t=w(s),t===_?r[t].p(s,d):(F(),k(r[_],1,1,()=>{r[_]=null}),B(),e=r[t],e?e.p(s,d):(e=r[t]=c[t](s),e.c()),h(e,1),e.m(o,null)),(!i||d&1)&&X(m,s[0]),d&2&&N(u,"text-red-600",s[1])},i(s){i||(h(e),i=!0)},o(s){k(e),i=!1},d(s){s&&g(o),r[t].d(),s&&g(n),s&&g(f),p=!1,l()}}}function ie(a){let o,t;return o=new L({props:{icon:oe,size:"2x"}}),{c(){D(o.$$.fragment)},l(e){E(o.$$.fragment,e)},m(e,n){O(o,e,n),t=!0},p:U,i(e){t||(h(o.$$.fragment,e),t=!0)},o(e){k(o.$$.fragment,e),t=!1},d(e){V(o,e)}}}function ce(a){let o,t;return o=new L({props:{icon:se,size:"2x"}}),{c(){D(o.$$.fragment)},l(e){E(o.$$.fragment,e)},m(e,n){O(o,e,n),t=!0},p:U,i(e){t||(h(o.$$.fragment,e),t=!0)},o(e){k(o.$$.fragment,e),t=!1},d(e){V(o,e)}}}function ue(a){let o,t,e,n,f,u;const m=[ne,ae],i=[];function p(l,c){return l[3]?1:0}return t=p(a),e=i[t]=m[t](a),{c(){o=I("div"),e.c(),this.h()},l(l){o=$(l,"DIV",{id:!0,class:!0});var c=S(o);e.l(c),c.forEach(g),this.h()},h(){v(o,"id","main"),v(o,"class","w-full h-full overflow-hidden svelte-1fdq5l4")},m(l,c){A(l,o,c),i[t].m(o,null),n=!0,f||(u=j(o,"click",a[4],{once:!0}),f=!0)},p(l,[c]){let r=t;t=p(l),t===r?i[t].p(l,c):(F(),k(i[r],1,1,()=>{i[r]=null}),B(),e=i[t],e?e.p(l,c):(e=i[t]=m[t](l),e.c()),h(e,1),e.m(o,null))},i(l){n||(h(e),n=!0)},o(l){k(e),n=!1},d(l){l&&g(o),i[t].d(),f=!1,u()}}}function fe(a,o,t){let e,n;x(a,ee,_=>t(10,e=_)),x(a,re,_=>t(3,n=_));let f=e.params.roomId,u,m,i="",p=!1,l,c=!1,r;Q(()=>{s(),r=new Audio(T+"/audio/beep.mp3")});function w(){t(2,c=!0),r.play(),r.pause(),r.load()}function s(){u=new WebSocket(Y+"://"+Z+"/"+f),u.onerror=function(b){console.log(b)},u.onmessage=function(b){if(b.data==="ROOM_NOT_FOUND")alert("The room "+f+" does not exist"),le(T+"/");else if(b.data==="HORN")q();else{let M=b.data.substring(0,1),z=b.data.substring(2).includes(";")?b.data.substring(2).split(";"):[b.data.substring(2)];switch(M){case"t":t(5,m=parseInt(z[1])),m==0?_():y();break}}};function _(){l===void 0&&(t(1,p=!0),q(),l=setInterval(function(){t(1,p=!p)},500))}function y(){l&&(clearInterval(l),l=void 0,t(1,p=!1))}function q(){c&&(r.play(),setTimeout(function(){r.pause(),r.load()},2e3))}}const d=()=>t(2,c=!c);return a.$$.update=()=>{a.$$.dirty&32&&m!==void 0&&t(0,i=m.toString().padStart(2,"0"))},[i,p,c,n,w,m,d]}class he extends P{constructor(o){super(),C(this,o,fe,ue,H,{})}}export{he as default};
