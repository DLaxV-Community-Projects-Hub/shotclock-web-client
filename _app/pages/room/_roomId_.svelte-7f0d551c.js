import{S as P,i as C,s as Q,e as I,c as $,a as S,d as b,b as v,g as A,R as B,o as k,p as F,q as h,I as x,v as W,n as L,w as D,x as E,y as U,E as V,B as q,k as G,t as H,m as J,h as K,U as O,Q as T,j as X}from"../../chunks/index-bcecc6c1.js";import{w as Y,s as Z,p as ee}from"../../chunks/config-3ef163f3.js";import{b as j}from"../../chunks/singletons-1b661bce.js";import{L as te,F as M,c as oe,d as se}from"../../chunks/LoadingInfo-1f9f7de7.js";import{g as re}from"../../chunks/navigation-d1154fc1.js";import{k as le}from"../../chunks/runtime.esm-39e6a741.js";import"../../chunks/index-61660f38.js";function ae(a){let o,t;return o=new te({}),{c(){D(o.$$.fragment)},l(e){E(o.$$.fragment,e)},m(e,n){U(o,e,n),t=!0},p:V,i(e){t||(h(o.$$.fragment,e),t=!0)},o(e){k(o.$$.fragment,e),t=!1},d(e){q(o,e)}}}function ne(a){let o,t,e,n,f,u,m,i,p,r;const c=[ce,ie],l=[];function w(s,d){return s[2]?0:1}return t=w(a),e=l[t]=c[t](a),{c(){o=I("div"),e.c(),n=G(),f=I("div"),u=I("span"),m=H(a[0]),this.h()},l(s){o=$(s,"DIV",{class:!0});var d=S(o);e.l(d),d.forEach(b),n=J(s),f=$(s,"DIV",{class:!0});var _=S(f);u=$(_,"SPAN",{class:!0});var y=S(u);m=K(y,a[0]),y.forEach(b),_.forEach(b),this.h()},h(){v(o,"class","absolute top-3 left-3"),v(u,"class","clock svelte-1fdq5l4"),O(u,"text-red-600",a[1]),v(f,"class","h-full w-full flex flex-col justify-center items-center")},m(s,d){A(s,o,d),l[t].m(o,null),A(s,n,d),A(s,f,d),T(f,u),T(u,m),i=!0,p||(r=B(o,"click",a[6]),p=!0)},p(s,d){let _=t;t=w(s),t===_?l[t].p(s,d):(L(),k(l[_],1,1,()=>{l[_]=null}),F(),e=l[t],e?e.p(s,d):(e=l[t]=c[t](s),e.c()),h(e,1),e.m(o,null)),(!i||d&1)&&X(m,s[0]),d&2&&O(u,"text-red-600",s[1])},i(s){i||(h(e),i=!0)},o(s){k(e),i=!1},d(s){s&&b(o),l[t].d(),s&&b(n),s&&b(f),p=!1,r()}}}function ie(a){let o,t;return o=new M({props:{icon:oe,size:"2x"}}),{c(){D(o.$$.fragment)},l(e){E(o.$$.fragment,e)},m(e,n){U(o,e,n),t=!0},p:V,i(e){t||(h(o.$$.fragment,e),t=!0)},o(e){k(o.$$.fragment,e),t=!1},d(e){q(o,e)}}}function ce(a){let o,t;return o=new M({props:{icon:se,size:"2x"}}),{c(){D(o.$$.fragment)},l(e){E(o.$$.fragment,e)},m(e,n){U(o,e,n),t=!0},p:V,i(e){t||(h(o.$$.fragment,e),t=!0)},o(e){k(o.$$.fragment,e),t=!1},d(e){q(o,e)}}}function ue(a){let o,t,e,n,f,u;const m=[ne,ae],i=[];function p(r,c){return r[3]?1:0}return t=p(a),e=i[t]=m[t](a),{c(){o=I("div"),e.c(),this.h()},l(r){o=$(r,"DIV",{id:!0,class:!0});var c=S(o);e.l(c),c.forEach(b),this.h()},h(){v(o,"id","main"),v(o,"class","w-full h-full overflow-hidden svelte-1fdq5l4")},m(r,c){A(r,o,c),i[t].m(o,null),n=!0,f||(u=B(o,"click",a[4],{once:!0}),f=!0)},p(r,[c]){let l=t;t=p(r),t===l?i[t].p(r,c):(L(),k(i[l],1,1,()=>{i[l]=null}),F(),e=i[t],e?e.p(r,c):(e=i[t]=m[t](r),e.c()),h(e,1),e.m(o,null))},i(r){n||(h(e),n=!0)},o(r){k(e),n=!1},d(r){r&&b(o),i[t].d(),f=!1,u()}}}function fe(a,o,t){let e,n;x(a,ee,_=>t(10,e=_)),x(a,le,_=>t(3,n=_));let f=e.params.roomId,u,m,i="",p=!1,r,c=!1,l;W(()=>{s(),l=new Audio(j+"/audio/beep.mp3")});function w(){t(2,c=!0),l.play(),l.pause(),l.load()}function s(){u=new WebSocket(Y+"://"+Z+"/"+f),u.onerror=function(g){console.log(g)},u.onmessage=function(g){if(g.data==="ROOM_NOT_FOUND")alert("The room "+f+" does not exist"),re(j+"/");else{let R=g.data.substring(0,1),z=g.data.substring(2).includes(";")?g.data.substring(2).split(";"):[g.data.substring(2)];switch(R){case"t":t(5,m=parseInt(z[1])),m==0?_():y();break}}};function _(){r===void 0&&(t(1,p=!0),N(),r=setInterval(function(){t(1,p=!p)},500))}function y(){r&&(clearInterval(r),r=void 0,t(1,p=!1))}function N(){c&&(l.play(),setTimeout(function(){l.pause(),l.load()},2e3))}}const d=()=>t(2,c=!c);return a.$$.update=()=>{a.$$.dirty&32&&m!==void 0&&t(0,i=m.toString().padStart(2,"0"))},[i,p,c,n,w,m,d]}class he extends P{constructor(o){super(),C(this,o,fe,ue,Q,{})}}export{he as default};
